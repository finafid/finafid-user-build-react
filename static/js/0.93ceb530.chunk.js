"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[0],{2614:(e,a,t)=>{t.d(a,{aQ:()=>u,Fx:()=>f,Px:()=>m,gD:()=>x});var s=t(2532),r=t(3248),d=t(7097),n=t(5026);const i=async()=>(await n.A.get("/getGiftCardByUser")).data,l=async e=>(await n.A.post("/createGiftCard",e)).data,c=async e=>(await n.A.post("/redeemGiftCard",{code:e})).data,o=async()=>{var e;return null===(e=(await n.A.get("/getAllTemplates")).data)||void 0===e?void 0:e.allTemplates},m=()=>(0,s.I)({queryKey:["giftCards"],queryFn:i,staleTime:3e5}),u=()=>{const e=(0,r.jE)();return(0,d.n)({mutationFn:l,onSuccess:()=>{e.invalidateQueries(["giftCards"])}})},x=()=>{const e=(0,r.jE)();return(0,d.n)({mutationFn:c,onSuccess:()=>{e.invalidateQueries(["giftCards"])}})},f=()=>(0,s.I)({queryKey:["giftCard-templates"],queryFn:o,staleTime:3e5})},3e3:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(5200),r=t(3907),d=t(1940),n=t(5962),i=t(2614),l=t(2925),c=t(9060),o=t(579);const m=()=>{const e=(0,l.d)(),{getBalance:a}=(0,c.v)(),t=(0,i.gD)(),{formData:s,handleChange:m,handleSubmit:u,clearForm:x}=(0,n.A)({},(s=>{const{code:r}=s;r?t.mutate(r,{onSuccess:async()=>{await a(),e.success("Balance added into wallet successfully"),x()},onError:a=>{var t,s;console.error(a),e.error(null===a||void 0===a||null===(t=a.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)}}):e.error("Please enter a code")}));return(0,o.jsx)("div",{className:"mt-8",children:(0,o.jsxs)("form",{onSubmit:u,className:"flex flex-wrap items-end gap-x-8 gap-y-2",children:[(0,o.jsx)(d.A,{label:"redeem gift card",name:"code",value:s.code,onChange:m,placeholder:"enter your gift code",className:"w-60 h-10 border-2 border-secondary rounded-md px-4 py-2 text-sm placeholder:text-sm"}),(0,o.jsx)(r.A,{disabled:t.isPending,className:"h-10 px-4 py-2 rounded-md",children:"redeem"})]})})};var u=t(94),x=t(3216),f=t(4412);const p=()=>{const{data:e,isLoading:a,error:t}=(0,i.Px)();return a?(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(f.A,{})}):t?(0,o.jsx)("div",{className:"flex justify-center text-sm text-error",children:t.message}):(0,o.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:0===e.length?(0,o.jsx)("p",{className:"text-center text-primary",children:"No gift cards available."}):e.map((e=>{var a,t;return(0,o.jsx)("div",{className:"h-24 w-32 rounded overflow-hidden",children:(0,o.jsx)("img",{src:null===e||void 0===e||null===(a=e.templateId)||void 0===a?void 0:a.template,alt:null===e||void 0===e||null===(t=e.templateId)||void 0===t?void 0:t.title,className:"size-full object-cover object-center"})},e._id)}))})},h=()=>{const e=(0,x.Zp)();return(0,o.jsx)(u.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,o.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Gift Cards"}),(0,o.jsx)(p,{}),(0,o.jsxs)("button",{onClick:()=>e("create"),className:"px-4 py-2 flex justify-start items-center gap-2 border border-primeRed rounded-md text-primeRed bg-white hover:bg-offWhite",children:[(0,o.jsx)(s.tN3,{size:18}),(0,o.jsx)("p",{className:"font-medium",children:"Create Gift Card"})]}),(0,o.jsx)(m,{})]})})}}}]);
//# sourceMappingURL=0.93ceb530.chunk.js.map