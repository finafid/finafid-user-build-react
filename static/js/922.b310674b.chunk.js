"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[922],{495:(e,s,t)=>{t.d(s,{$V:()=>o,AI:()=>i,hD:()=>r,rr:()=>d,vr:()=>c});var a=t(2555),n=t(2532),l=t(6460);const r=()=>(0,n.I)({queryKey:["coupons"],queryFn:l.DB,staleTime:3e5,placeholderData:[]}),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"flash",s=arguments.length>1?arguments[1]:void 0;return(0,n.I)({queryKey:[e,s],queryFn:"flash"===e?()=>(0,l.nZ)(s):"featured"===e?()=>(0,l.n)(s):null,staleTime:3e5,enabled:!!s})},d=e=>(0,n.I)((0,a.A)({queryKey:["flashDeals"],queryFn:l.HU,staleTime:3e5},e)),c=e=>(0,n.I)((0,a.A)({queryKey:["featuredDeals"],queryFn:l.RR,staleTime:3e5},e)),o=e=>(0,n.I)((0,a.A)({queryKey:["dealsOfTheDay"],queryFn:l.KV,staleTime:3e5},e))},674:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(5043),n=t(5200),l=t(579);const r=e=>{let{value:s=1,min:t=1,max:r=1/0,onIncrease:i=()=>{},onDecrease:d=()=>{},readOnly:c=!1,btnClass:o="w-6",containerClassName:m="h-5 rounded"}=e;const[x,p]=(0,a.useState)(s);(0,a.useEffect)((()=>{p(s)}),[s]);return(0,l.jsxs)("div",{className:"w-max flex items-center border overflow-hidden ".concat(m),children:[(0,l.jsx)("button",{type:"button",onClick:()=>{if(x>t){const e=x-1;p(e),d(e)}},className:"bg-offWhite hover:bg-mainGray border-r h-full flex items-center justify-center ".concat(o),disabled:x<=t,children:(0,l.jsx)(n.QLg,{size:14,className:x<=t?"text-primary":"text-dark"})}),(0,l.jsx)("input",{type:"number",value:x,min:t,readOnly:c,onChange:e=>p(e.target.value),className:"text-dark bg-offWhite outline-none w-8 h-full text-center text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none read-only:cursor-default"}),(0,l.jsx)("button",{type:"button",onClick:()=>{if(x<r){const e=x+1;p(e),i(e)}},className:"bg-offWhite hover:bg-mainGray border-l h-full flex items-center justify-center ".concat(o),disabled:x>=r,children:(0,l.jsx)(n.GGD,{size:14,className:x>=r?"text-primary":"text-dark"})})]})}},1701:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(5043),n=t(5178),l=t(5026);var r=t(2925),i=t(9659);const d=()=>{const[e,s]=(0,a.useState)(null),[t,d]=(0,a.useState)(null),[c,o]=(0,a.useState)(!1),{user:m}=(0,i.J)(),x=(0,r.d)(),p=async(e,t)=>{var a,r,i,c,o,p;var u;if(!await(u="https://checkout.razorpay.com/v1/checkout.js",new Promise((e=>{const s=document.createElement("script");s.src=u,s.onload=()=>{e(!0)},s.onerror=()=>{e(!1)},document.body.appendChild(s)}))))return void x.error("Razorpay SDK failed to load. Are you online?");const h=await((e,s,t)=>{const a=(0,n.Ri)("accessToken");return l.A.post("/create-order",{amount:e,currency:s,orderId:t},{headers:{authorization:"Bearer ".concat(a)}})})(e.amount,e.currency,e.orderId);if(!h)return void x.error("Server error. Are you online?");var y;null!==h&&void 0!==h&&h.status&&(console.log(h.data),s(null===(y=h.data)||void 0===y?void 0:y.order));const g={key:"rzp_test_8hUd93DSs1npxH",amount:null===(a=h.data)||void 0===a||null===(r=a.order)||void 0===r?void 0:r.amount.toString(),currency:null===(i=h.data)||void 0===i||null===(c=i.order)||void 0===c?void 0:c.currency,name:"Finafid Technologies Pvt.Ltd",description:"Test Transaction",order_id:null===(o=h.data)||void 0===o||null===(p=o.order)||void 0===p?void 0:p.id,image:"data:image/png;base64,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",handler:async e=>{const s=await(e=>{const s=(0,n.Ri)("accessToken");return l.A.post("/verify-payment",e,{headers:{authorization:"Bearer ".concat(s)}})})(e);null!==s&&void 0!==s&&s.status&&(console.log(s.data),d("success"),t(s.data))},prefill:{name:m.fullName,email:m.email,contact:m.phone},notes:{address:e.billingAddress},theme:{color:"#c1272d"}};new window.Razorpay(g).open()},u=async e=>{const s=await(t=e.amount.toFixed(2),a=e.orderId,l.A.post("paymentDetail",{amount:t,orderId:a,paymentMode:"CARD"}));var t,a;if(!s||!s.data.paymentData.hash)return void x.error("Failed to initiate PayU payment. Please try again.");const n={key:s.data.paymentData.key,txnid:e.orderId.toString(),amount:e.amount.toFixed(2),firstname:s.data.paymentData.firstname,email:s.data.paymentData.email,phone:s.data.paymentData.phone,productinfo:s.data.paymentData.productinfo,surl:s.data.paymentData.surl,furl:s.data.paymentData.furl,hash:s.data.paymentData.hash,service_provider:s.data.paymentData.service_provider},r=document.createElement("form");r.method="POST",r.action=s.data.actionURL,Object.keys(n).forEach((e=>{const s=document.createElement("input");s.type="hidden",s.name=e,s.value=n[e],r.appendChild(s)})),document.body.appendChild(r),r.submit()};return{payment:e,processPayment:async(e,s)=>{o(!0),d(null);try{switch(e.paymentMethod){case"Razorpay":await p(e,s);break;case"PayU":await u(e,s);break;case"Wallet":case"COD":d("success"),s();break;default:throw new Error("Unsupported payment method")}}catch(t){console.error("Error during payment processing:",t),d("failed")}finally{o(!1)}},paymentStatus:t,paymentLoading:c}}},2808:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(579);const n=e=>{let{value:s="",onChange:t,name:n,label:l,checked:r=!1,disabled:i=!1,align:d="right",required:c=!1,className:o,labelClassName:m="capitalize text-sm font-medium",containerClassName:x}=e;const p=null===l||void 0===l?void 0:l.replace(" ","-").toLowerCase();return(0,a.jsxs)("div",{className:"relative flex gap-2 items-start ".concat(x),children:[l&&"left"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:l}),(0,a.jsxs)("div",{className:"grid place-items-center mt-[2px] ".concat(o),children:[(0,a.jsx)("input",{id:p,type:"radio",name:n,value:s,checked:r,disabled:i,onChange:t,required:c,className:"peer col-start-1 row-start-1 appearance-none shrink-0 size-4 border border-primeRed rounded-full disabled:border-primary disabled:cursor-not-allowed hover:cursor-pointer"}),(0,a.jsx)("span",{className:"pointer-events-none col-start-1 row-start-1 size-2 rounded-full peer-checked:bg-primeRed peer-checked:peer-disabled:bg-mainGray"})]}),l&&"right"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:l})]})}},2896:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(579);const n=e=>{let{onChange:s,name:t,label:n,value:l="",checked:r=!1,disabled:i=!1,align:d="right",required:c=!1,className:o,labelClassName:m="capitalize text-sm font-medium",containerClassName:x}=e;const p="string"===typeof n?n.replace(" ","-").toLowerCase():"";return(0,a.jsxs)("div",{className:"relative flex gap-2 items-start",children:[n&&"left"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:n}),(0,a.jsxs)("div",{className:"grid place-items-center mt-[2px]",children:[(0,a.jsx)("input",{id:p,type:"checkbox",name:t,value:l,checked:r,disabled:i,onChange:s,required:c,className:"peer col-start-1 row-start-1 appearance-none shrink-0 size-4 border border-primeRed rounded-sm disabled:border-primary hover:cursor-pointer checked:bg-primeRed disabled:checked:bg-darkGray"}),(0,a.jsx)("span",{className:"pointer-events-none col-start-1 row-start-1 text-xs text-white opacity-0 peer-checked:opacity-100",children:"\u2714"})]}),n&&"right"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:n})]})}},3637:(e,s,t)=>{t.d(s,{A:()=>f});var a=t(2555),n=t(3907),l=t(1940),r=t(2808),i=t(8514),d=t(3163),c=t(5962),o=t(2925),m=t(7058),x=t(9335),p=t(5043),u=t(9722);var h=t(6720),y=t(9679),g=t(579);const f=e=>{let{initialAddress:s={},edit:t=!1}=e;const f=(0,o.d)(),{closeModal:j}=(0,d.h)(),{addAddress:v,updateAddress:b,loading:N}=(0,m.U)(),[A,C]=(0,p.useState)(!1),{formData:w,setFormData:I,handleChange:R,handleSubmit:E,clearForm:k}=(0,c.A)(s,(async e=>{const{_id:s,addressType:a,receiverName:n,receiverPhone:l,pinCode:r,locality:i,city:d,state:c}=e;a?(0,x.wJ)(n).success?(0,x.ri)(l).success?(0,x.XP)(r).success?i?d?c?t?(b(s,e),N||(k(),j())):(v(e),N||(k(),j())):f.error("Please enter state"):f.error("Please enter city"):f.error("Please enter locality"):f.error((0,x.XP)(r).message):f.error((0,x.ri)(l).message):f.error((0,x.wJ)(n).message):f.error("Please select type of address")}));return(0,g.jsxs)("div",{className:"relative overflow-hidden w-110 max-sm:w-svw max-sm:h-svh max-sm:overflow-y-auto bg-white sm:rounded-xl p-4 space-y-4",children:[(0,g.jsx)("h2",{className:"capitalize text-xl font-bold text-center",children:t?"edit address":"add address"}),(0,g.jsxs)("form",{onSubmit:E,className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsxs)("div",{className:"RADIO-INPUTS flex justify-center items-center gap-6",children:[(0,g.jsx)(r.A,{label:"home",name:"addressType",value:"home",checked:"home"===w.addressType,onChange:R,containerClassName:"gap-1"}),(0,g.jsx)(r.A,{label:"office",name:"addressType",value:"office",checked:"office"===w.addressType,onChange:R,containerClassName:"gap-1"}),(0,g.jsx)(r.A,{label:"others",name:"addressType",value:"others",checked:"others"===w.addressType,onChange:R,containerClassName:"gap-1"})]}),(0,g.jsx)("button",{type:"button",onClick:async()=>{try{C(!0);const{latitude:e,longitude:s}=await new Promise(((e,s)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((s=>{const{latitude:t,longitude:a}=s.coords;e({latitude:t,longitude:a})}),(e=>{s(e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):s(new Error("Geolocation is not supported by this browser."))})),t=await(async(e,s)=>{try{const t=await u.A.get("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(s,"&key=").concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API:"https://finafid.co.in/api/v1",REACT_APP_RAZORPAY_KEY:"rzp_test_8hUd93DSs1npxH",REACT_APP_ORDER_API_KEY:"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}.REACT_APP_GOOGLE_MAPS_API_KEY)),a=await t.data;if(a.results&&a.results.length>0)return a.results[0].address_components;throw new Error("No address found for the given coordinates.")}catch(t){throw console.log(t),new Error("Failed to convert coordinates to address. Please try again later.")}})(e,s);console.log(t);const n=e=>{var s;return(null===(s=t.find((s=>s.types.includes(e))))||void 0===s?void 0:s.long_name)||""};I((0,a.A)((0,a.A)({},w),{},{houseNumber:n("street_number"),street:n("route"),locality:n("sublocality")||n("locality"),city:n("locality")||n("administrative_area_level_2"),state:n("administrative_area_level_1"),pinCode:n("postal_code"),landmark:n("point_of_interest")}))}catch(e){f.error("Failed to fetch address. Please try again.")}finally{C(!1)}},className:"border-2 border-secondary rounded-md p-1 bg-white hover:bg-lightGray transition-colors duration-150 ease-in-out",children:(0,g.jsx)(h.Htn,{className:"text-primeRed text-lg"})})]}),(0,g.jsxs)("div",{className:"grid sm:grid-cols-2 gap-2",children:[(0,g.jsx)(l.A,{label:"enter name",type:"text",name:"receiverName",value:w.receiverName,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"mobile no",type:"tel",name:"receiverPhone",value:w.receiverPhone,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"pin code",type:"text",name:"pinCode",value:w.pinCode,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"house no",type:"text",name:"houseNumber",value:w.houseNumber,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"})]}),(0,g.jsx)(i.A,{label:"street",type:"text",name:"street",value:w.street,onChange:R,rows:3,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(i.A,{label:"locality",type:"text",name:"locality",value:w.locality,onChange:R,rows:3,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsxs)("div",{className:"grid sm:grid-cols-2 gap-2",children:[(0,g.jsx)(l.A,{label:"city",type:"text",name:"city",value:w.city,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"state",type:"text",name:"state",value:w.state,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"landmark",type:"text",name:"landmark",value:w.landmark,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"alternate number",type:"tel",placeholder:"alternate mobile (optional)",name:"alternatePhone",value:w.alternatePhone,onChange:R,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"})]}),(0,g.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-2",children:[(0,g.jsx)(n.A,{type:"button",reverse:!0,onClick:j,className:"h-8 px-4 rounded-md",children:"cancel"}),(0,g.jsx)(n.A,{className:"h-8 px-4 rounded-md",children:"save"})]})]}),A&&(0,g.jsx)(y.A,{})]})}},4922:(e,s,t)=>{t.r(s),t.d(s,{default:()=>K});var a=t(7870),n=t(5043),l=t(184),r=t(579);const i=e=>{let{steps:s,currentStep:t,onClick:a}=e;return(0,r.jsx)("div",{className:"w-full flex justify-around items-center gap-8 max-lg:gap-4 max-sm:gap-1",children:null===s||void 0===s?void 0:s.map(((e,i)=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)("div",{className:"STEP-ITEM max-md:w-16 flex max-md:flex-col items-center gap-4 max-lg:gap-3 max-md:gap-0 flex-shrink-0",children:[(0,r.jsx)("button",{type:"button",onClick:()=>a(i+1),className:"STEP-ICON size-8 max-lg:size-7 max-md:size-5 text-lg max-lg:text-base max-md:text-xs flex justify-center items-center rounded-full text-white transition-colors ease-out ".concat(t>=i+1?"bg-primeRed delay-500":"bg-darkGray"),children:t<=i+1?e.icon:(0,r.jsx)(l.CMH,{})}),(0,r.jsx)("p",{className:"STEP-TEXT capitalize transition-colors ease-out max-md:text-xs ".concat(t>=i+1?"text-black delay-500":"text-secondary"),children:e.name})]}),i!==s.length-1&&(0,r.jsx)("div",{className:"relative h-[3px] w-full min-w-10 bg-darkGray overflow-hidden rounded-full",children:(0,r.jsx)("span",{className:"absolute h-[3px] w-full bg-primeRed transition-transform duration-500 ease-out origin-left ".concat(t<i+2?"scale-x-0":"scale-x-100")})})]},i)))})};var d=t(1970);const c=e=>{let{steps:s}=e;const{state:t,toStep:n}=(0,d.Q)();return(0,r.jsx)("header",{children:(0,r.jsxs)("nav",{className:"container max-w-full px-32 py-4 max-md:py-2 max-2xl:px-16 max-xl:px-8 max-sm:px-2 h-max flex max-md:flex-col justify-between items-center gap-16 max-md:gap-4 border-b border-primary",children:[(0,r.jsx)("a",{href:"/",className:"LOGO-SECTION h-12 max-xl:h-10 max-lg:h-8 max-md:h-6 max-sm:h-4 flex-shrink-0",children:(0,r.jsx)(a.A,{})}),(0,r.jsx)(i,{steps:s,currentStep:t.step,onClick:n})]})})};var o=t(2555),m=t(674);const x=e=>{let{product:s,quantity:t}=e;const{state:a,setBillingItems:n}=(0,d.Q)();return(0,r.jsxs)("div",{className:"p-3 flex gap-3",children:[(0,r.jsxs)("div",{className:"LEFT-SECTION space-y-2",children:[(0,r.jsx)("div",{className:"PRODUCT-IMAGE bg-white size-20 rounded flex-shrink-0",children:(0,r.jsx)("img",{src:null===s||void 0===s?void 0:s.images[0],alt:null===s||void 0===s?void 0:s.name,loading:"lazy",className:"size-full object-contain object-center rounded"})}),(0,r.jsx)(m.A,{value:t,readOnly:!0,onIncrease:()=>(e=>{const s=a.billingItems.map((s=>s.productId._id===e?(0,o.A)((0,o.A)({},s),{},{itemQuantity:s.itemQuantity+1}):s));n(s)})(s._id),onDecrease:()=>(e=>{const s=a.billingItems.map((s=>s.productId._id===e?(0,o.A)((0,o.A)({},s),{},{itemQuantity:s.itemQuantity-1}):s)).filter((e=>e.itemQuantity>0));n(s)})(s._id)})]}),(0,r.jsxs)("div",{className:"RIGHT-SECTION",children:[(0,r.jsx)("h3",{className:"text-sm font-medium leading-none line-clamp-2",children:null===s||void 0===s?void 0:s.name}),(0,r.jsx)("ul",{className:"ATTRIBUTES py-1",children:Object.keys(s.attributes).map((e=>(0,r.jsx)("li",{className:"text-sm max-lg:text-xs text-secondary capitalize",children:"".concat(e," : ").concat(s.attributes[e])},e)))}),(0,r.jsxs)("div",{className:"PRICING flex items-center gap-2",children:[(0,r.jsxs)("p",{className:"text-sm max-md:text-xs text-center font-medium text-primary line-through leading-none",children:["\u20b9 ",Math.round(null===s||void 0===s?void 0:s.unitPrice)*t]}),(0,r.jsxs)("p",{className:"font-bold text-lg md:text-center leading-none",children:["\u20b9 ",Math.round(null===s||void 0===s?void 0:s.sellingPrice)*t]}),(0,r.jsx)("span",{className:"max-md:text-sm font-medium text-green-500 leading-none",children:"percent"===(null===s||void 0===s?void 0:s.discountType)?"".concat(s.discount,"%"):"\u20b9".concat(s.discount," OFF")})]}),(0,r.jsxs)("div",{className:"UTSAV-PRICING flex items-center lg:gap-2 gap-1 whitespace-nowrap text-success",children:[(0,r.jsx)("p",{className:"font-medium max-lg:text-sm",children:"Utsav Price"}),(0,r.jsxs)("p",{className:"text-md font-bold leading-none",children:["\u20b9 ",Math.round(s.utsavPrice)*t]})]})]})]})},p=()=>{const{state:e}=(0,d.Q)();return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center border-b-2 border-primary uppercase pb-2",children:[(0,r.jsx)("p",{className:"font-semibold font-secondary text-lg max-sm:text-base",children:"Shopping Bag"}),(0,r.jsxs)("span",{className:"text-dark text-sm font-medium",children:["(",e.billingItems.length," Items)"]})]}),(0,r.jsx)("ul",{className:"divide-y divide-secondary",children:e.billingItems.map((e=>e.productId?(0,r.jsx)(x,{product:e.productId,quantity:e.itemQuantity},e.productId._id):(0,r.jsx)("div",{className:"text-error text-center text-sm p-1",children:"Product not found"},e._id)))})]})};var u=t(3637),h=t(3907),y=t(3163),g=t(3156),f=t(6720),j=t(5200),v=t(7058);const b=e=>{let{address:s}=e;const{openModal:t}=(0,y.h)(),{setDefault:a,removeAddress:n}=(0,v.U)(),{state:{billingAddress:l},setBillingAddress:i}=(0,d.Q)();return(0,r.jsx)("div",{className:"w-64 h-44 border border-dashed border-darkGray rounded-md flex flex-shrink-0 justify-center items-center cursor-pointer bg-white overflow-hidden",children:s?(0,r.jsxs)("div",{onClick:()=>i(s),className:"HAVE-ADDRESS relative size-full p-4 pt-6 flex flex-col items-start",children:[(null===s||void 0===s?void 0:s.isDefault)&&(0,r.jsx)("span",{className:"absolute top-[10px] right-10 text-[8px] text-white font-medium font-secondary px-1 rounded-sm pt-[1px] bg-success",children:"DEFAULT"}),(0,r.jsx)("span",{className:"absolute top-2 right-2 size-4 rounded-full border border-black flex justify-center items-center",children:(0,r.jsx)("span",{className:"size-2 rounded-full ".concat(l._id===s._id&&"bg-primeRed")})}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 font-medium leading-tight",children:[(0,r.jsx)("h3",{children:null===s||void 0===s?void 0:s.receiverName}),(0,r.jsxs)("p",{className:"uppercase text-xxs pt-[2px]",children:["(",null===s||void 0===s?void 0:s.addressType,")"]})]}),(0,r.jsxs)("div",{className:"flex justify-start items-center text-xs text-secondary",children:[(0,r.jsx)(f.qPF,{size:14,className:"mr-2"}),(0,r.jsx)("p",{children:(null===s||void 0===s?void 0:s.receiverPhone)||"N/A"}),(null===s||void 0===s?void 0:s.alternatePhone)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"mx-1",children:"/"}),s.alternatePhone]})]}),(0,r.jsxs)("div",{className:"uppercase text-xs font-medium text-secondary flex flex-wrap gap-x-1 mt-2",children:[(null===s||void 0===s?void 0:s.houseNumber)&&(0,r.jsxs)("p",{children:[s.houseNumber,","]}),(null===s||void 0===s?void 0:s.street)&&(0,r.jsxs)("p",{children:[s.street,","]}),(null===s||void 0===s?void 0:s.locality)&&(0,r.jsxs)("p",{children:[s.locality,","]}),(null===s||void 0===s?void 0:s.landmark)&&(0,r.jsxs)("p",{children:[s.landmark,","]}),(null===s||void 0===s?void 0:s.city)&&(0,r.jsxs)("p",{children:[s.city,","]}),(null===s||void 0===s?void 0:s.state)&&(0,r.jsxs)("p",{children:[s.state,","]}),(null===s||void 0===s?void 0:s.pinCode)&&(0,r.jsx)("p",{children:s.pinCode})]}),(0,r.jsxs)("div",{className:"BTN-SECTION w-full flex justify-between items-center gap-2 mt-auto",children:[(0,r.jsx)(h.A,{reverse:!0,onClick:e=>{e.stopPropagation(),t((0,r.jsx)(u.A,{initialAddress:s,edit:!0}))},className:"px-3 py-1 text-xs rounded-md font-secondary font-medium",children:"Edit"}),!(null!==s&&void 0!==s&&s.isDefault)&&(0,r.jsx)(h.A,{onClick:e=>{e.stopPropagation(),a(s._id)},className:"text-xs px-6 py-1 rounded-md font-secondary",children:"set as default"}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),n(s._id)},children:(0,r.jsx)(j.IXo,{size:18,className:"text-primeRed"})})]})]}):(0,r.jsxs)("div",{onClick:()=>t((0,r.jsx)(u.A,{})),className:"NO-ADDRESS size-full text-primeRed flex flex-col justify-center items-center gap-2 hover:bg-offWhite",children:[(0,r.jsx)(g.ApK,{size:24}),(0,r.jsx)("p",{className:"capitalize text-lg font-secondary font-medium",children:"add new address"})]})})};var N=t(1562),A=t(3512);const C=e=>{let{address:s,preview:t=!1}=e;const{openModal:a}=(0,y.h)(),{setDefault:n,removeAddress:l}=(0,v.U)(),{state:{billingAddress:i},setBillingAddress:c}=(0,d.Q)();return(0,r.jsx)("div",{className:"w-full p-3",children:s?(0,r.jsxs)("div",{onClick:()=>c(s),className:"HAVE-ADDRESS w-full relative flex flex-col items-start",children:[(0,r.jsxs)("div",{className:"absolute top-0 right-0 flex items-center gap-2",children:[(null===s||void 0===s?void 0:s.isDefault)&&(0,r.jsx)("span",{className:"text-[8px] text-white font-medium font-secondary px-1 rounded-sm pt-[1px] bg-success",children:"DEFAULT"}),!t&&(0,r.jsx)("span",{className:"size-4 rounded-full border border-black flex justify-center items-center",children:(0,r.jsx)("span",{className:"size-2 rounded-full ".concat(i._id===s._id&&"bg-primeRed")})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 font-medium leading-none pr-12",children:[(0,r.jsx)("h3",{children:null===s||void 0===s?void 0:s.receiverName}),(0,r.jsx)("p",{className:"uppercase text-[8px] px-1 py-[3px] bg-mainGray rounded leading-none",children:null===s||void 0===s?void 0:s.addressType})]}),(0,r.jsxs)("div",{className:"flex justify-start items-center text-xs text-secondary",children:[(0,r.jsx)(f.qPF,{className:"mr-2"}),(0,r.jsx)("p",{children:(null===s||void 0===s?void 0:s.receiverPhone)||"N/A"}),(null===s||void 0===s?void 0:s.alternatePhone)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"mx-1",children:"/"}),s.alternatePhone]})]}),(0,r.jsxs)("div",{className:"text-sm font-medium text-secondary flex flex-wrap gap-x-1 mt-2",children:[(null===s||void 0===s?void 0:s.houseNumber)&&(0,r.jsxs)("p",{children:[s.houseNumber,","]}),(null===s||void 0===s?void 0:s.street)&&(0,r.jsxs)("p",{children:[s.street,","]}),(null===s||void 0===s?void 0:s.locality)&&(0,r.jsxs)("p",{children:[s.locality,","]}),(null===s||void 0===s?void 0:s.landmark)&&(0,r.jsxs)("p",{children:[s.landmark,","]}),(null===s||void 0===s?void 0:s.city)&&(0,r.jsxs)("p",{children:[s.city,","]}),(null===s||void 0===s?void 0:s.state)&&(0,r.jsxs)("p",{children:[s.state,","]}),(null===s||void 0===s?void 0:s.pinCode)&&(0,r.jsx)("p",{children:s.pinCode})]}),!t&&(0,r.jsxs)("div",{className:"BTN-SECTION w-full flex items-center justify-between gap-2 mt-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{reverse:!0,onClick:e=>{e.stopPropagation(),a((0,r.jsx)(u.A,{initialAddress:s,edit:!0}))},className:"px-3 py-1 text-xs rounded-md font-secondary font-medium",children:"Edit"}),!(null!==s&&void 0!==s&&s.isDefault)&&(0,r.jsx)(h.A,{onClick:e=>{e.stopPropagation(),n(s._id)},className:"text-xs px-6 py-1 rounded-md font-secondary",children:"set as default"})]}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),l(s._id)},children:(0,r.jsx)(j.IXo,{size:18,className:"text-primeRed"})})]})]}):(0,r.jsxs)("div",{onClick:()=>a((0,r.jsx)(u.A,{})),className:"NO-ADDRESS w-full py-4 flex items-center justify-center gap-2 shadow-md text-primeRed",children:[(0,r.jsx)(g.OiG,{}),(0,r.jsx)("p",{className:"capitalize font-medium",children:"add new address"})]})})},w=()=>{const{closeSidebar:e}=(0,N.c)(),{addresses:s}=(0,v.U)(),{state:{billingAddress:t}}=(0,d.Q)();return(0,r.jsxs)("div",{className:"bg-white h-svh relative",children:[(0,r.jsxs)("div",{className:"HEADING px-4 py-2 border-b border-primary flex items-center gap-2",children:[(0,r.jsx)(g._Jj,{onClick:e}),(0,r.jsx)("p",{className:"font-medium",children:"Select Address"})]}),(0,r.jsxs)("ul",{className:"divide-y divide-secondary",children:[(0,r.jsx)(C,{}),t&&s.map(((e,s)=>(0,r.jsx)(C,{address:e},s)))]})]})},I=()=>{const e=(0,A.A)("(min-width: 1024px)"),s=(0,A.A)("(min-width: 768px)"),{openSidebar:t}=(0,N.c)(),{state:{billingAddress:a},setBillingAddress:l}=(0,d.Q)(),{addresses:i,defaultAddress:c}=(0,v.U)();return(0,n.useEffect)((()=>{l(c)}),[i]),(0,r.jsxs)("div",{className:"space-y-4 max-md:space-y-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center border-b-2 border-primary uppercase pb-2",children:[(0,r.jsx)("p",{className:"font-semibold font-secondary text-lg max-sm:text-base",children:"Delivery To"}),!e&&(0,r.jsx)(h.A,{reverse:!0,onClick:()=>t((0,r.jsx)(w,{})),className:"px-2 py-1 rounded-md text-xs",children:"change"})]}),s?(0,r.jsxs)("ul",{className:"flex justify-start gap-6 flex-wrap",children:[(0,r.jsx)(b,{}),a&&i.map(((e,s)=>(0,r.jsx)(b,{address:e},s)))]}):(0,r.jsx)(C,{address:a,preview:!0})]})},R=e=>{let{label:s,method:t,icon:a,onClick:n}=e;const{state:l}=(0,d.Q)();return(0,r.jsxs)("button",{onClick:n,className:"relative bg-white hover:bg-success hover:bg-opacity-30 border-2 border-secondary p-4 w-full max-md:w-full flex justify-between items-center gap-4 rounded-lg transition-colors duration-300 ease-in-out",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"size-4 top-2 right-2 rounded-full bg-white border border-black flex justify-center items-center",children:(0,r.jsx)("span",{className:"size-2 rounded-full ".concat(l.paymentMethod===t&&"bg-primeRed")})}),(0,r.jsx)("p",{className:"font-secondary font-medium",children:s})]}),(0,r.jsx)("i",{className:"text-2xl",children:a})]})};var E=t(672);const k=()=>{const{setPaymentMethod:e}=(0,d.Q)();return(0,r.jsxs)("div",{className:"space-y-4 max-md:px-1",children:[(0,r.jsx)("div",{className:"flex justify-between items-center border-b-2 border-primary uppercase pb-2",children:(0,r.jsx)("p",{className:"font-semibold font-secondary text-lg max-sm:text-base",children:"Select Payment Method"})}),(0,r.jsx)("div",{className:"flex flex-wrap justify-start gap-x-16 gap-y-4",children:E.zJ.map((s=>(0,r.jsx)(R,{label:s.label,method:s.method,icon:s.icon,onClick:()=>e(s.method)},s.label)))})]})};var D=t(1701),S=t(9966);const P=()=>{const{state:e,dispatch:s,toStep:t}=(0,d.Q)(),{billingItems:a,billingAddress:n,paymentMethod:l,subtotal:r,discount:i,utsavDiscount:c,tax:o,shippingCost:m,total:x,walletBalance:p,couponDiscount:u}=e,{processPayment:h,paymentStatus:y,paymentLoading:g}=(0,D.A)();return{placeOrderAndPay:async()=>{try{s({type:"SET_ORDER_STATUS",payload:"processing"});const y=await(0,S.fS)(a,n,{tax:o,total:x,subtotal:r,discount:i,utsavDiscount:c,shippingCost:m,walletBalanceUsed:p,couponDiscount:u},l);if(null===y||void 0===y||!y.status)throw new Error("Error placing order");{var e,d;const a=null===(e=y.data)||void 0===e||null===(d=e.newOrder)||void 0===d?void 0:d._id;s({type:"SET_ORDER_ID",payload:a});const r=async()=>{try{console.log(y.data),await(0,S.Kv)(a,"Confirmed"),s({type:"SET_ORDER_STATUS",payload:"success"}),t(4)}catch(e){console.error("Error during Order confirmation:",e),t(4)}};await h({amount:x,currency:"INR",orderId:a,paymentMethod:l,billingAddress:n},r)}}catch(y){console.error("Error during order processing:",y),s({type:"SET_ORDER_STATUS",payload:"error"}),t(4)}},paymentStatus:y,paymentLoading:g}};var T=t(2925);const z=()=>{var e,s;const t=(0,A.A)("(min-width: 768px)"),a=(0,T.d)(),{placeOrderAndPay:l,paymentLoading:i}=P(),{state:c,nextStep:o,toStep:m,setPaymentMethod:x}=(0,d.Q)();(0,n.useEffect)((()=>{c.total<=0?x("Wallet"):x(null)}),[c.total]);const p=async()=>{c.paymentMethod?await l():a.warning(" select a payment method to proceed.")};return(0,r.jsxs)("div",{className:"ORDER-SUMMARY w-full md:border md:border-primary md:rounded-md p-4 max-md:p-1",children:[(0,r.jsx)("h3",{className:"font-semibold font-secondary text-lg border-b-2 border-primary uppercase pb-2",children:"Order Details"}),(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 border-b border-primary",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:(0,r.jsx)(f.Og4,{})}),(0,r.jsxs)("span",{className:"text-sm font-medium",children:[null===(e=c.billingItems)||void 0===e?void 0:e.length," Item(s) in Cart"]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>m(1),className:"text-sm text-blue-500",children:"Details"})]}),(0,r.jsx)("div",{className:"PRICING-DETAILS border-b border-primary py-4",children:(0,r.jsx)("table",{className:"w-full font-secondary",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:"text-sm text-secondary",children:["Subtotal (",null===(s=c.billingItems)||void 0===s?void 0:s.length,")"]}),(0,r.jsxs)("td",{className:"text-right",children:["\u20b9 ",c.subtotal]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-sm text-secondary",children:"Discount"}),(0,r.jsxs)("td",{className:"text-right text-success",children:["\u20b9 -",c.discount]})]}),c.utsavDiscount>0&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-sm text-secondary",children:"Utsav Discount"}),(0,r.jsxs)("td",{className:"text-right text-success",children:["\u20b9 -",c.utsavDiscount]})]}),c.couponDiscount>0&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-sm text-secondary",children:"Coupon Discount"}),(0,r.jsxs)("td",{className:"text-right text-success",children:["- \u20b9 ",c.couponDiscount]})]}),c.walletBalance>0&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-sm text-secondary",children:"Wallet Balance Used"}),(0,r.jsxs)("td",{className:"text-right text-success",children:["- \u20b9 ",c.walletBalance]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-sm text-secondary",children:"GST (incl)"}),(0,r.jsxs)("td",{className:"text-right text-primary",children:["\u20b9 ",c.tax.toFixed(2)]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"text-sm text-secondary",children:"Shipping"}),(0,r.jsx)("td",{className:"text-right",children:c.shippingCost>0?"\u20b9 ".concat(c.shippingCost):(0,r.jsx)("p",{className:"text-xs font-medium text-green-500",children:"Free Delivery"})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"font-semibold",children:"Total"}),(0,r.jsxs)("td",{className:"text-right text-lg font-medium",children:["\u20b9 ",c.total]})]})]})})}),(0,r.jsxs)("div",{className:"".concat(!t&&"bg-white fixed bottom-0 left-0 right-0 p-6 pt-0 shadow-upper"),children:[(0,r.jsx)("div",{className:"py-4 max-md:py-2",children:(0,r.jsxs)("div",{className:"flex md:justify-center justify-between items-center",children:[!t&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold font-secondary",children:"Total:"}),(0,r.jsxs)("span",{className:"text-success font-medium",children:["\u20b9 ",c.total]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-semibold font-secondary",children:"Total Savings:"}),(0,r.jsxs)("span",{className:"text-success font-medium",children:["\u20b9"," ",c.walletBalance<=0?c.discount+c.utsavDiscount+c.couponDiscount:c.walletBalance<c.subtotal-c.discount-c.utsavDiscount-c.couponDiscount?c.discount+c.utsavDiscount+c.couponDiscount+c.walletBalance:c.walletBalance]})]})]})}),c.step<3&&(0,r.jsx)(h.A,{type:"button",onClick:()=>{0===c.total&&2===c.step?p():o()},className:"w-full py-2 font-secondary font-medium",children:2===c.step?"place order":"continue"}),3===c.step&&(0,r.jsx)(h.A,{type:"button",onClick:p,className:"w-full py-2 font-secondary font-medium",disabled:i,children:"COD"===c.paymentMethod?"Confirm":"Pay \u20b9".concat(c.total)})]})]})};var Q=t(1462),O=t(5860),G=t(3216);const L=()=>{const{state:e,dispatch:s}=(0,d.Q)(),{removeSelectedItemsFromCart:t}=(0,O._)(),[a,l]=(0,n.useState)(3),i=(0,G.Zp)();return(0,n.useEffect)((()=>{let a;"success"!==e.orderStatus&&"processing"!==e.orderStatus&&"error"!==e.orderStatus||(a=setInterval((()=>{l((e=>e-1))}),1e3));const n=setTimeout((()=>{"success"===e.orderStatus||"processing"===e.orderStatus?(i("/order/".concat(e.orderId),{replace:!0}),t(e.billingItems),s({type:"RESET_ORDER"})):"error"===e.orderStatus&&(i("/",{replace:!0}),s({type:"RESET_ORDER"}))}),3e3);return()=>{clearTimeout(n),clearInterval(a)}}),[e.orderStatus,e.orderId]),(0,r.jsxs)("div",{className:"w-[500px] min-h-[400px] p-16 max-md:p-8 space-y-8 rounded-lg shadow-drop bg-lightGray",children:["success"===e.orderStatus?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:(0,r.jsx)(Q.v7R,{size:64,className:"mx-auto text-success"})}),(0,r.jsx)("h3",{className:"font-secondary font-semibold text-xl text-center",children:"Your Order is Confirmed - Thank You!"}),(0,r.jsx)("p",{className:"text-sm text-secondary font-secondary text-center",children:"Your order has been placed successfully, and we're thrilled to get your items on their way to you. We've sent a separate confirmation email with your order details (#[Order Number])."})]}):"processing"===e.orderStatus?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:(0,r.jsx)(Q.xsL,{size:64,className:"mx-auto text-warning"})}),(0,r.jsx)("h3",{className:"font-secondary font-semibold text-xl text-center",children:"Your Order is Being Processed!"}),(0,r.jsx)("p",{className:"text-sm text-secondary font-secondary text-center",children:"Thank you for your order (#[Order Number])! We've received it and are currently processing it to get it ready for shipment."})]}):"error"===e.orderStatus&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:(0,r.jsx)(Q.Fac,{size:64,className:"mx-auto text-error"})}),(0,r.jsx)("h3",{className:"font-secondary font-semibold text-xl text-center",children:"Failed to place Order!"}),(0,r.jsx)("p",{className:"text-sm text-secondary font-secondary text-center",children:"Thank you for your recent attempt to order from (#[Order Number]). We appreciate your interest in our products. Unfortunately, we were unable to process your order due to a payment issue."})]}),(0,r.jsxs)("p",{className:"text-xs text-primary text-center",children:["Redirecting in ",a,"..."]})]})};var U=t(2896),F=t(9060),B=t(5962);const M=()=>{const{balance:e}=(0,F.v)(),{state:{walletBalance:s,total:t},applyWalletBalance:a}=(0,d.Q)(),{formData:n,handleChange:l}=(0,B.A)({walletUsed:s>0});return(0,r.jsxs)("div",{className:"md:border max-md:border-y border-primary p-3 md:rounded-md flex gap-x-4",children:[(0,r.jsx)(U.A,{name:"walletUsed",checked:n.walletUsed,onChange:s=>{const t=s.target.checked;a(t?e:0),l(s)}}),(0,r.jsxs)("div",{className:"leading-none space-y-1",children:[(0,r.jsx)("p",{className:"text-primeRed font-medium",children:"Pay using wallet"}),(0,r.jsxs)("p",{className:"text-sm text-primary",children:["Balance: ",e-s," / Total: ",t]})]})]})};var Y=t(1940),Z=t(5394),J=t(495),H=t(94);const _=e=>{let{coupon:s}=e;const{state:t,applyCoupon:a,removeCoupon:n}=(0,d.Q)(),l=t.coupon===s.code;return(0,r.jsxs)(H.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white border border-secondary rounded-md flex overflow-hidden",children:[(0,r.jsx)("div",{className:"OFFER-LABEL w-10 py-4 flex-shrink-0 bg-blue-500 text-center flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-sm text-white font-semibold -rotate-90 whitespace-nowrap",children:"Percent"===s.Discount_Type?"".concat(s.Discount_Value,"% OFF"):"\u20b9 ".concat(s.Discount_Value," OFF")})}),(0,r.jsxs)("div",{className:"CARD-BODY w-full p-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-lg font-semibold",children:s.code}),l?(0,r.jsx)("button",{onClick:n,className:"text-red-500 font-semibold text-sm focus:outline-none",children:"REMOVE"}):(0,r.jsx)("button",{onClick:()=>a(s.code),className:"text-blue-500 font-semibold text-sm focus:outline-none",children:"APPLY"})]}),(0,r.jsxs)("p",{className:"text-sm text-secondary mt-1 leading-none",children:["Shop minimum of \u20b9 ",s.Minimum_Purchase," to avail this offer"]}),(0,r.jsx)("hr",{className:"my-2 border-primary"}),(0,r.jsx)("p",{className:"text-sm text-secondary",children:s.title})]})]})},W=()=>{const{closeSidebar:e}=(0,N.c)(),{data:s,isLoading:t,isFetching:a,error:n}=(0,J.hD)();return(0,r.jsxs)("div",{className:"bg-white h-svh relative",children:[(0,r.jsxs)("div",{className:"HEADING px-4 py-2 border-b border-primary flex items-center gap-2",children:[(0,r.jsx)(l._Jj,{onClick:e}),(0,r.jsx)("p",{className:"font-medium",children:"All Coupons"})]}),t||a?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("h2",{className:"text-center font-secondary font-medium mt-8",children:"Loading..."})}):n?(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("h2",{className:"text-center font-secondary font-medium mt-8",children:n.message})}):(0,r.jsx)("ul",{className:"divide-y divide-secondary space-y-4 p-3",children:s.map((e=>(0,r.jsx)(_,{coupon:e},e._id)))})]})},X=()=>{const{openSidebar:e}=(0,N.c)(),{state:s,applyCoupon:t,removeCoupon:a}=(0,d.Q)(),n=(0,T.d)(),{formData:i,handleChange:c,handleSubmit:o}=(0,B.A)({},(e=>{const{couponCode:s}=e;s?t(s):n.error("Please enter a coupon code")}));return(0,r.jsxs)("div",{className:"p-3 md:border md:border-primary rounded-md divide-y-2 divide-secondary space-y-4",children:[(0,r.jsxs)("form",{onSubmit:o,className:"h-8 flex gap-4",children:[(0,r.jsx)(Y.A,{placeholder:"ENTER COUPON CODE",name:"couponCode",value:i.couponCode,onChange:c,className:"bg-white border border-primary rounded-md h-full w-full px-4 text-sm font-medium"}),(0,r.jsx)("button",{className:"bg-warning text-sm font-semibold px-4 rounded-md",children:"APPLY"})]}),s.coupon?(0,r.jsxs)("div",{className:"flex items-center gap-4 p-3 w-full",children:[(0,r.jsx)(g.eFy,{size:24,className:"text-success"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-sm",children:[s.coupon," Applied"]}),(0,r.jsxs)("p",{className:"text-success text-xs",children:["\u20b9 ",s.couponDiscount," OFF"]})]}),(0,r.jsx)("button",{onClick:a,className:"ml-auto text-primeRed text-sm font-medium",children:"Remove"})]}):(0,r.jsxs)("button",{onClick:()=>e((0,r.jsx)(W,{})),className:"flex items-center gap-4 p-3 w-full h-10",children:[(0,r.jsx)(l.BuZ,{size:18,className:"text-success"}),(0,r.jsx)("p",{className:"text-success font-medium",children:"View all coupons"}),(0,r.jsx)(Z.ZK4,{size:18,className:"text-success ml-auto"})]})]})},K=()=>{const{state:e,dispatch:s}=(0,d.Q)(),t=(0,G.Zp)();return(0,n.useEffect)((()=>{0===e.billingItems.length&&(s({type:"SET_ORDER_STATUS",payload:"idle"}),t(-1,{replace:!0}))}),[e.billingItems,s,t]),(0,r.jsxs)("main",{children:[(0,r.jsx)(c,{steps:E.O0}),e.step<3?(0,r.jsxs)("section",{className:"container max-w-full min-h-screen px-32 max-2xl:px-16 max-xl:px-8 max-sm:px-2 py-8 max-md:py-2 flex max-md:flex-col justify-center items-start gap-28 max-xl:gap-20 max-lg:gap-10",children:[(0,r.jsx)("section",{className:"w-full space-y-10",children:(()=>{switch(e.step){case 1:default:return(0,r.jsx)(p,{});case 2:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I,{}),(0,r.jsx)(p,{})]})}})()}),(0,r.jsxs)("section",{className:"w-80 max-md:w-full space-y-8 max-md:space-y-0 max-md:mb-28 flex-shrink-0",children:[(0,r.jsx)(M,{}),(0,r.jsx)(X,{}),(0,r.jsx)(z,{})]})]}):3===e.step?(0,r.jsxs)("section",{className:"container max-w-[400px] py-8 max-md:p-2 flex flex-col justify-center items-center gap-8",children:[(0,r.jsx)(k,{}),(0,r.jsx)(z,{})]}):4===e.step&&(0,r.jsx)("section",{className:"container max-w-full min-h-[80vh] py-8 max-md:p-2 flex justify-center items-center",children:(0,r.jsx)(L,{})})]})}},9966:(e,s,t)=>{t.d(s,{It:()=>m,Kv:()=>d,N4:()=>o,Vd:()=>l,dz:()=>c,fS:()=>i,p:()=>r});var a=t(2555),n=t(5026);const l=async()=>(await n.A.get("/getOrderDetails")).data,r=async e=>(await n.A.get("/getOrderById/".concat(e))).data,i=(e,s,t,l)=>n.A.post("/placeOrder",(0,a.A)((0,a.A)({orderItem:e,address:s},t),{},{payment_method:l}),{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),d=(e,s)=>n.A.post("/updateStatus/".concat(e),{status:s},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),c=async e=>{var s,t;return null===(s=(await n.A.get("/orderStatusDetails/".concat(e))).data)||void 0===s||null===(t=s.statusDetails)||void 0===t?void 0:t.orderStatusDetails},o=async e=>(await n.A.get("/cancelDelivery/".concat(e))).data,m=async e=>(await n.A.get("/downloadInvoice/".concat(e))).data}}]);
//# sourceMappingURL=922.b310674b.chunk.js.map