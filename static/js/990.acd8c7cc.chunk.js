"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[990],{9966:(e,t,s)=>{s.d(t,{It:()=>o,Kv:()=>d,N4:()=>c,Vd:()=>a,dz:()=>l,fS:()=>n,p:()=>i});var r=s(5026);const a=async()=>(await r.A.get("/getOrderDetails")).data,i=async e=>(await r.A.get(`/getOrderById/${e}`)).data,n=(e,t,s,a)=>r.A.post("/placeOrder",{orderItem:e,address:t,...s,payment_method:a},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),d=(e,t)=>r.A.post(`/updateStatus/${e}`,{status:t},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),l=async e=>{var t,s;return null===(t=(await r.A.get(`/orderStatusDetails/${e}`)).data)||void 0===t||null===(s=t.statusDetails)||void 0===s?void 0:s.orderStatusDetails},c=async e=>(await r.A.get(`/cancelDelivery/${e}`)).data,o=async e=>(await r.A.get(`/downloadInvoice/${e}`)).data},3907:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(579);const a=e=>{let{children:t,type:s="submit",className:a="px-4 py-2 rounded-md",onClick:i,disabled:n=!1,reverse:d=!1}=e;return d?(0,r.jsx)("button",{type:s,onClick:i,disabled:n,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${a}`,children:t}):(0,r.jsx)("button",{type:s,onClick:i,disabled:n,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${a}`,children:t})}},990:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var r=s(5200),a=s(5475),i=s(579);const n=e=>{let{order:t}=e;return(0,i.jsxs)("div",{className:"DETAILS ",children:[(0,i.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Item Ordered :"}),(0,i.jsxs)("div",{className:"w-full border border-black rounded-lg overflow-x-auto",children:[(0,i.jsxs)("table",{className:"w-full",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"bg-lightGray font-secondary",children:[(0,i.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"SL."}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"Product"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"SKU"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"QTY"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Price"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Discount"}),(0,i.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Total"})]})}),(0,i.jsx)("tbody",{children:t.orderItem.map(((e,t)=>{var s,r,n,d,l,c,o,u,m,x;return(0,i.jsxs)("tr",{className:"border-b-2 border-primary",children:[(0,i.jsx)("td",{className:"px-6",children:t+1}),(0,i.jsx)("td",{className:"px-4 py-3",children:e.productId?(0,i.jsxs)(a.N_,{to:`/product/${null===(s=e.productId)||void 0===s?void 0:s._id}`,className:"PRODUCT-MAIN flex gap-4",children:[(0,i.jsx)("div",{className:"size-16",children:(0,i.jsx)("img",{src:null===e||void 0===e||null===(r=e.productId)||void 0===r?void 0:r.images[0],alt:null===e||void 0===e||null===(n=e.productId)||void 0===n||null===(d=n.productGroup)||void 0===d?void 0:d.name,className:"size-full object-cover object-center"})}),(0,i.jsxs)("div",{className:"text-xs",children:[(0,i.jsx)("h3",{className:"font-medium",children:null===(l=e.productId)||void 0===l?void 0:l.name}),(0,i.jsx)("p",{children:"Size: XS"}),(0,i.jsx)("p",{children:"Color: White"})]})]}):(0,i.jsx)("div",{className:"size-16 bg-lightGray flex items-center justify-center text-primary rounded text-xs text-center",children:"Invalid Product"})}),(0,i.jsx)("td",{className:"px-4 py-3 text-center",children:(0,i.jsx)("p",{className:"text-sm",children:null===(c=e.productId)||void 0===c?void 0:c.sku})}),(0,i.jsx)("td",{className:"px-4 py-3 text-center",children:(0,i.jsx)("p",{className:"text-sm",children:e.itemQuantity})}),(0,i.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,i.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(o=e.productId)||void 0===o?void 0:o.unitPrice)*e.itemQuantity]})}),(0,i.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,i.jsxs)("p",{className:"text-sm",children:["\u20b9"," ",((null===(u=e.productId)||void 0===u?void 0:u.unitPrice)-(null===(m=e.productId)||void 0===m?void 0:m.sellingPrice))*e.itemQuantity]})}),(0,i.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,i.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(x=e.productId)||void 0===x?void 0:x.sellingPrice)*e.itemQuantity]})})]},t)}))})]}),(0,i.jsxs)("ul",{className:"TABLE-FOOTER space-y-1 ml-auto w-80 px-12 py-2 text-sm",children:[(0,i.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,i.jsx)("p",{className:"text-secondary",children:"Subtotal"}),(0,i.jsxs)("p",{children:["\u20b9 ",t.subtotal]})]}),(0,i.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,i.jsx)("p",{className:"text-secondary",children:"Discount"}),(0,i.jsxs)("p",{className:"text-success",children:["- \u20b9 ",t.discount]})]}),(0,i.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,i.jsx)("p",{className:"text-secondary",children:"Coupon Discount"}),(0,i.jsx)("p",{children:"\u20b9 0"})]}),(0,i.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,i.jsx)("p",{className:"text-secondary",children:"Utsav Discount"}),(0,i.jsx)("p",{children:"\u20b9 0"})]}),(0,i.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,i.jsx)("p",{className:"text-secondary",children:"GST (incl)"}),(0,i.jsxs)("p",{className:"text-primary",children:["\u20b9 ",t.tax.toFixed(2)]})]}),(0,i.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,i.jsx)("p",{className:"text-secondary",children:"Shipping"}),(0,i.jsx)("p",{children:"\u20b9 0"})]}),(0,i.jsxs)("li",{className:"flex justify-between gap-6 text-base font-medium",children:[(0,i.jsx)("p",{children:"Total"}),(0,i.jsxs)("p",{children:["\u20b9 ",t.totalPrice]})]})]})]})]})};var d=s(5043),l=s(9888),c=s(1291),o=s(3512);const u=["Confirmed","Shipping","Out For delivery","Delivered"],m=e=>{let{currentStatus:t,statusHistory:s}=e;const r=(0,o.A)("(min-width: 768px)"),a="Completed"===t?[...u,"Completed"]:"Canceled"===t?[...u,"Canceled"]:u,n=s.sort(((e,t)=>l.A7.indexOf(e.status)-l.A7.indexOf(t.status))),m=a.map((e=>n.find((t=>t.status===e))||{status:e,date:null,_id:`placeholder-${e}`})),x=m.findIndex((e=>e.status===t));return(0,i.jsxs)("div",{className:"relative border border-black rounded-lg",children:[(0,i.jsx)("div",{className:"PROGRESS-BAR px-16 pt-8 pb-16 max-md:p-8 flex max-md:flex-col justify-between md:items-center border-b border-black",children:m.map(((e,s)=>(0,i.jsxs)(d.Fragment,{children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("span",{className:"size-6 border-3 rounded-full flex justify-center items-center "+(s<=x&&e.date?"border-primeRed":"border-darkGray"),children:s<=x&&e.date&&(0,i.jsx)("span",{className:"block size-4 bg-primeRed rounded-full"})}),(0,i.jsxs)("div",{className:"absolute md:mt-1 md:left-1/2 md:-translate-x-1/2 max-md:top-1/2 max-md:left-10 max-md:-translate-y-1/2 w-max text-sm md:text-center font-medium",children:[(0,i.jsx)("p",{className:"first-letter:uppercase "+(s<=x&&e.date?"text-primeRed":"text-primary"),children:e.status}),(0,i.jsx)("p",{children:e.date?(0,c.Y)(new Date(e.date)):""})]}),e.status===t&&r?(0,i.jsx)("span",{className:"absolute size-5 left-1/2 -translate-x-1/2 top-[78px] rotate-45 bg-white border-t border-l border-black"}):null]}),s!==m.length-1&&(0,i.jsx)("div",{className:"relative md:h-[3px] md:w-full max-md:w-[3px] max-md:h-24 max-md:left-[10px] bg-darkGray overflow-hidden",children:s<x&&e.date&&(0,i.jsx)("span",{className:"absolute md:h-[3px] md:w-full max-md:w-[3px] max-md:h-full bg-primeRed transition-transform duration-500 ease-out origin-left"})})]},e._id)))}),-1!==x&&(0,i.jsxs)("div",{className:"PROGRESS-DETAILS px-12 max-md:px-8 py-3 max-md:py-2 flex items-center gap-12",children:[(0,i.jsxs)("div",{className:"font-semibold font-secondary text-center",children:[(0,i.jsx)("p",{className:"text-3xl",children:new Date(m[x].date).getDate()}),(0,i.jsx)("p",{children:new Date(m[x].date).toLocaleString("default",{month:"short"}).toUpperCase()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium",children:`Order is ${t.toLowerCase()}`}),(0,i.jsx)("p",{className:"text-sm text-primary",children:(0,c.f)(new Date(m[x].date))})]})]})]})},x=e=>{let{statusHistory:t,currentStatus:s}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Tracking Order :"}),(0,i.jsx)(m,{currentStatus:s,statusHistory:t})]})})};var p=s(3216),h=s(8361),f=s(3907),j=s(2925);const y=()=>{const{orderId:e}=(0,p.g)(),{data:t,isLoading:s,error:a}=(0,h.sJ)(e),{data:d,isLoading:o,error:u}=(0,h.Yq)(e),m=(0,h.JJ)(),y=(0,j.d)();return s?(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)("h2",{className:"text-center font-medium text-xl mt-8",children:"Loading..."})}):a?(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)("h2",{className:"text-center font-medium text-xl mt-8",children:a.message})}):t&&(0,i.jsxs)("main",{className:"container max-w-full py-8 px-32 max-xl:px-16 max-lg:px-8 max-md:px-4 space-y-4",children:[(0,i.jsxs)("section",{className:"TOP-HEAD",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("h2",{className:"font-secondary font-semibold text-3xl",children:"Order Details"}),(0,i.jsx)("span",{className:`px-3 py-1 rounded-full ${(0,l.xn)(t.status)}`,children:(0,i.jsx)("p",{className:"text-xs text-white font-medium",children:t.status.toUpperCase()})})]}),(0,i.jsxs)("p",{className:"font-medium text-secondary font-secondary",children:["Order placed on ",(0,c.Y)(new Date(t.createdAt))]}),(0,i.jsxs)("p",{className:"font-medium text-secondary font-secondary",children:["Arriving on ",(0,c.Y)(new Date(t.expectedDeliveryDate))]})]}),(0,i.jsx)(f.A,{type:"button",reverse:!0,onClick:()=>{m.mutate(e,{onSuccess:e=>{const t=e.invoicePath;window.open(t,"_blank")},onError:e=>{console.error(e.message),y.error("This order is not shipped yet.")}})},className:"px-4 py-2 rounded-full ml-auto",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(r.a4x,{size:18}),(0,i.jsx)("p",{className:"font-medium",children:"INVOICE"})]})}),(0,i.jsx)(n,{order:t}),o||u?null:(0,i.jsx)(x,{statusHistory:d,currentStatus:t.status})]})}},8361:(e,t,s)=>{s.d(t,{JJ:()=>u,Yq:()=>c,h:()=>d,s8:()=>o,sJ:()=>l});var r=s(3747),a=s(3248),i=s(7097),n=s(9966);const d=()=>(0,r.I)({queryKey:["orders"],queryFn:n.Vd,staleTime:3e5}),l=e=>(0,r.I)({queryKey:["order",e],queryFn:()=>(0,n.p)(e),staleTime:3e5,enabled:!!e}),c=e=>(0,r.I)({queryKey:["orderStatus",e],queryFn:()=>(0,n.dz)(e),staleTime:3e5,enabled:!!e}),o=e=>{const t=(0,a.jE)();return(0,i.n)({mutationFn:n.N4,onSuccess:()=>{t.invalidateQueries(["orders"]),t.invalidateQueries(["order",e]),t.invalidateQueries(["orderStatus",e])}})},u=e=>{const t=(0,a.jE)();return(0,i.n)({mutationFn:n.It,onSuccess:()=>{t.invalidateQueries(["order",e])}})}},1291:(e,t,s)=>{s.d(t,{Y:()=>r,f:()=>a});const r=e=>{const t=e.getDate(),s=e.toLocaleString("default",{month:"long"}),r=e.getFullYear();return`${t}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(t)} ${s}, ${r}`},a=e=>e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},7097:(e,t,s)=>{s.d(t,{n:()=>u});var r=s(5043),a=s(5239),i=s(1454),n=s(329),d=s(9723),l=class extends n.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,d.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,d.EN)(t.mutationKey)!==(0,d.EN)(this.options.mutationKey)?this.reset():"pending"===this.#s?.state.status&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){const e=this.#s?.state??(0,a.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.j.batch((()=>{if(this.#r&&this.hasListeners()){const t=this.#t.variables,s=this.#t.context;"success"===e?.type?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):"error"===e?.type&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach((e=>{e(this.#t)}))}))}},c=s(3248),o=s(3247);function u(e,t){const s=(0,c.jE)(t),[a]=r.useState((()=>new l(s,e)));r.useEffect((()=>{a.setOptions(e)}),[a,e]);const n=r.useSyncExternalStore(r.useCallback((e=>a.subscribe(i.j.batchCalls(e))),[a]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),d=r.useCallback(((e,t)=>{a.mutate(e,t).catch(o.l)}),[a]);if(n.error&&(0,o.G)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:d,mutateAsync:n.mutate}}}}]);
//# sourceMappingURL=990.acd8c7cc.chunk.js.map