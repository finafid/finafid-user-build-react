"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[3e3],{3907:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(579);const r=e=>{let{children:t,type:s="submit",className:r="px-4 py-2 rounded-md",onClick:i,disabled:n=!1,reverse:o=!1}=e;return o?(0,a.jsx)("button",{type:s,onClick:i,disabled:n,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:t}):(0,a.jsx)("button",{type:s,onClick:i,disabled:n,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:t})}},1940:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(5043),r=s(5200),i=s(9804),n=s(579);const o=e=>{let{value:t="",onChange:s,name:o,label:l,type:d,placeholder:c,align:u=!1,disabled:h=!1,readOnly:m=!1,min:p=0,max:b=1/0,autoComplete:x,autoCorrect:f,order:v,required:g=!1,className:y="w-full px-4 py-2 rounded-md text-xs border border-secondary bg-offWhite",labelClassName:j="capitalize text-sm font-medium",containerClassName:C="flex-col gap-2",validation:N}=e;const w=null===l||void 0===l?void 0:l.replace(" ","-").toLowerCase(),[M,O]=(0,a.useState)(!1),[k,R]=(0,a.useState)(null);return(0,n.jsxs)("div",{className:`relative flex ${C}`,children:[l&&(0,n.jsx)("label",{htmlFor:w,className:`${j}`,style:u?{textAlign:"center"}:{},children:l}),"file"!==d&&(0,n.jsx)("input",{id:w,type:M?"text":d,name:o,value:t,placeholder:c||l,onChange:s,onBlur:()=>{N&&(N(t).success?N(t).success&&R(null):R(N(t).message))},onWheel:e=>e.target.blur(),required:g,disabled:h,readOnly:m,min:"number"===d?p:void 0,max:"number"===d?b:void 0,className:`outline-none placeholder:capitalize read-only:bg-white read-only:cursor-default ${"number"===d&&"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"} ${h&&"opacity-50"} ${y}`}),k&&(0,n.jsxs)("div",{className:"absolute top-full w-full p-1 flex items-start gap-1 text-error z-[1] bg-white rounded",children:[(0,n.jsx)(i.U0v,{size:12}),(0,n.jsx)("p",{className:"text-xxs leading-tight",children:k})]}),"password"===d&&(0,n.jsx)("button",{type:"button",onClick:()=>{O(!M)},className:"absolute right-4 bottom-3 text-secondary text-sm",children:M?(0,n.jsx)(r.Vap,{}):(0,n.jsx)(r._NO,{})})]})}},4412:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(6040),r=s(579);const i=()=>{const e=Array.from({length:12});return(0,r.jsx)("div",{className:"relative size-20 flex-shrink-0",children:e.map(((e,t)=>{const s=-.1*t,i=30*t*(Math.PI/180),n=28*Math.cos(i),o=28*Math.sin(i);return(0,r.jsx)(a.P.div,{className:"absolute size-1.5 bg-primeRed rounded-full",style:{top:"50%",left:"50%",translateX:"-50%",translateY:"-50%",x:n,y:o},initial:{scale:1},animate:{scale:[1,1.5,1]},transition:{duration:1.2,repeat:1/0,ease:"linear",delay:s}},t)}))})}},5962:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(5043);function r(e,t){const[s,r]=(0,a.useState)(e);return{formData:s,setFormData:r,handleChange:e=>{const{name:t,value:a,type:i,files:n,checked:o}=e.target;r("file"===i?{...s,[t]:n}:"checkbox"===i?{...s,[t]:o}:{...s,[t]:a})},handleSubmit:e=>{e.preventDefault(),t(s)},clearForm:()=>r(e)}}},3e3:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(5200),r=s(3907),i=s(1940),n=s(5962),o=s(6216),l=s(2925),d=s(9060),c=s(579);const u=()=>{const e=(0,l.d)(),{getBalance:t}=(0,d.v)(),s=(0,o.gD)(),{formData:a,handleChange:u,handleSubmit:h,clearForm:m}=(0,n.A)({},(a=>{const{code:r}=a;r?s.mutate(r,{onSuccess:async()=>{await t(),e.success("Balance added into wallet successfully"),m()},onError:t=>{var s,a;console.error(t),e.error(null===t||void 0===t||null===(s=t.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)}}):e.error("Please enter a code")}));return(0,c.jsx)("div",{className:"mt-8",children:(0,c.jsxs)("form",{onSubmit:h,className:"flex flex-wrap items-end gap-x-8 gap-y-2",children:[(0,c.jsx)(i.A,{label:"redeem gift card",name:"code",value:a.code,onChange:u,placeholder:"enter your gift code",className:"w-60 h-10 border-2 border-secondary rounded-md px-4 py-2 text-sm placeholder:text-sm"}),(0,c.jsx)(r.A,{disabled:s.isPending,className:"h-10 px-4 py-2 rounded-md",children:"redeem"})]})})};var h=s(6040),m=s(3216),p=s(4412);const b=()=>{const{data:e,isLoading:t,error:s}=(0,o.Px)();return t?(0,c.jsx)("div",{className:"flex justify-center",children:(0,c.jsx)(p.A,{})}):s?(0,c.jsx)("div",{className:"flex justify-center text-sm text-error",children:s.message}):(0,c.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:0===e.length?(0,c.jsx)("p",{className:"text-center text-primary",children:"No gift cards available."}):e.map((e=>{var t,s;return(0,c.jsx)("div",{className:"h-24 w-32 rounded overflow-hidden",children:(0,c.jsx)("img",{src:null===e||void 0===e||null===(t=e.templateId)||void 0===t?void 0:t.template,alt:null===e||void 0===e||null===(s=e.templateId)||void 0===s?void 0:s.title,className:"size-full object-cover object-center"})},e._id)}))})},x=()=>{const e=(0,m.Zp)();return(0,c.jsx)(h.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,c.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,c.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"Gift Cards"}),(0,c.jsx)(b,{}),(0,c.jsxs)("button",{onClick:()=>e("create"),className:"px-4 py-2 flex justify-start items-center gap-2 border border-primeRed rounded-md text-primeRed bg-white hover:bg-offWhite",children:[(0,c.jsx)(a.tN3,{size:18}),(0,c.jsx)("p",{className:"font-medium",children:"Create Gift Card"})]}),(0,c.jsx)(u,{})]})})}},6216:(e,t,s)=>{s.d(t,{aQ:()=>g,Fx:()=>j,Px:()=>v,gD:()=>y});var a=s(3747),r=s(3248),i=s(5043),n=s(5239),o=s(1454),l=s(329),d=s(9723),c=class extends l.Q{#e;#t=void 0;#s;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,d.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,d.EN)(t.mutationKey)!==(0,d.EN)(this.options.mutationKey)?this.reset():"pending"===this.#s?.state.status&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#i()}mutate(e,t){return this.#a=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#r(){const e=this.#s?.state??(0,n.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){o.j.batch((()=>{if(this.#a&&this.hasListeners()){const t=this.#t.variables,s=this.#t.context;"success"===e?.type?(this.#a.onSuccess?.(e.data,t,s),this.#a.onSettled?.(e.data,null,t,s)):"error"===e?.type&&(this.#a.onError?.(e.error,t,s),this.#a.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach((e=>{e(this.#t)}))}))}},u=s(3247);function h(e,t){const s=(0,r.jE)(t),[a]=i.useState((()=>new c(s,e)));i.useEffect((()=>{a.setOptions(e)}),[a,e]);const n=i.useSyncExternalStore(i.useCallback((e=>a.subscribe(o.j.batchCalls(e))),[a]),(()=>a.getCurrentResult()),(()=>a.getCurrentResult())),l=i.useCallback(((e,t)=>{a.mutate(e,t).catch(u.l)}),[a]);if(n.error&&(0,u.G)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:l,mutateAsync:n.mutate}}var m=s(5026);const p=async()=>(await m.A.get("/getGiftCardByUser")).data,b=async e=>(await m.A.post("/createGiftCard",e)).data,x=async e=>(await m.A.post("/redeemGiftCard",{code:e})).data,f=async()=>{var e;return null===(e=(await m.A.get("/getAllTemplates")).data)||void 0===e?void 0:e.allTemplates},v=()=>(0,a.I)({queryKey:["giftCards"],queryFn:p,staleTime:3e5}),g=()=>{const e=(0,r.jE)();return h({mutationFn:b,onSuccess:()=>{e.invalidateQueries(["giftCards"])}})},y=()=>{const e=(0,r.jE)();return h({mutationFn:x,onSuccess:()=>{e.invalidateQueries(["giftCards"])}})},j=()=>(0,a.I)({queryKey:["giftCard-templates"],queryFn:f,staleTime:3e5})}}]);
//# sourceMappingURL=3000.0dc76275.chunk.js.map