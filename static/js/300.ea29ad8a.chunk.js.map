{"version":3,"file":"static/js/300.ea29ad8a.chunk.js","mappings":"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","sources":["api/giftCardApis.js","services/giftCardServices.js","pages/GiftCard/CreateCard.jsx"],"sourcesContent":["import axiosInstance from \"./axiosInstance\";\n\nconst getGiftCards = async () => {\n  const response = await axiosInstance.get(\"/getGiftCardByUser\");\n  return response.data;\n};\n\nconst createGiftCard = async (cardData) => {\n  const response = await axiosInstance.post(\"/createGiftCard\", cardData);\n  return response.data;\n};\n\nconst redeemGiftCard = async (code) => {\n  const response = await axiosInstance.post(\"/redeemGiftCard\", { code });\n  return response.data;\n};\n\nconst getAllTemplates = async () => {\n  const response = await axiosInstance.get(\"/getAllTemplates\");\n  return response.data?.allTemplates;\n};\n\nexport { getGiftCards, createGiftCard, redeemGiftCard, getAllTemplates };\n","import { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport {\n  createGiftCard,\n  getAllTemplates,\n  getGiftCards,\n  redeemGiftCard,\n} from \"../api/giftCardApis\";\n\nconst useGiftCards = () => {\n  return useQuery({\n    queryKey: [\"giftCards\"],\n    queryFn: getGiftCards,\n    staleTime: 1000 * 60 * 5,\n  });\n};\n\nconst useCreateGiftCard = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: createGiftCard,\n    onSuccess: () => {\n      queryClient.invalidateQueries([\"giftCards\"]);\n    },\n  });\n};\n\nconst useRedeemGiftCard = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: redeemGiftCard,\n    onSuccess: () => {\n      queryClient.invalidateQueries([\"giftCards\"]);\n    },\n  });\n};\n\nconst useGiftCardTemplates = () => {\n  return useQuery({\n    queryKey: [\"giftCard-templates\"],\n    queryFn: getAllTemplates,\n    staleTime: 1000 * 60 * 5,\n  });\n};\n\nexport {\n  useGiftCards,\n  useCreateGiftCard,\n  useRedeemGiftCard,\n  useGiftCardTemplates,\n};\n","import { useState } from \"react\";\nimport Button from \"../../components/Button\";\nimport InputBox from \"../../components/InputBox\";\nimport TextareaBox from \"../../components/TextareaBox\";\nimport useForm from \"../../hooks/useForm\";\nimport { useUser } from \"../../contexts/userContext\";\nimport { useWallet } from \"../../contexts/walletContext\";\nimport {\n  useCreateGiftCard,\n  useGiftCardTemplates,\n} from \"../../services/giftCardServices\";\nimport { motion } from \"framer-motion\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useToast } from \"../../contexts/toastContext\";\nimport Spinner from \"../../components/Spinner\";\n\nconst AmountBtn = ({ amount, isActive = false, onClick }) => {\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={`w-16 h-7 border border-primeRed rounded-md flex items-center justify-center gap-1 p-1 text-sm font-secondary font-medium text-primeRed ${\n        isActive ? \"bg-lightGray\" : \"bg-white\"\n      }`}\n    >\n      <span>â‚¹</span>\n      <p>{amount}</p>\n    </button>\n  );\n};\n\nconst CreateCard = () => {\n  const navigate = useNavigate();\n  const toast = useToast();\n  const { user } = useUser();\n  const { getBalance } = useWallet();\n  const {\n    data: templates = [],\n    isLoading: templatesLoading,\n    error: templatesError,\n  } = useGiftCardTemplates();\n  const createMutation = useCreateGiftCard();\n  const [amount, setAmount] = useState(null);\n  const [customAmount, setCustomAmount] = useState(null);\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\n\n  const handleCustomAmount = (value) => {\n    setCustomAmount(value);\n    setAmount(null);\n  };\n\n  const handleAmount = (value) => {\n    setCustomAmount(null);\n    setAmount(value);\n  };\n\n  const onSubmitHandler = async (cardData) => {\n    const { recipientName, recipientEmail, recipientPhone, message } = cardData;\n\n    // Client side validations\n    const warnings = [];\n\n    if (!customAmount && !amount) {\n      warnings.push(\"Please select an amount\");\n    }\n    if (!selectedTemplate) {\n      warnings.push(\"Please select a gift card template\");\n    }\n\n    if (warnings.length > 0) {\n      warnings.forEach((warning) => toast.error(warning));\n      return;\n    }\n\n    const payload = {\n      value: amount || customAmount,\n      Recipient_Information: {\n        name: recipientName,\n        email: recipientEmail,\n        phoneNumber: recipientPhone,\n      },\n      templateId: selectedTemplate._id,\n      message,\n    };\n\n    createMutation.mutate(payload, {\n      onSuccess: async () => {\n        await getBalance();\n        toast.success(\"Gift card created successfully\");\n        navigate(\"/account/gift-card\");\n        clearForm();\n      },\n      onError: (error) => {\n        console.error(error);\n        toast.error(error?.response?.data?.message);\n      },\n    });\n  };\n\n  const { formData, handleChange, handleSubmit, clearForm } = useForm(\n    {},\n    onSubmitHandler\n  );\n\n  return (\n    <motion.main\n      className=\"flex-1\"\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.5 }}\n    >\n      <div className=\"bg-white p-6 rounded-md lg:shadow-md\">\n        <h2 className=\"text-2xl font-semibold mb-4\">Create Gift Card</h2>\n\n        <section className=\"flex justify-center flex-wrap gap-8\">\n          <div className=\"LEFT space-y-4\">\n            <div className=\"w-80 h-48 bg-lightGray rounded-md flex justify-center items-center overflow-hidden\">\n              {selectedTemplate ? (\n                <img\n                  src={selectedTemplate.template}\n                  alt={selectedTemplate.title}\n                  className=\"size-full\"\n                />\n              ) : (\n                <p className=\"text-primary\">No template selected</p>\n              )}\n            </div>\n            <div className=\"w-80 bg-white rounded-md border border-secondary p-4 text-sm space-y-2 overflow-x-hidden\">\n              <p>From: {user.fullName}</p>\n              <p>To: {formData.recipientName}</p>\n              <p>Expires: {new Date().toLocaleDateString()}</p>\n              <p>\n                {formData.message || \"Enjoy this gift card on Finafid.com!\"}\n              </p>\n            </div>\n          </div>\n\n          <div className=\"RIGHT flex-grow space-y-4\">\n            <p className=\"font-secondary font-medium leading-none\">\n              Choose a design\n            </p>\n            <div className=\"GIFT-CARDS-CONTAINER w-full min-h-20 max-h-52 overflow-y-scroll\">\n              <ul className=\"flex gap-4 flex-wrap p-1\">\n                {templatesLoading ? (\n                  <div className=\"w-full flex justify-center\">\n                    <Spinner />\n                  </div>\n                ) : templatesError ? (\n                  <p className=\"w-full text-center text-primary\">\n                    templatesError.message\n                  </p>\n                ) : templates.length === 0 ? (\n                  <p className=\"w-full text-center text-primary\">\n                    No Templates available.\n                  </p>\n                ) : (\n                  templates.map((template, index) => (\n                    <li\n                      onClick={() => setSelectedTemplate(template)}\n                      key={index}\n                      className={`w-20 h-14 flex-shrink-0 ${\n                        selectedTemplate &&\n                        selectedTemplate._id === template._id &&\n                        \"outline outline-primeRed\"\n                      }`}\n                    >\n                      <img\n                        src={template.template}\n                        alt={template.title}\n                        className=\"size-full\"\n                      />\n                    </li>\n                  ))\n                )}\n              </ul>\n            </div>\n\n            <p className=\"font-secondary font-medium leading-none\">\n              Choose an amount\n            </p>\n            <div className=\"flex gap-4 flex-wrap items-center\">\n              {Array.from([1000, 2000, 3000, 4000]).map((value, index) => (\n                <AmountBtn\n                  key={index}\n                  isActive={value === amount}\n                  amount={value}\n                  onClick={() => handleAmount(value)}\n                />\n              ))}\n\n              <div className=\"CUSTOM-AMOUNT\">\n                <p className=\"text-[9px]\">Custom amount:</p>\n                <div className=\"w-20 h-7 flex border border-primeRed rounded-md bg-white overflow-hidden\">\n                  <span className=\"w-max h-full flex items-center justify-center text-sm text-primeRed px-2 border-r border-primeRed\">\n                    â‚¹\n                  </span>\n                  <input\n                    type=\"number\"\n                    name=\"customAmount\"\n                    value={customAmount || \"\"}\n                    onChange={(e) => handleCustomAmount(e.target.value)}\n                    className=\"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none w-full px-2 text-sm font-secondary font-medium text-primeRed\"\n                  />\n                </div>\n                <p className=\"text-[9px]\">(Maximum â‚¹ 10,000)</p>\n              </div>\n            </div>\n\n            <p className=\"font-secondary font-medium leading-none\">\n              Recipient Details\n            </p>\n            <div className=\"space-y-2\">\n              <p className=\"font-medium text-xs\">Enter the details</p>\n              <form className=\"space-y-3\" onSubmit={handleSubmit}>\n                <InputBox\n                  type=\"tel\"\n                  name=\"recipientPhone\"\n                  value={formData.recipientPhone}\n                  onChange={handleChange}\n                  placeholder=\"recipient mobile number\"\n                  className=\"border-b-2 border-dark py-1 text-sm placeholder:text-secondary\"\n                />\n                <InputBox\n                  type=\"email\"\n                  name=\"recipientEmail\"\n                  value={formData.recipientEmail}\n                  onChange={handleChange}\n                  placeholder=\"recipient email\"\n                  className=\"border-b-2 border-dark py-1 text-sm placeholder:text-secondary\"\n                />\n                <InputBox\n                  type=\"text\"\n                  name=\"recipientName\"\n                  value={formData.recipientName}\n                  onChange={handleChange}\n                  placeholder=\"recipient name\"\n                  className=\"border-b-2 border-dark py-1 text-sm placeholder:text-secondary\"\n                />\n              </form>\n            </div>\n            <p className=\"font-secondary font-medium\">\n              Add an optional message\n            </p>\n            <div>\n              <form onSubmit={handleSubmit}>\n                <TextareaBox\n                  name=\"message\"\n                  value={formData.message}\n                  onChange={handleChange}\n                  maxLength={150}\n                  placeholder=\"Enter optional message\"\n                  className=\"resize-none h-36 text-sm placeholder:text-secondary border-b-2 border-dark\"\n                />\n                <Button\n                  disabled={createMutation.isPending}\n                  className=\"ml-auto mt-8 px-4 py-2 rounded-md font-secondary text-sm\"\n                >\n                  create\n                </Button>\n              </form>\n            </div>\n          </div>\n        </section>\n      </div>\n    </motion.main>\n  );\n};\n\nexport default CreateCard;\n"],"names":["getGiftCards","async","axiosInstance","get","data","createGiftCard","post","cardData","redeemGiftCard","code","getAllTemplates","_response$data","allTemplates","useGiftCards","useQuery","queryKey","queryFn","staleTime","useCreateGiftCard","queryClient","useQueryClient","useMutation","mutationFn","onSuccess","invalidateQueries","useRedeemGiftCard","useGiftCardTemplates","AmountBtn","_ref","amount","isActive","onClick","_jsxs","type","className","concat","children","_jsx","CreateCard","navigate","useNavigate","toast","useToast","user","useUser","getBalance","useWallet","templates","isLoading","templatesLoading","error","templatesError","createMutation","setAmount","useState","customAmount","setCustomAmount","selectedTemplate","setSelectedTemplate","formData","handleChange","handleSubmit","clearForm","useForm","recipientName","recipientEmail","recipientPhone","message","warnings","push","length","forEach","warning","payload","value","Recipient_Information","name","email","phoneNumber","templateId","_id","mutate","success","onError","_error$response","_error$response$data","console","response","motion","main","initial","opacity","animate","transition","duration","src","template","alt","title","fullName","Date","toLocaleDateString","Spinner","map","index","Array","from","handleAmount","onChange","e","handleCustomAmount","target","onSubmit","InputBox","placeholder","TextareaBox","maxLength","Button","disabled","isPending"],"sourceRoot":""}