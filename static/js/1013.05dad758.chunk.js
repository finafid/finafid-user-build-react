"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[1013],{3907:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(579);const r=e=>{let{children:s,type:a="submit",className:r="px-4 py-2 rounded-md",onClick:t,disabled:n=!1,reverse:i=!1}=e;return i?(0,l.jsx)("button",{type:a,onClick:t,disabled:n,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:s}):(0,l.jsx)("button",{type:a,onClick:t,disabled:n,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:s})}},3674:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(579);const r=e=>{let{name:s,label:a,onChange:r,accept:t=".jpg, .jpeg, .png",align:n="left",required:i=!1,multiple:o=!1,children:c,className:d="w-max",containerClassName:m="gap-2"}=e;const u=null===s||void 0===s?void 0:s.replace(" ","-").toLowerCase();return(0,l.jsxs)("div",{className:`flex ${"top"===n?"flex-col items-start":"items-center"} ${m}`,children:[a&&"top"===n&&(0,l.jsx)("label",{htmlFor:u,className:"capitalize text-sm font-medium font-secondary",children:a}),a&&"left"===n&&(0,l.jsx)("label",{htmlFor:u,className:"capitalize text-sm font-medium font-secondary",children:a}),(0,l.jsxs)("div",{className:`FILE-UPLOAD relative ${d}`,children:[c,(0,l.jsx)("input",{id:u,type:"file",name:s,onChange:r,accept:t,multiple:o,required:i,className:"block absolute inset-0 opacity-0 cursor-pointer file:cursor-pointer"})]}),a&&"right"===n&&(0,l.jsx)("label",{htmlFor:u,className:"capitalize text-sm font-medium font-secondary",children:a})]})}},1940:(e,s,a)=>{a.d(s,{A:()=>i});var l=a(5043),r=a(5200),t=a(9804),n=a(579);const i=e=>{let{value:s="",onChange:a,name:i,label:o,type:c,placeholder:d,align:m=!1,disabled:u=!1,readOnly:p=!1,min:h=0,max:x=1/0,autoComplete:f,autoCorrect:g,order:v,required:b=!1,className:j="w-full px-4 py-2 rounded-md text-xs border border-secondary bg-offWhite",labelClassName:y="capitalize text-sm font-medium",containerClassName:N="flex-col gap-2",validation:w}=e;const C=null===o||void 0===o?void 0:o.replace(" ","-").toLowerCase(),[k,A]=(0,l.useState)(!1),[S,z]=(0,l.useState)(null);return(0,n.jsxs)("div",{className:`relative flex ${N}`,children:[o&&(0,n.jsx)("label",{htmlFor:C,className:`${y}`,style:m?{textAlign:"center"}:{},children:o}),"file"!==c&&(0,n.jsx)("input",{id:C,type:k?"text":c,name:i,value:s,placeholder:d||o,onChange:a,onBlur:()=>{w&&(w(s).success?w(s).success&&z(null):z(w(s).message))},onWheel:e=>e.target.blur(),required:b,disabled:u,readOnly:p,min:"number"===c?h:void 0,max:"number"===c?x:void 0,className:`outline-none placeholder:capitalize read-only:bg-white read-only:cursor-default ${"number"===c&&"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"} ${u&&"opacity-50"} ${j}`}),S&&(0,n.jsxs)("div",{className:"absolute top-full w-full p-1 flex items-start gap-1 text-error z-[1] bg-white rounded",children:[(0,n.jsx)(t.U0v,{size:12}),(0,n.jsx)("p",{className:"text-xxs leading-tight",children:S})]}),"password"===c&&(0,n.jsx)("button",{type:"button",onClick:()=>{A(!k)},className:"absolute right-4 bottom-3 text-secondary text-sm",children:k?(0,n.jsx)(r.Vap,{}):(0,n.jsx)(r._NO,{})})]})}},2808:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(579);const r=e=>{let{value:s="",onChange:a,name:r,label:t,checked:n=!1,disabled:i=!1,align:o="right",required:c=!1,className:d,labelClassName:m="capitalize text-sm font-medium",containerClassName:u}=e;const p=null===t||void 0===t?void 0:t.replace(" ","-").toLowerCase();return(0,l.jsxs)("div",{className:`relative flex gap-2 items-start ${u}`,children:[t&&"left"===o&&(0,l.jsx)("label",{htmlFor:p,className:m,children:t}),(0,l.jsxs)("div",{className:`grid place-items-center mt-[2px] ${d}`,children:[(0,l.jsx)("input",{id:p,type:"radio",name:r,value:s,checked:n,disabled:i,onChange:a,required:c,className:"peer col-start-1 row-start-1 appearance-none shrink-0 size-4 border border-primeRed rounded-full disabled:border-primary disabled:cursor-not-allowed hover:cursor-pointer"}),(0,l.jsx)("span",{className:"pointer-events-none col-start-1 row-start-1 size-2 rounded-full peer-checked:bg-primeRed peer-checked:peer-disabled:bg-mainGray"})]}),t&&"right"===o&&(0,l.jsx)("label",{htmlFor:p,className:m,children:t})]})}},5962:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(5043);function r(e,s){const[a,r]=(0,l.useState)(e);return{formData:a,setFormData:r,handleChange:e=>{const{name:s,value:l,type:t,files:n,checked:i}=e.target;r("file"===t?{...a,[s]:n}:"checkbox"===t?{...a,[s]:i}:{...a,[s]:l})},handleSubmit:e=>{e.preventDefault(),s(a)},clearForm:()=>r(e)}}},2679:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(5043);const r=(e,s,a,r)=>{const[t,n]=(0,l.useState)(e),[i,o]=(0,l.useState)(r||1);return{formData:t,currentStep:i,steps:a,goToNextStep:()=>{i>=a.length+1||o((e=>e+1))},goToPrevStep:()=>{i<=0||o((e=>e-1))},goToStep:e=>{o(e)},handleChange:e=>{const{name:s,value:a,type:l,files:r,checked:i}=e.target;n("file"===l?{...t,[s]:r}:"checkbox"===l?{...t,[s]:i}:{...t,[s]:a})},handleSubmit:e=>{e.preventDefault(),s(t)},clearForm:()=>n(e)}}},5020:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(5043);function r(e,s){const[a,r]=(0,l.useState)(new Array(e).fill("")),t=(0,l.useRef)([]);(0,l.useEffect)((()=>{var s;t.current=null===(s=t.current)||void 0===s?void 0:s.slice(0,e)}),[e]);const n=(0,l.useCallback)((e=>{if(e.preventDefault(),!a.every((e=>""!==e)))return null;s(a.join(""))}),[a,s]);return{otp:a,refs:t,handleChange:(s,a)=>{/^\d$/.test(a)&&r((l=>{const r=[...l];return r[s]=a,""!==a&&s<e-1&&t.current[s+1].focus(),r}))},handlePaste:(s,l)=>{const t=[...a];l.split("").forEach(((a,l)=>{/^\d$/.test(a)&&s+l<e&&(t[s+l]=a)})),r(t)},handleKeyDown:(e,s)=>{"Backspace"===s.key&&(s.preventDefault(),r((s=>{const l=[...s];return""===a[e]?e>0&&(l[e-1]="",t.current[e-1].focus()):l[e]="",l})))},handleSubmit:n}}},1013:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var l=a(3907),r=a(9659),t=a(6040),n=a(1940),i=a(2808),o=a(5962),c=a(9335),d=a(7653),m=a(5043),u=a(3674),p=a(6720),h=a(2925),x=a(3163),f=a(2679),g=a(5020),v=a(579);const b=e=>{let{formData:s,length:a=4}=e;const{closeModal:r}=(0,x.h)(),t=(0,h.d)(),{otp:n,refs:i,handleChange:o,handlePaste:c,handleKeyDown:m,handleSubmit:u}=(0,g.A)(a,(async e=>{try{const a=await(0,d.FH)({otp:e,email:s.email});null!==a&&void 0!==a&&a.status&&(console.log(a.data),r())}catch(n){if(null!==n&&void 0!==n&&n.response)if(n.response){var a,l;t.error(null===(a=n.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)}else t.error("Server issues!!!");else t.error("no server response")}}));return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{className:"capitalize text-2xl font-semibold text-center mt-8 mb-24",children:"Email Verification"}),(0,v.jsxs)("form",{onSubmit:u,children:[(0,v.jsxs)("div",{className:"FORM-FIELD flex flex-col w-max mx-auto my-10",children:[(0,v.jsx)("label",{htmlFor:"",className:"capitalize font-medium text-center my-4",children:"enter otp"}),(0,v.jsx)("div",{className:"flex gap-6",children:Array.from({length:a}).map(((e,s)=>(0,v.jsx)("input",{type:"text",ref:e=>i.current[s]=e,maxLength:1,value:n[s],onChange:e=>o(s,e.target.value),onPaste:e=>((e,s)=>{e.preventDefault();const l=e.clipboardData.getData("text/plain").substr(0,a-s);c(s,l)})(e,s),onKeyDown:e=>m(s,e),className:"border border-primary bg-offWhite outline-none size-10 rounded-full text-center"},s)))})]}),(0,v.jsx)("div",{children:(0,v.jsxs)("p",{className:"text-center text-xs text-slate-400 mb-10",children:["If you didn't receive a code."," ",(0,v.jsx)("span",{onClick:async()=>{try{const e=await(0,d.Ix)(s.email);null!==e&&void 0!==e&&e.status&&t.success("OTP resend successfully")}catch(l){if(null!==l&&void 0!==l&&l.response)if(l.response){var e,a;t.error(null===(e=l.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)}else t.error("Server issues!!!");else t.error("no server response")}},className:"text-primeRed cursor-pointer hover:underline",children:"Resend"})]})}),(0,v.jsx)(l.A,{className:"w-full py-2 px-6 rounded-full font-secondary",children:"Verify"})]})]})};var j=a(423);const y=()=>{const{user:e}=(0,r.J)(),s=(0,h.d)(),{closeModal:a}=(0,x.h)(),{formData:t,currentStep:i,goToNextStep:o,handleChange:m,handleSubmit:u}=(0,f.A)({email:e.email},(async e=>{try{const{email:a}=e;if(!(0,c.xd)(a).success)return void s.error("Enter a valid email");const l=await(0,d.Ix)(a);null!==l&&void 0!==l&&l.status&&o()}catch(r){if(console.log(r),null!==r&&void 0!==r&&r.response)if(r.response){var a,l;s.error(null===(a=r.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)}else s.error("Server issues!!!");else s.error("no server response")}}),[1,2]);return(0,v.jsxs)("div",{className:"size-[520px] max-sm:w-svw max-sm:h-svh shadow-primary bg-white sm:border sm:border-primary sm:rounded-3xl p-10 max-sm:p-6",children:[1===i&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{className:"capitalize text-2xl font-semibold text-center mt-8 mb-24",children:"edit your email"}),(0,v.jsxs)("form",{onSubmit:u,children:[(0,v.jsx)(n.A,{label:"Enter email address",name:"email",type:"email",value:t.email,onChange:m,validation:c.xd,align:!0}),(0,v.jsx)(l.A,{className:"w-full py-2 px-6 rounded-full font-secondary mt-16",children:"update"})]})]}),2===i&&(0,v.jsx)(b,{formData:t}),(0,v.jsx)("button",{onClick:a,className:"absolute top-4 right-4 border border-primary rounded-full p-1",children:(0,v.jsx)(j.WQq,{size:24,className:"text-primary"})})]})},N=()=>{const[e,s]=(0,m.useState)(!0),[a,f]=(0,m.useState)(null),{openModal:g}=(0,x.h)(),b=(0,h.d)(),{user:j}=(0,r.J)(),{formData:N,handleChange:w,handleSubmit:C}=(0,o.A)({fullName:j.fullName,phone:j.phone,email:j.email,gender:j.gender},(async e=>{try{const{fullName:a,gender:l}=e,r=e.avatar;let t=null;if(r&&(t=r[0]),!(0,c.wJ)(a).success)return void console.log((0,c.wJ)(a).message);const n=await(0,d.DG)({fullName:a,gender:l,avatar:t});null!==n&&void 0!==n&&n.status&&(console.log(n.data),b.success("User data updated successfully"),s(!0))}catch(r){if(null!==r&&void 0!==r&&r.response)if(r.response){var a,l;console.log(null===(a=r.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)}else console.log("Server issues!!!");else console.log("no server response")}}));return(0,v.jsx)(t.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,v.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,v.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Personal Information"}),(0,v.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,v.jsxs)("div",{className:"USER-AVATAR relative size-24 rounded-full mx-auto",children:[(0,v.jsx)("img",{src:a||j.imgUrl,alt:j.fullName,loading:"lazy",className:"size-full rounded-full object-cover object-center"}),!e&&(0,v.jsx)("div",{className:"absolute bottom-0 right-0 rounded-full p-1 bg-white",children:(0,v.jsx)(u.A,{name:"avatar",onChange:e=>{const s=e.target.files[0];f(s?URL.createObjectURL(s):null),w(e)},className:"p-1 bg-success rounded-full",children:(0,v.jsx)(p._51,{className:"text-xs text-white"})})})]}),(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,v.jsx)(n.A,{label:"name",name:"fullName",value:N.fullName,onChange:w,validation:c.wJ,readOnly:e})}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)("div",{className:"w-full flex items-end gap-x-2",children:[(0,v.jsx)(n.A,{type:"email",label:"email",name:"email",value:N.email,onChange:w,validation:c.xd,readOnly:!0,containerClassName:"flex-col gap-2 flex-grow"}),(0,v.jsx)(l.A,{type:"button",reverse:!0,onClick:()=>g((0,v.jsx)(y,{})),className:"size-[34px] flex items-center justify-center rounded-md",children:(0,v.jsx)(p.Yvo,{})})]}),(0,v.jsxs)("div",{className:"flex items-end gap-x-2",children:[(0,v.jsx)(n.A,{type:"tel",label:"phone",name:"phone",value:N.phone,onChange:w,validation:c.ri,readOnly:!0,containerClassName:"flex-col gap-2 flex-grow"}),(0,v.jsx)(l.A,{type:"button",reverse:!0,className:"size-[34px] flex items-center justify-center rounded-md",children:(0,v.jsx)(p.Yvo,{})})]})]}),(0,v.jsxs)("div",{className:"flex space-x-4",children:[(0,v.jsx)("p",{className:"text-sm font-medium",children:"Gender"}),(0,v.jsx)(i.A,{label:"male",name:"gender",value:"male",checked:"male"===N.gender,onChange:w,disabled:e}),(0,v.jsx)(i.A,{label:"female",name:"gender",value:"female",checked:"female"===N.gender,onChange:w,disabled:e}),(0,v.jsx)(i.A,{label:"others",name:"gender",value:"others",checked:"others"===N.gender,onChange:w,disabled:e})]}),(0,v.jsx)("div",{className:"BUTTON-SECTION mt-6 flex space-x-4",children:e?(0,v.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 rounded-md bg-warning text-sm font-medium border border-transparent",children:"Edit"}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.A,{children:"save"}),(0,v.jsx)(l.A,{type:"button",onClick:()=>s(!0),reverse:!0,children:"cancel"})]})})]})]})})}},9335:(e,s,a)=>{a.d(s,{XP:()=>o,YY:()=>i,ri:()=>n,wJ:()=>r,xd:()=>t});var l=a(9888);const r=e=>{if(!e)return{success:!1,message:"Name is required"};if(e.length<3)return{success:!1,message:"Name should be more than 3 characters"};return l.AE.test(e)?{success:!0,message:"OK"}:{success:!1,message:"Please enter a valid name"}},t=e=>{if(!e)return{success:!1,message:"Email is required"};if(e.length>254)return{success:!1,message:"Please enter a valid email"};if(!l.Xw.test(e))return{success:!1,message:"Please enter a valid email"};return e.split("@")[0].length>64?{success:!1,message:"Please enter a valid email"}:{success:!0,message:"OK"}},n=e=>{if(!e)return{success:!1,message:"Phone is required"};return l.fC.test(e)?{success:!0,message:"OK"}:{success:!1,message:"Please enter a valid phone"}},i=e=>{if(!e)return{success:!1,message:"Password is required"};return l.A9.test(e)?{success:!0,message:"OK"}:{success:!1,message:"Your password must be have at least 8 characters long, 1 uppercase & 1 lowercase character, 1 number"}},o=e=>{if(!e)return{success:!1,message:"Pin code is required"};return l.qm.test(e)?{success:!0,message:"OK"}:{success:!1,message:"Please enter a valid pin code"}}}}]);
//# sourceMappingURL=1013.05dad758.chunk.js.map