"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[13],{1013:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var l=s(3907),r=s(9659),n=s(94),t=s(1940),o=s(2808),i=s(5962),d=s(9335),c=s(7653),m=s(5043),u=s(3674),p=s(6720),h=s(2925),x=s(3163),f=s(2679),v=s(2639),g=s(579);const b=e=>{let{formData:a,length:s=4}=e;const{closeModal:r}=(0,x.h)(),n=(0,h.d)(),{otp:t,refs:o,handleChange:i,handlePaste:d,handleKeyDown:m,handleSubmit:u}=(0,v.A)(s,(async e=>{try{const s=await(0,c.FH)({otp:e,email:a.email});null!==s&&void 0!==s&&s.status&&(console.log(s.data),r())}catch(t){if(null!==t&&void 0!==t&&t.response)if(t.response){var s,l;n.error(null===(s=t.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)}else n.error("Server issues!!!");else n.error("no server response")}}));return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:"capitalize text-2xl font-semibold text-center mt-8 mb-24",children:"Email Verification"}),(0,g.jsxs)("form",{onSubmit:u,children:[(0,g.jsxs)("div",{className:"FORM-FIELD flex flex-col w-max mx-auto my-10",children:[(0,g.jsx)("label",{htmlFor:"",className:"capitalize font-medium text-center my-4",children:"enter otp"}),(0,g.jsx)("div",{className:"flex gap-6",children:Array.from({length:s}).map(((e,a)=>(0,g.jsx)("input",{type:"text",ref:e=>o.current[a]=e,maxLength:1,value:t[a],onChange:e=>i(a,e.target.value),onPaste:e=>((e,a)=>{e.preventDefault();const l=e.clipboardData.getData("text/plain").substr(0,s-a);d(a,l)})(e,a),onKeyDown:e=>m(a,e),className:"border border-primary bg-offWhite outline-none size-10 rounded-full text-center"},a)))})]}),(0,g.jsx)("div",{children:(0,g.jsxs)("p",{className:"text-center text-xs text-slate-400 mb-10",children:["If you didn't receive a code."," ",(0,g.jsx)("span",{onClick:async()=>{try{const e=await(0,c.Ix)(a.email);null!==e&&void 0!==e&&e.status&&n.success("OTP resend successfully")}catch(l){if(null!==l&&void 0!==l&&l.response)if(l.response){var e,s;n.error(null===(e=l.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)}else n.error("Server issues!!!");else n.error("no server response")}},className:"text-primeRed cursor-pointer hover:underline",children:"Resend"})]})}),(0,g.jsx)(l.A,{className:"w-full py-2 px-6 rounded-full font-secondary",children:"Verify"})]})]})};var j=s(423);const N=()=>{const{user:e}=(0,r.J)(),a=(0,h.d)(),{closeModal:s}=(0,x.h)(),{formData:n,currentStep:o,goToNextStep:i,handleChange:m,handleSubmit:u}=(0,f.A)({email:e.email},(async e=>{try{const{email:s}=e;if(!(0,d.xd)(s).success)return void a.error("Enter a valid email");const l=await(0,c.Ix)(s);null!==l&&void 0!==l&&l.status&&i()}catch(r){if(console.log(r),null!==r&&void 0!==r&&r.response)if(r.response){var s,l;a.error(null===(s=r.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)}else a.error("Server issues!!!");else a.error("no server response")}}),[1,2]);return(0,g.jsxs)("div",{className:"size-[520px] max-sm:w-svw max-sm:h-svh shadow-primary bg-white sm:border sm:border-primary sm:rounded-3xl p-10 max-sm:p-6",children:[1===o&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:"capitalize text-2xl font-semibold text-center mt-8 mb-24",children:"edit your email"}),(0,g.jsxs)("form",{onSubmit:u,children:[(0,g.jsx)(t.A,{label:"Enter email address",name:"email",type:"email",value:n.email,onChange:m,validation:d.xd,align:!0}),(0,g.jsx)(l.A,{className:"w-full py-2 px-6 rounded-full font-secondary mt-16",children:"update"})]})]}),2===o&&(0,g.jsx)(b,{formData:n}),(0,g.jsx)("button",{onClick:s,className:"absolute top-4 right-4 border border-primary rounded-full p-1",children:(0,g.jsx)(j.WQq,{size:24,className:"text-primary"})})]})},y=()=>{const[e,a]=(0,m.useState)(!0),[s,f]=(0,m.useState)(null),{openModal:v}=(0,x.h)(),b=(0,h.d)(),{user:j}=(0,r.J)(),{formData:y,handleChange:w,handleSubmit:C}=(0,i.A)({fullName:j.fullName,phone:j.phone,email:j.email,gender:j.gender},(async e=>{try{const{fullName:s,gender:l}=e,r=e.avatar;let n=null;if(r&&(n=r[0]),!(0,d.wJ)(s).success)return void console.log((0,d.wJ)(s).message);const t=await(0,c.DG)({fullName:s,gender:l,avatar:n});null!==t&&void 0!==t&&t.status&&(console.log(t.data),b.success("User data updated successfully"),a(!0))}catch(r){if(null!==r&&void 0!==r&&r.response)if(r.response){var s,l;console.log(null===(s=r.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)}else console.log("Server issues!!!");else console.log("no server response")}}));return(0,g.jsx)(n.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,g.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,g.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Personal Information"}),(0,g.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,g.jsxs)("div",{className:"USER-AVATAR relative size-24 rounded-full mx-auto",children:[(0,g.jsx)("img",{src:s||j.imgUrl,alt:j.fullName,loading:"lazy",className:"size-full rounded-full object-cover object-center"}),!e&&(0,g.jsx)("div",{className:"absolute bottom-0 right-0 rounded-full p-1 bg-white",children:(0,g.jsx)(u.A,{name:"avatar",onChange:e=>{const a=e.target.files[0];f(a?URL.createObjectURL(a):null),w(e)},className:"p-1 bg-success rounded-full",children:(0,g.jsx)(p._51,{className:"text-xs text-white"})})})]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,g.jsx)(t.A,{label:"name",name:"fullName",value:y.fullName,onChange:w,validation:d.wJ,readOnly:e})}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,g.jsxs)("div",{className:"w-full flex items-end gap-x-2",children:[(0,g.jsx)(t.A,{type:"email",label:"email",name:"email",value:y.email,onChange:w,validation:d.xd,readOnly:!0,containerClassName:"flex-col gap-2 flex-grow"}),(0,g.jsx)(l.A,{type:"button",reverse:!0,onClick:()=>v((0,g.jsx)(N,{})),className:"size-[34px] flex items-center justify-center rounded-md",children:(0,g.jsx)(p.Yvo,{})})]}),(0,g.jsxs)("div",{className:"flex items-end gap-x-2",children:[(0,g.jsx)(t.A,{type:"tel",label:"phone",name:"phone",value:y.phone,onChange:w,validation:d.ri,readOnly:!0,containerClassName:"flex-col gap-2 flex-grow"}),(0,g.jsx)(l.A,{type:"button",reverse:!0,className:"size-[34px] flex items-center justify-center rounded-md",children:(0,g.jsx)(p.Yvo,{})})]})]}),(0,g.jsxs)("div",{className:"flex space-x-4",children:[(0,g.jsx)("p",{className:"text-sm font-medium",children:"Gender"}),(0,g.jsx)(o.A,{label:"male",name:"gender",value:"male",checked:"male"===y.gender,onChange:w,disabled:e}),(0,g.jsx)(o.A,{label:"female",name:"gender",value:"female",checked:"female"===y.gender,onChange:w,disabled:e}),(0,g.jsx)(o.A,{label:"others",name:"gender",value:"others",checked:"others"===y.gender,onChange:w,disabled:e})]}),(0,g.jsx)("div",{className:"BUTTON-SECTION mt-6 flex space-x-4",children:e?(0,g.jsx)("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 rounded-md bg-warning text-sm font-medium border border-transparent",children:"Edit"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.A,{children:"save"}),(0,g.jsx)(l.A,{type:"button",onClick:()=>a(!0),reverse:!0,children:"cancel"})]})})]})]})})}},2639:(e,a,s)=>{s.d(a,{A:()=>r});var l=s(5043);function r(e,a){const[s,r]=(0,l.useState)(new Array(e).fill("")),n=(0,l.useRef)([]);(0,l.useEffect)((()=>{var a;n.current=null===(a=n.current)||void 0===a?void 0:a.slice(0,e)}),[e]);const t=(0,l.useCallback)((e=>{if(e.preventDefault(),!s.every((e=>""!==e)))return null;a(s.join(""))}),[s,a]);return{otp:s,refs:n,handleChange:(a,s)=>{/^\d$/.test(s)&&r((l=>{const r=[...l];return r[a]=s,""!==s&&a<e-1&&n.current[a+1].focus(),r}))},handlePaste:(a,l)=>{const n=[...s];l.split("").forEach(((s,l)=>{/^\d$/.test(s)&&a+l<e&&(n[a+l]=s)})),r(n)},handleKeyDown:(e,a)=>{"Backspace"===a.key&&(a.preventDefault(),r((a=>{const l=[...a];return""===s[e]?e>0&&(l[e-1]="",n.current[e-1].focus()):l[e]="",l})))},handleSubmit:t}}},2679:(e,a,s)=>{s.d(a,{A:()=>n});var l=s(2555),r=s(5043);const n=(e,a,s,n)=>{const[t,o]=(0,r.useState)(e),[i,d]=(0,r.useState)(n||1);return{formData:t,currentStep:i,steps:s,goToNextStep:()=>{i>=s.length+1||d((e=>e+1))},goToPrevStep:()=>{i<=0||d((e=>e-1))},goToStep:e=>{d(e)},handleChange:e=>{const{name:a,value:s,type:r,files:n,checked:i}=e.target;o("file"===r?(0,l.A)((0,l.A)({},t),{},{[a]:n}):"checkbox"===r?(0,l.A)((0,l.A)({},t),{},{[a]:i}):(0,l.A)((0,l.A)({},t),{},{[a]:s}))},handleSubmit:e=>{e.preventDefault(),a(t)},clearForm:()=>o(e)}}},2808:(e,a,s)=>{s.d(a,{A:()=>r});var l=s(579);const r=e=>{let{value:a="",onChange:s,name:r,label:n,checked:t=!1,disabled:o=!1,align:i="right",required:d=!1,className:c,labelClassName:m="capitalize text-sm font-medium",containerClassName:u}=e;const p=null===n||void 0===n?void 0:n.replace(" ","-").toLowerCase();return(0,l.jsxs)("div",{className:"relative flex gap-2 items-start ".concat(u),children:[n&&"left"===i&&(0,l.jsx)("label",{htmlFor:p,className:m,children:n}),(0,l.jsxs)("div",{className:"grid place-items-center mt-[2px] ".concat(c),children:[(0,l.jsx)("input",{id:p,type:"radio",name:r,value:a,checked:t,disabled:o,onChange:s,required:d,className:"peer col-start-1 row-start-1 appearance-none shrink-0 size-4 border border-primeRed rounded-full disabled:border-primary disabled:cursor-not-allowed hover:cursor-pointer"}),(0,l.jsx)("span",{className:"pointer-events-none col-start-1 row-start-1 size-2 rounded-full peer-checked:bg-primeRed peer-checked:peer-disabled:bg-mainGray"})]}),n&&"right"===i&&(0,l.jsx)("label",{htmlFor:p,className:m,children:n})]})}},3674:(e,a,s)=>{s.d(a,{A:()=>r});var l=s(579);const r=e=>{let{name:a,label:s,onChange:r,accept:n=".jpg, .jpeg, .png",align:t="left",required:o=!1,multiple:i=!1,children:d,className:c="w-max",containerClassName:m="gap-2"}=e;const u=null===a||void 0===a?void 0:a.replace(" ","-").toLowerCase();return(0,l.jsxs)("div",{className:"flex ".concat("top"===t?"flex-col items-start":"items-center"," ").concat(m),children:[s&&"top"===t&&(0,l.jsx)("label",{htmlFor:u,className:"capitalize text-sm font-medium font-secondary",children:s}),s&&"left"===t&&(0,l.jsx)("label",{htmlFor:u,className:"capitalize text-sm font-medium font-secondary",children:s}),(0,l.jsxs)("div",{className:"FILE-UPLOAD relative ".concat(c),children:[d,(0,l.jsx)("input",{id:u,type:"file",name:a,onChange:r,accept:n,multiple:i,required:o,className:"block absolute inset-0 opacity-0 cursor-pointer file:cursor-pointer"})]}),s&&"right"===t&&(0,l.jsx)("label",{htmlFor:u,className:"capitalize text-sm font-medium font-secondary",children:s})]})}}}]);
//# sourceMappingURL=13.dc61a8b3.chunk.js.map