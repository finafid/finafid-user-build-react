"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[428],{3907:(e,a,s)=>{s.d(a,{A:()=>t});var l=s(579);const t=e=>{let{children:a,type:s="submit",className:t="px-4 py-2 rounded-md",onClick:r,disabled:n=!1,reverse:o=!1}=e;return o?(0,l.jsx)("button",{type:s,onClick:r,disabled:n,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${t}`,children:a}):(0,l.jsx)("button",{type:s,onClick:r,disabled:n,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${t}`,children:a})}},1940:(e,a,s)=>{s.d(a,{A:()=>o});var l=s(5043),t=s(5200),r=s(9804),n=s(579);const o=e=>{let{value:a="",onChange:s,name:o,label:i,type:d,placeholder:c,align:m=!1,disabled:u=!1,readOnly:p=!1,min:x=0,max:h=1/0,autoComplete:f,autoCorrect:v,order:b,required:g=!1,className:j="w-full px-4 py-2 rounded-md text-xs border border-secondary bg-offWhite",labelClassName:y="capitalize text-sm font-medium",containerClassName:N="flex-col gap-2",validation:w}=e;const C=null===i||void 0===i?void 0:i.replace(" ","-").toLowerCase(),[k,A]=(0,l.useState)(!1),[S,z]=(0,l.useState)(null);return(0,n.jsxs)("div",{className:`relative flex ${N}`,children:[i&&(0,n.jsx)("label",{htmlFor:C,className:`${y}`,style:m?{textAlign:"center"}:{},children:i}),"file"!==d&&(0,n.jsx)("input",{id:C,type:k?"text":d,name:o,value:a,placeholder:c||i,onChange:s,onBlur:()=>{w&&(w(a).success?w(a).success&&z(null):z(w(a).message))},onWheel:e=>e.target.blur(),required:g,disabled:u,readOnly:p,min:"number"===d?x:void 0,max:"number"===d?h:void 0,className:`outline-none placeholder:capitalize read-only:bg-white read-only:cursor-default ${"number"===d&&"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"} ${u&&"opacity-50"} ${j}`}),S&&(0,n.jsxs)("div",{className:"absolute top-full w-full p-1 flex items-start gap-1 text-error z-[1] bg-white rounded",children:[(0,n.jsx)(r.U0v,{size:12}),(0,n.jsx)("p",{className:"text-xxs leading-tight",children:S})]}),"password"===d&&(0,n.jsx)("button",{type:"button",onClick:()=>{A(!k)},className:"absolute right-4 bottom-3 text-secondary text-sm",children:k?(0,n.jsx)(t.Vap,{}):(0,n.jsx)(t._NO,{})})]})}},2808:(e,a,s)=>{s.d(a,{A:()=>t});var l=s(579);const t=e=>{let{value:a="",onChange:s,name:t,label:r,checked:n=!1,disabled:o=!1,align:i="right",required:d=!1,className:c,labelClassName:m="capitalize text-sm font-medium",containerClassName:u}=e;const p=null===r||void 0===r?void 0:r.replace(" ","-").toLowerCase();return(0,l.jsxs)("div",{className:`relative flex gap-2 items-start ${u}`,children:[r&&"left"===i&&(0,l.jsx)("label",{htmlFor:p,className:m,children:r}),(0,l.jsxs)("div",{className:`grid place-items-center mt-[2px] ${c}`,children:[(0,l.jsx)("input",{id:p,type:"radio",name:t,value:a,checked:n,disabled:o,onChange:s,required:d,className:"peer col-start-1 row-start-1 appearance-none shrink-0 size-4 border border-black rounded-full disabled:border-primary disabled:cursor-not-allowed hover:cursor-pointer"}),(0,l.jsx)("span",{className:"pointer-events-none col-start-1 row-start-1 size-2 rounded-full peer-checked:bg-primeRed peer-checked:peer-disabled:bg-mainGray"})]}),r&&"right"===i&&(0,l.jsx)("label",{htmlFor:p,className:m,children:r})]})}},5962:(e,a,s)=>{s.d(a,{A:()=>t});var l=s(5043);function t(e,a){const[s,t]=(0,l.useState)(e);return{formData:s,setFormData:t,handleChange:e=>{const{name:a,value:l,type:r,files:n,checked:o}=e.target;t("file"===r?{...s,[a]:n}:"checkbox"===r?{...s,[a]:o}:{...s,[a]:l})},handleSubmit:e=>{e.preventDefault(),a(s)},clearForm:()=>t(e)}}},2679:(e,a,s)=>{s.d(a,{A:()=>t});var l=s(5043);const t=(e,a,s,t)=>{const[r,n]=(0,l.useState)(e),[o,i]=(0,l.useState)(t||1);return{formData:r,currentStep:o,steps:s,goToNextStep:()=>{o>=s.length+1||i((e=>e+1))},goToPrevStep:()=>{o<=0||i((e=>e-1))},goToStep:e=>{i(e)},handleChange:e=>{const{name:a,value:s,type:l,files:t,checked:o}=e.target;n("file"===l?{...r,[a]:t}:"checkbox"===l?{...r,[a]:o}:{...r,[a]:s})},handleSubmit:e=>{e.preventDefault(),a(r)},clearForm:()=>n(e)}}},5020:(e,a,s)=>{s.d(a,{A:()=>t});var l=s(5043);function t(e,a){const[s,t]=(0,l.useState)(new Array(e).fill("")),r=(0,l.useRef)([]);(0,l.useEffect)((()=>{var a;r.current=null===(a=r.current)||void 0===a?void 0:a.slice(0,e)}),[e]);const n=(0,l.useCallback)((e=>{if(e.preventDefault(),!s.every((e=>""!==e)))return null;a(s.join(""))}),[s,a]);return{otp:s,refs:r,handleChange:(a,s)=>{/^\d$/.test(s)&&t((l=>{const t=[...l];return t[a]=s,""!==s&&a<e-1&&r.current[a+1].focus(),t}))},handlePaste:(a,l)=>{const r=[...s];l.split("").forEach(((s,l)=>{/^\d$/.test(s)&&a+l<e&&(r[a+l]=s)})),t(r)},handleKeyDown:(e,a)=>{"Backspace"===a.key&&(a.preventDefault(),t((a=>{const l=[...a];return""===s[e]?e>0&&(l[e-1]="",r.current[e-1].focus()):l[e]="",l})))},handleSubmit:n}}},428:(e,a,s)=>{s.r(a),s.d(a,{default:()=>N});var l=s(3907),t=s(9659),r=s(6040),n=s(1940),o=s(2808),i=s(5962),d=s(9335),c=s(7653),m=s(5043),u=s(579);const p=e=>{let{name:a,label:s,onChange:l,accept:t=".jpg, .jpeg, .png",align:r="left",required:n=!1,multiple:o=!1,children:i,className:d="w-max",containerClassName:c="gap-2"}=e;const m=null===a||void 0===a?void 0:a.replace(" ","-").toLowerCase();return(0,u.jsxs)("div",{className:`flex ${"top"===r?"flex-col items-start":"items-center"} ${c}`,children:[s&&"top"===r&&(0,u.jsx)("label",{htmlFor:m,className:"capitalize text-sm font-medium font-secondary",children:s}),s&&"left"===r&&(0,u.jsx)("label",{htmlFor:m,className:"capitalize text-sm font-medium font-secondary",children:s}),(0,u.jsxs)("div",{className:`FILE-UPLOAD relative ${d}`,children:[i,(0,u.jsx)("input",{id:m,type:"file",name:a,onChange:l,accept:t,multiple:o,required:n,className:"block absolute inset-0 opacity-0 cursor-pointer file:cursor-pointer"})]}),s&&"right"===r&&(0,u.jsx)("label",{htmlFor:m,className:"capitalize text-sm font-medium font-secondary",children:s})]})};var x=s(6720),h=s(2925),f=s(3163),v=s(2679),b=s(5020);const g=e=>{let{formData:a,length:s=4}=e;const{closeModal:t}=(0,f.h)(),r=(0,h.d)(),{otp:n,refs:o,handleChange:i,handlePaste:d,handleKeyDown:m,handleSubmit:p}=(0,b.A)(s,(async e=>{try{const s=await(0,c.FH)({otp:e,email:a.email});null!==s&&void 0!==s&&s.status&&(console.log(s.data),t())}catch(n){if(null!==n&&void 0!==n&&n.response)if(n.response){var s,l;r.error(null===(s=n.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)}else r.error("Server issues!!!");else r.error("no server response")}}));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{className:"capitalize text-2xl font-semibold text-center mt-8 mb-24",children:"Email Verification"}),(0,u.jsxs)("form",{onSubmit:p,children:[(0,u.jsxs)("div",{className:"FORM-FIELD flex flex-col w-max mx-auto my-10",children:[(0,u.jsx)("label",{htmlFor:"",className:"capitalize font-medium text-center my-4",children:"enter otp"}),(0,u.jsx)("div",{className:"flex gap-6",children:Array.from({length:s}).map(((e,a)=>(0,u.jsx)("input",{type:"text",ref:e=>o.current[a]=e,maxLength:1,value:n[a],onChange:e=>i(a,e.target.value),onPaste:e=>((e,a)=>{e.preventDefault();const l=e.clipboardData.getData("text/plain").substr(0,s-a);d(a,l)})(e,a),onKeyDown:e=>m(a,e),className:"border border-primary bg-offWhite outline-none size-10 rounded-full text-center"},a)))})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("p",{className:"text-center text-xs text-slate-400 mb-10",children:["If you didn't receive a code."," ",(0,u.jsx)("span",{onClick:async()=>{try{const e=await(0,c.Ix)(a.email);null!==e&&void 0!==e&&e.status&&r.success("OTP resend successfully")}catch(l){if(null!==l&&void 0!==l&&l.response)if(l.response){var e,s;r.error(null===(e=l.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)}else r.error("Server issues!!!");else r.error("no server response")}},className:"text-primeRed cursor-pointer hover:underline",children:"Resend"})]})}),(0,u.jsx)(l.A,{className:"w-full py-2 px-6 rounded-full font-secondary",children:"Verify"})]})]})};var j=s(423);const y=()=>{const{user:e}=(0,t.J)(),a=(0,h.d)(),{closeModal:s}=(0,f.h)(),{formData:r,currentStep:o,goToNextStep:i,handleChange:m,handleSubmit:p}=(0,v.A)({email:e.email},(async e=>{try{const{email:s}=e;if(!(0,d.xd)(s).success)return void a.error("Enter a valid email");const l=await(0,c.Ix)(s);null!==l&&void 0!==l&&l.status&&i()}catch(t){if(console.log(t),null!==t&&void 0!==t&&t.response)if(t.response){var s,l;a.error(null===(s=t.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)}else a.error("Server issues!!!");else a.error("no server response")}}),[1,2]);return(0,u.jsxs)("div",{className:"size-[520px] max-sm:w-svw max-sm:h-svh shadow-primary bg-white sm:border sm:border-primary sm:rounded-3xl p-10 max-sm:p-6",children:[1===o&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{className:"capitalize text-2xl font-semibold text-center mt-8 mb-24",children:"edit your email"}),(0,u.jsxs)("form",{onSubmit:p,children:[(0,u.jsx)(n.A,{label:"Enter email address",name:"email",type:"email",value:r.email,onChange:m,validation:d.xd,align:!0}),(0,u.jsx)(l.A,{className:"w-full py-2 px-6 rounded-full font-secondary mt-16",children:"update"})]})]}),2===o&&(0,u.jsx)(g,{formData:r}),(0,u.jsx)("button",{onClick:s,className:"absolute top-4 right-4 border border-primary rounded-full p-1",children:(0,u.jsx)(j.WQq,{size:24,className:"text-primary"})})]})},N=()=>{const[e,a]=(0,m.useState)(!0),[s,v]=(0,m.useState)(null),{openModal:b}=(0,f.h)(),g=(0,h.d)(),{user:j}=(0,t.J)(),{formData:N,handleChange:w,handleSubmit:C}=(0,i.A)({fullName:j.fullName,phone:j.phone,email:j.email,gender:j.gender},(async e=>{try{const{fullName:s,gender:l}=e,t=e.avatar;let r=null;if(t&&(r=t[0]),!(0,d.wJ)(s).success)return void console.log((0,d.wJ)(s).message);const n=await(0,c.DG)({fullName:s,gender:l,avatar:r});null!==n&&void 0!==n&&n.status&&(console.log(n.data),g.success("User data updated successfully"),a(!0))}catch(t){if(null!==t&&void 0!==t&&t.response)if(t.response){var s,l;console.log(null===(s=t.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)}else console.log("Server issues!!!");else console.log("no server response")}}));return(0,u.jsx)(r.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,u.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,u.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Personal Information"}),(0,u.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,u.jsxs)("div",{className:"USER-AVATAR relative size-24 rounded-full mx-auto",children:[(0,u.jsx)("img",{src:s||j.imgUrl,alt:j.fullName,loading:"lazy",className:"size-full rounded-full object-cover object-center"}),!e&&(0,u.jsx)("div",{className:"absolute bottom-0 right-0 rounded-full p-1 bg-white",children:(0,u.jsx)(p,{name:"avatar",onChange:e=>{const a=e.target.files[0];v(a?URL.createObjectURL(a):null),w(e)},className:"p-1 bg-success rounded-full",children:(0,u.jsx)(x._51,{className:"text-xs text-white"})})})]}),(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,u.jsx)(n.A,{label:"name",name:"fullName",value:N.fullName,onChange:w,validation:d.wJ,readOnly:e})}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,u.jsxs)("div",{className:"w-full flex items-end gap-x-2",children:[(0,u.jsx)(n.A,{type:"email",label:"email",name:"email",value:N.email,onChange:w,validation:d.xd,readOnly:!0,containerClassName:"flex-col gap-2 flex-grow"}),(0,u.jsx)(l.A,{type:"button",reverse:!0,onClick:()=>b((0,u.jsx)(y,{})),className:"size-[34px] flex items-center justify-center rounded-md",children:(0,u.jsx)(x.Yvo,{})})]}),(0,u.jsxs)("div",{className:"flex items-end gap-x-2",children:[(0,u.jsx)(n.A,{type:"tel",label:"phone",name:"phone",value:N.phone,onChange:w,validation:d.ri,readOnly:!0,containerClassName:"flex-col gap-2 flex-grow"}),(0,u.jsx)(l.A,{type:"button",reverse:!0,className:"size-[34px] flex items-center justify-center rounded-md",children:(0,u.jsx)(x.Yvo,{})})]})]}),(0,u.jsxs)("div",{className:"flex space-x-4",children:[(0,u.jsx)("p",{className:"text-sm font-medium",children:"Gender"}),(0,u.jsx)(o.A,{label:"male",name:"gender",value:"male",checked:"male"===N.gender,onChange:w,disabled:e}),(0,u.jsx)(o.A,{label:"female",name:"gender",value:"female",checked:"female"===N.gender,onChange:w,disabled:e}),(0,u.jsx)(o.A,{label:"others",name:"gender",value:"others",checked:"others"===N.gender,onChange:w,disabled:e})]}),(0,u.jsx)("div",{className:"BUTTON-SECTION mt-6 flex space-x-4",children:e?(0,u.jsx)("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 rounded-md bg-warning text-sm font-medium border border-transparent",children:"Edit"}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.A,{children:"save"}),(0,u.jsx)(l.A,{type:"button",onClick:()=>a(!0),reverse:!0,children:"cancel"})]})})]})]})})}}}]);
//# sourceMappingURL=428.66d7c714.chunk.js.map