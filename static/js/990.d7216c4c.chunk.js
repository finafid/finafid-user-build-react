"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[990],{9966:(e,s,t)=>{t.d(s,{Kv:()=>n,Vd:()=>l,dz:()=>i,fS:()=>c,p:()=>d});var a=t(5178),r=t(5026);const l=()=>{const e=(0,a.Ri)("accessToken");return r.A.get("/getOrderDetails",{headers:{authorization:`Bearer ${e}`}})},d=e=>{const s=(0,a.Ri)("accessToken");return r.A.get(`/getOrderById/${e}`,{headers:{authorization:`Bearer ${s}`}})},c=(e,s,t,l)=>{const d=(0,a.Ri)("accessToken");return r.A.post("/placeOrder",{orderItem:e,address:s,...t,payment_method:l},{headers:{authorization:`Bearer ${d}`,"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}})},n=(e,s)=>{const t=(0,a.Ri)("accessToken");return r.A.post(`/updateStatus/${e}`,{status:s},{headers:{authorization:`Bearer ${t}`,"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}})},i=e=>r.A.get(`/orderStatusDetails/${e}`)},3907:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(579);const r=e=>{let{children:s,type:t="submit",className:r="px-4 py-2 rounded-md",onClick:l,disabled:d=!1,reverse:c=!1}=e;return c?(0,a.jsx)("button",{type:t,onClick:l,disabled:d,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:s}):(0,a.jsx)("button",{type:t,onClick:l,disabled:d,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:s})}},8606:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(5043),r=t(9966);const l=e=>{const[s,t]=(0,a.useState)([]),[l,d]=(0,a.useState)(null),[c,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),u=(0,a.useCallback)((async()=>{if(!e){o(!0),m(null);try{const e=await(0,r.Vd)();null!==e&&void 0!==e&&e.status&&(console.log(e.data),t(e.data))}catch(x){console.error("Error fetching orders",x),m("Failed to fetch orders. Please try again.")}finally{o(!1)}}}),[e]),p=(0,a.useCallback)((async()=>{if(e){o(!0),m(null);try{const s=await(0,r.p)(e);null!==s&&void 0!==s&&s.status&&(console.log(s.data),d(s.data))}catch(x){console.error("Error fetching order details",x),m("Failed to fetch order details. Please try again.")}finally{o(!1)}}}),[e]),h=(0,a.useCallback)((async()=>{if(e){o(!0),m(null);try{const s=await(0,r.dz)(e);s.status&&(console.log(s.data),n(s.data.statusDetails.orderStatusDetails))}catch(x){console.error("Error fetching status history",x),m("Failed to fetch status history. Please try again.")}finally{o(!1)}}}),[e]);return(0,a.useEffect)((()=>{u()}),[u]),(0,a.useEffect)((()=>{p()}),[p]),(0,a.useEffect)((()=>{h()}),[h]),{orders:s,order:l,statusHistory:c,loading:i,error:x}}},990:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(5200),r=t(5475),l=t(579);const d=e=>{let{order:s}=e;return(0,l.jsxs)("div",{className:"DETAILS ",children:[(0,l.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Item Ordered :"}),(0,l.jsxs)("div",{className:"w-full border border-black rounded-lg overflow-x-auto",children:[(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-lightGray font-secondary",children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"SL."}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"Product"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"SKU"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"QTY"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Price"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Discount"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Total"})]})}),(0,l.jsx)("tbody",{children:s.orderItem.map(((e,s)=>{var t,a,d,c,n,i,o,x,m,u;return(0,l.jsxs)("tr",{className:"border-b-2 border-primary",children:[(0,l.jsx)("td",{className:"px-6",children:s+1}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.productId?(0,l.jsxs)(r.N_,{to:`/product/${null===(t=e.productId)||void 0===t?void 0:t._id}`,className:"PRODUCT-MAIN flex gap-4",children:[(0,l.jsx)("div",{className:"size-16",children:(0,l.jsx)("img",{src:null===e||void 0===e||null===(a=e.productId)||void 0===a?void 0:a.images[0],alt:null===e||void 0===e||null===(d=e.productId)||void 0===d||null===(c=d.productGroup)||void 0===c?void 0:c.name,className:"size-full object-cover object-center"})}),(0,l.jsxs)("div",{className:"text-xs",children:[(0,l.jsx)("h3",{className:"font-medium",children:null===(n=e.productId)||void 0===n?void 0:n.name}),(0,l.jsx)("p",{children:"Size: XS"}),(0,l.jsx)("p",{children:"Color: White"})]})]}):(0,l.jsx)("div",{className:"size-16 bg-lightGray flex items-center justify-center text-primary rounded text-xs text-center",children:"Invalid Product"})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:(0,l.jsx)("p",{className:"text-sm",children:null===(i=e.productId)||void 0===i?void 0:i.sku})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:(0,l.jsx)("p",{className:"text-sm",children:e.itemQuantity})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,l.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(o=e.productId)||void 0===o?void 0:o.unitPrice)*e.itemQuantity]})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,l.jsxs)("p",{className:"text-sm",children:["\u20b9"," ",((null===(x=e.productId)||void 0===x?void 0:x.unitPrice)-(null===(m=e.productId)||void 0===m?void 0:m.sellingPrice))*e.itemQuantity]})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,l.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(u=e.productId)||void 0===u?void 0:u.sellingPrice)*e.itemQuantity]})})]},s)}))})]}),(0,l.jsxs)("ul",{className:"TABLE-FOOTER space-y-1 ml-auto w-80 px-12 py-2 text-sm",children:[(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Subtotal"}),(0,l.jsxs)("p",{children:["\u20b9 ",s.subtotal]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Discount"}),(0,l.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.discount]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Coupon Discount"}),(0,l.jsx)("p",{children:"\u20b9 0"})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Utsav Discount"}),(0,l.jsx)("p",{children:"\u20b9 0"})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"GST (incl)"}),(0,l.jsxs)("p",{className:"text-primary",children:["\u20b9 ",s.tax.toFixed(2)]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Shipping"}),(0,l.jsx)("p",{children:"\u20b9 0"})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-6 text-base font-medium",children:[(0,l.jsx)("p",{children:"Total"}),(0,l.jsxs)("p",{children:["\u20b9 ",s.totalPrice]})]})]})]})]})};var c=t(5043),n=t(9888),i=t(1291),o=t(3512);const x=["Confirmed","Shipping","Out For delivery","Delivered"],m=e=>{let{currentStatus:s,statusHistory:t}=e;const a=(0,o.A)("(min-width: 768px)"),r=t.sort(((e,s)=>n.A7.indexOf(e.status)-n.A7.indexOf(s.status))),d=x.map((e=>r.find((s=>s.status===e))||{status:e,date:null,_id:`placeholder-${e}`})),m=d.findIndex((e=>e.status===s));return(0,l.jsxs)("div",{className:"relative border border-black rounded-lg",children:[(0,l.jsx)("div",{className:"PROGRESS-BAR px-16 pt-8 pb-16 max-md:p-8 flex max-md:flex-col justify-between md:items-center border-b border-black",children:d.map(((e,t)=>(0,l.jsxs)(c.Fragment,{children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"size-6 border-3 rounded-full flex justify-center items-center "+(t<=m&&e.date?"border-primeRed":"border-darkGray"),children:t<=m&&e.date&&(0,l.jsx)("span",{className:"block size-4 bg-primeRed rounded-full"})}),(0,l.jsxs)("div",{className:"absolute md:mt-1 md:left-1/2 md:-translate-x-1/2 max-md:top-1/2 max-md:left-10 max-md:-translate-y-1/2 w-max text-sm md:text-center font-medium",children:[(0,l.jsx)("p",{className:"first-letter:uppercase "+(t<=m&&e.date?"text-primeRed":"text-primary"),children:e.status}),(0,l.jsx)("p",{children:e.date?(0,i.Y)(new Date(e.date)):""})]}),e.status===s&&a?(0,l.jsx)("span",{className:"absolute size-5 left-1/2 -translate-x-1/2 top-[78px] rotate-45 bg-white border-t border-l border-black"}):null]}),t!==d.length-1&&(0,l.jsx)("div",{className:"relative md:h-[3px] md:w-full max-md:w-[3px] max-md:h-24 max-md:left-[10px] bg-darkGray overflow-hidden",children:t<m&&e.date&&(0,l.jsx)("span",{className:"absolute md:h-[3px] md:w-full max-md:w-[3px] max-md:h-full bg-primeRed transition-transform duration-500 ease-out origin-left"})})]},e._id)))}),-1!==m&&(0,l.jsxs)("div",{className:"PROGRESS-DETAILS px-12 max-md:px-8 py-3 max-md:py-2 flex items-center gap-12",children:[(0,l.jsxs)("div",{className:"font-semibold font-secondary text-center",children:[(0,l.jsx)("p",{className:"text-3xl",children:new Date(d[m].date).getDate()}),(0,l.jsx)("p",{children:new Date(d[m].date).toLocaleString("default",{month:"short"}).toUpperCase()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:`Order is ${s.toLowerCase()}`}),(0,l.jsx)("p",{className:"text-sm text-primary",children:(0,i.f)(new Date(d[m].date))})]})]})]})},u=e=>{let{statusHistory:s,currentStatus:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Tracking Order :"}),(0,l.jsx)(m,{currentStatus:t,statusHistory:s})]})})};var p=t(3216),h=t(8606),f=t(3907);const j=()=>{const{orderId:e}=(0,p.g)(),{order:s,loading:t,error:r,statusHistory:c}=(0,h.A)(e);return t?(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:"Loading..."})}):r?(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:r.message})}):s&&(0,l.jsxs)("main",{className:"container max-w-full py-8 px-32 max-xl:px-16 max-lg:px-8 max-md:px-4 space-y-4",children:[(0,l.jsxs)("section",{className:"TOP-HEAD",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("h2",{className:"font-secondary font-semibold text-3xl",children:"Order Details"}),(0,l.jsx)("span",{className:`px-3 py-1 rounded-full ${(0,n.xn)(s.status)}`,children:(0,l.jsx)("p",{className:"text-xs text-white font-medium",children:s.status.toUpperCase()})})]}),(0,l.jsxs)("p",{className:"font-medium text-secondary font-secondary",children:["Order placed on ",(0,i.Y)(new Date(s.createdAt))]})]}),(0,l.jsx)(f.A,{type:"button",reverse:!0,className:"px-4 py-2 rounded-full ml-auto",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(a.a4x,{size:18}),(0,l.jsx)("p",{className:"font-medium",children:"INVOICE"})]})}),(0,l.jsx)(d,{order:s}),(0,l.jsx)(u,{statusHistory:c,currentStatus:s.status})]})}},1291:(e,s,t)=>{t.d(s,{Y:()=>a,f:()=>r});const a=e=>{const s=e.getDate(),t=e.toLocaleString("default",{month:"long"}),a=e.getFullYear();return`${s}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(s)} ${t}, ${a}`},r=e=>e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}}]);
//# sourceMappingURL=990.d7216c4c.chunk.js.map