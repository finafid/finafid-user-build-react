"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[7582],{9966:(e,t,s)=>{s.d(t,{Kv:()=>d,Vd:()=>l,dz:()=>o,fS:()=>i,p:()=>n});var a=s(5178),r=s(5026);const l=()=>{const e=(0,a.Ri)("accessToken");return r.A.get("/getOrderDetails",{headers:{authorization:`Bearer ${e}`}})},n=e=>{const t=(0,a.Ri)("accessToken");return r.A.get(`/getOrderById/${e}`,{headers:{authorization:`Bearer ${t}`}})},i=(e,t,s,l)=>{const n=(0,a.Ri)("accessToken");return r.A.post("/placeOrder",{orderItem:e,address:t,...s,payment_method:l},{headers:{authorization:`Bearer ${n}`,"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}})},d=(e,t)=>{const s=(0,a.Ri)("accessToken");return r.A.post(`/updateStatus/${e}`,{status:t},{headers:{authorization:`Bearer ${s}`,"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}})},o=e=>r.A.get(`/orderStatusDetails/${e}`)},3907:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(579);const r=e=>{let{children:t,type:s="submit",className:r="px-4 py-2 rounded-md",onClick:l,disabled:n=!1,reverse:i=!1}=e;return i?(0,a.jsx)("button",{type:s,onClick:l,disabled:n,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:t}):(0,a.jsx)("button",{type:s,onClick:l,disabled:n,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${r}`,children:t})}},5609:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(5200),r=s(5043);const l="...",n=(e,t)=>{let s=t-e+1;return Array.from({length:s},((t,s)=>s+e))};var i=s(579);const d=e=>{let{onPageChange:t,totalCount:s,siblingCount:d=1,currentPage:o,pageSize:c}=e;const u=(e=>{let{totalCount:t,limit:s,siblingCount:a=1,currentPage:i}=e;return(0,r.useMemo)((()=>{const e=Math.ceil(t/s);if(a+5>=e)return n(1,e);const r=Math.max(i-a,1),d=Math.min(i+a,e),o=r>2,c=d<e-2,u=e;if(!o&&c)return[...n(1,3+2*a),l,e];if(o&&!c){let t=n(e-(3+2*a)+1,e);return[1,l,...t]}if(o&&c){let e=n(r,d);return[1,l,...e,l,u]}}),[t,s,a,i])})({currentPage:o,totalCount:s,siblingCount:d,limit:c}),x=u[u.length-1];if(0===o||u.length<2)return null;return(0,i.jsx)("div",{className:"my-8",children:(0,i.jsxs)("ul",{className:"relative flex gap-4 max-md:gap-3 w-max mx-auto",children:[u.map(((e,s)=>(0,i.jsxs)(r.Fragment,{children:[e===l&&(0,i.jsx)("li",{className:"relative h-max top-1",children:l}),e!==l&&(0,i.jsx)("li",{className:`size-10 max-lg:size-8 max-md:size-6 border border-black max-lg:text-sm max-md:text-xs flex justify-center items-center cursor-pointer transition-colors duration-200 ease-in-out ${e===o?"bg-primeRed text-white":"bg-white"} ${e!==o&&"hover:bg-mainGray"}`,onClick:()=>t(e),children:e})]},s))),(0,i.jsx)("button",{className:`absolute -left-10 top-1/2 -translate-y-1/2 ${o<=1&&"text-primary"}`,onClick:()=>{o<=1||t(o-1)},children:(0,i.jsx)(a.irw,{size:28})}),(0,i.jsx)("button",{className:`absolute -right-10 top-1/2 -translate-y-1/2 ${o>=x&&"text-primary"}`,onClick:()=>{o>=x||t(o+1)},children:(0,i.jsx)(a.fOo,{size:28})})]})})}},8606:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(5043),r=s(9966);const l=e=>{const[t,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(null),[i,d]=(0,a.useState)([]),[o,c]=(0,a.useState)(!1),[u,x]=(0,a.useState)(null),m=(0,a.useCallback)((async()=>{if(!e){c(!0),x(null);try{const e=await(0,r.Vd)();null!==e&&void 0!==e&&e.status&&(console.log(e.data),s(e.data))}catch(u){console.error("Error fetching orders",u),x("Failed to fetch orders. Please try again.")}finally{c(!1)}}}),[e]),h=(0,a.useCallback)((async()=>{if(e){c(!0),x(null);try{const t=await(0,r.p)(e);null!==t&&void 0!==t&&t.status&&(console.log(t.data),n(t.data))}catch(u){console.error("Error fetching order details",u),x("Failed to fetch order details. Please try again.")}finally{c(!1)}}}),[e]),f=(0,a.useCallback)((async()=>{if(e){c(!0),x(null);try{const t=await(0,r.dz)(e);t.status&&(console.log(t.data),d(t.data.statusDetails.orderStatusDetails))}catch(u){console.error("Error fetching status history",u),x("Failed to fetch status history. Please try again.")}finally{c(!1)}}}),[e]);return(0,a.useEffect)((()=>{m()}),[m]),(0,a.useEffect)((()=>{h()}),[h]),(0,a.useEffect)((()=>{f()}),[f]),{orders:t,order:l,statusHistory:i,loading:o,error:u}}},3661:(e,t,s)=>{s.d(t,{D:()=>l});var a=s(5475),r=s(5043);function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[l,n]=(0,a.ok)(),i=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(!i.current){if(!l.has(e)&&void 0!==t){const s=new URLSearchParams(l);s.set(e,t),n(s,{replace:!0})}i.current=!0}}),[l,e,t,n]);const d=l.get(e);return[null!==d&&void 0!==d?d:t,t=>{const a=new URLSearchParams(l);null!==t&&void 0!==t?a.set(e,t):a.delete(e);l.toString()!==a.toString()&&n(a,{replace:s})}]}},7582:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(6040),r=s(8606),l=s(5043),n=s(9888),i=s(3907),d=s(3216),o=s(5475),c=s(1291),u=s(579);const x=e=>{let{order:t}=e;const s=(0,d.Zp)();return(0,u.jsx)("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full border",children:(0,u.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,u.jsxs)("div",{className:"CARD-HEAD w-max flex items-center justify-between gap-2",children:[(0,u.jsx)("span",{className:`text-xxs text-white px-2 py-1 leading-none rounded-full ${(0,n.xn)(t.status)}`,children:t.status}),(0,u.jsx)("span",{className:"text-gray-600 text-sm",children:(0,c.Y)(new Date(t.updatedAt))})]}),(0,u.jsxs)("div",{className:"CARD-BODY flex max-lg:flex-col justify-between gap-4",children:[(0,u.jsxs)("div",{className:"ORDER-ITEMS w-full flex max-lg:flex-col gap-4",children:[null===t||void 0===t?void 0:t.orderItem.slice(0,1).map(((e,s)=>{var a,r,l,n,i,d;return(0,u.jsxs)("div",{className:"PRODUCT-MAIN flex gap-2 flex-grow",children:[(0,u.jsxs)(o.N_,{to:`/order/${t._id}`,className:"flex-shrink-0",children:[e.productId?(0,u.jsx)("img",{src:null===(a=e.productId)||void 0===a?void 0:a.images[0],alt:null===(r=e.productId)||void 0===r||null===(l=r.productGroup)||void 0===l?void 0:l.name,loading:"lazy",className:"size-16 rounded"}):(0,u.jsx)("div",{className:"size-16 bg-lightGray flex items-center justify-center text-primary rounded text-xs text-center",children:"Invalid Product"}),(null===t||void 0===t?void 0:t.orderItem.length)>1&&(0,u.jsxs)("p",{className:"text-xs text-center font-medium",children:["+",t.orderItem.length-1," more"]})]}),(0,u.jsxs)("div",{className:"text-sm",children:[(0,u.jsx)("h3",{className:"font-medium",children:null===(n=e.productId)||void 0===n?void 0:n.name}),(null===e||void 0===e||null===(i=e.productId)||void 0===i?void 0:i.attributes)&&Object.keys(null===e||void 0===e||null===(d=e.productId)||void 0===d?void 0:d.attributes).slice(0,3).map((t=>{var s;return(0,u.jsxs)("p",{index:t,className:"capitalize",children:[t,": ",null===e||void 0===e||null===(s=e.productId)||void 0===s?void 0:s.attributes[t]]})}))]})]},s)})),(0,u.jsxs)("div",{className:"text-sm font-medium 2xl:w-80 xl:w-60 lg:w-40 flex-shrink-0",children:[(0,u.jsx)("h2",{children:"Expected delivery on Monday, 12th March"}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("p",{children:"Order date :"}),(0,u.jsx)("p",{children:(0,c.Y)(new Date(t.createdAt))})]}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("p",{children:"Total :"}),(0,u.jsxs)("p",{children:["\u20b9 ",t.totalPrice]})]})]})]}),(0,u.jsxs)("div",{className:"BUTTONS-SECTION flex flex-col gap-y-2 flex-shrink-0",children:[(0,u.jsx)(i.A,{children:"Track order"}),(0,u.jsx)(i.A,{reverse:!0,onClick:()=>s(`/order/${t._id}`),children:"View order details"}),(0,u.jsxs)("div",{className:"flex lg:flex-col justify-around items-center",children:[(0,u.jsx)("button",{className:"text-blue-500 text-sm px-4 py-2",children:"Get invoice"}),(0,u.jsx)("button",{className:"text-blue-500 text-sm px-4 py-2",children:"Edit address"})]})]})]})]})})};var m=s(3661);const h=()=>{const e=(0,d.Zp)();return(0,u.jsxs)("div",{className:"space-y-6",children:[(0,u.jsx)("h4",{className:"text-lg font-secondary font-medium text-center",children:"No order placed"}),(0,u.jsx)("ul",{className:"flex justify-center gap-4",children:Array.from({length:3}).map(((e,t)=>(0,u.jsx)("li",{className:"size-40 max-lg:size-30 max-sm:size-20 bg-mainGray"},t)))}),(0,u.jsx)(i.A,{onClick:()=>e("/wishlist"),className:"px-6 py-3 rounded-full text-lg mx-auto",children:"GO TO WISHLIST"})]})};var f=s(5609);const g=()=>{const{orders:e,loading:t,error:s}=(0,r.A)(),[n,i]=(0,m.D)("page",1),d=(0,l.useMemo)((()=>{const t=5*(n-1),s=t+5;return e.slice(t,s)}),[n,e]);return t?(0,u.jsx)("div",{className:"w-full",children:(0,u.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:"Loading..."})}):s?(0,u.jsx)("div",{className:"w-full",children:(0,u.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:s.message})}):(0,u.jsx)(a.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,u.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,u.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"My Orders"}),0===e.length?(0,u.jsx)(h,{}):(0,u.jsxs)("div",{className:"space-y-4",children:[d.map((e=>(0,u.jsx)(x,{order:e},e._id))),(0,u.jsx)(f.A,{currentPage:parseInt(n,10),totalCount:e.length,pageSize:5,onPageChange:e=>i(e.toString())})]})]})})}},1291:(e,t,s)=>{s.d(t,{Y:()=>a,f:()=>r});const a=e=>{const t=e.getDate(),s=e.toLocaleString("default",{month:"long"}),a=e.getFullYear();return`${t}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(t)} ${s}, ${a}`},r=e=>e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}}]);
//# sourceMappingURL=7582.d6fa3fc1.chunk.js.map