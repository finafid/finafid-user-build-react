"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[9300],{3907:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(579);const n=e=>{let{children:t,type:s="submit",className:n="px-4 py-2 rounded-md",onClick:r,disabled:i=!1,reverse:l=!1}=e;return l?(0,a.jsx)("button",{type:s,onClick:r,disabled:i,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${n}`,children:t}):(0,a.jsx)("button",{type:s,onClick:r,disabled:i,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${n}`,children:t})}},1940:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(5043),n=s(5200),r=s(9804),i=s(579);const l=e=>{let{value:t="",onChange:s,name:l,label:o,type:c,placeholder:d,align:u=!1,disabled:m=!1,readOnly:h=!1,min:p=0,max:x=1/0,autoComplete:b,autoCorrect:f,order:g,required:y=!1,className:v="w-full px-4 py-2 rounded-md text-xs border border-secondary bg-offWhite",labelClassName:j="capitalize text-sm font-medium",containerClassName:N="flex-col gap-2",validation:w}=e;const C=null===o||void 0===o?void 0:o.replace(" ","-").toLowerCase(),[k,R]=(0,a.useState)(!1),[A,M]=(0,a.useState)(null);return(0,i.jsxs)("div",{className:`relative flex ${N}`,children:[o&&(0,i.jsx)("label",{htmlFor:C,className:`${j}`,style:u?{textAlign:"center"}:{},children:o}),"file"!==c&&(0,i.jsx)("input",{id:C,type:k?"text":c,name:l,value:t,placeholder:d||o,onChange:s,onBlur:()=>{w&&(w(t).success?w(t).success&&M(null):M(w(t).message))},onWheel:e=>e.target.blur(),required:y,disabled:m,readOnly:h,min:"number"===c?p:void 0,max:"number"===c?x:void 0,className:`outline-none placeholder:capitalize read-only:bg-white read-only:cursor-default ${"number"===c&&"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"} ${m&&"opacity-50"} ${v}`}),A&&(0,i.jsxs)("div",{className:"absolute top-full w-full p-1 flex items-start gap-1 text-error z-[1] bg-white rounded",children:[(0,i.jsx)(r.U0v,{size:12}),(0,i.jsx)("p",{className:"text-xxs leading-tight",children:A})]}),"password"===c&&(0,i.jsx)("button",{type:"button",onClick:()=>{R(!k)},className:"absolute right-4 bottom-3 text-secondary text-sm",children:k?(0,i.jsx)(n.Vap,{}):(0,i.jsx)(n._NO,{})})]})}},4412:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(6040),n=s(579);const r=()=>{const e=Array.from({length:12});return(0,n.jsx)("div",{className:"relative size-20 flex-shrink-0",children:e.map(((e,t)=>{const s=-.1*t,r=30*t*(Math.PI/180),i=28*Math.cos(r),l=28*Math.sin(r);return(0,n.jsx)(a.P.div,{className:"absolute size-1.5 bg-primeRed rounded-full",style:{top:"50%",left:"50%",translateX:"-50%",translateY:"-50%",x:i,y:l},initial:{scale:1},animate:{scale:[1,1.5,1]},transition:{duration:1.2,repeat:1/0,ease:"linear",delay:s}},t)}))})}},8514:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(5043),n=s(579);const r=e=>{let{value:t="",onChange:s,name:r,label:i,align:l=!1,autoComplete:o,autoCorrect:c,order:d,maxLength:u,placeholder:m,required:h=!1,rows:p=5,className:x="w-full px-4 py-2 rounded-md text-xs resize-none border border-secondary bg-offWhite",labelClassName:b="capitalize text-sm font-medium",containerClassName:f="gap-2"}=e;const g=null===i||void 0===i?void 0:i.replace(" ","-").toLowerCase(),[y,v]=(0,a.useState)(0);return(0,n.jsxs)("div",{className:"relative flex flex-col"+" ".concat(f),children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[i&&(0,n.jsx)("label",{htmlFor:g,className:`${b}`,style:l?{textAlign:"center"}:{},children:i}),u&&(0,n.jsxs)("p",{className:"font-medium font-secondary text-sm",children:[y,"/",u]})]}),(0,n.jsx)("textarea",{id:g,name:r,value:t,placeholder:m||i,onChange:e=>{const{value:t}=e.target;v(t.length),s(e)},required:h,maxLength:u,rows:p,className:" outline-none placeholder:capitalize"+" ".concat(x.toString())})]})}},5962:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(5043);function n(e,t){const[s,n]=(0,a.useState)(e);return{formData:s,setFormData:n,handleChange:e=>{const{name:t,value:a,type:r,files:i,checked:l}=e.target;n("file"===r?{...s,[t]:i}:"checkbox"===r?{...s,[t]:l}:{...s,[t]:a})},handleSubmit:e=>{e.preventDefault(),t(s)},clearForm:()=>n(e)}}},9300:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(5043),n=s(3907),r=s(1940),i=s(8514),l=s(5962),o=s(9659),c=s(9060),d=s(2614),u=s(6040),m=s(3216),h=s(2925),p=s(4412),x=s(579);const b=e=>{let{amount:t,isActive:s=!1,onClick:a}=e;return(0,x.jsxs)("button",{type:"button",onClick:a,className:"w-16 h-7 border border-primeRed rounded-md flex items-center justify-center gap-1 p-1 text-sm font-secondary font-medium text-primeRed "+(s?"bg-lightGray":"bg-white"),children:[(0,x.jsx)("span",{children:"\u20b9"}),(0,x.jsx)("p",{children:t})]})},f=()=>{const e=(0,m.Zp)(),t=(0,h.d)(),{user:s}=(0,o.J)(),{getBalance:f}=(0,c.v)(),{data:g=[],isLoading:y,error:v}=(0,d.Fx)(),j=(0,d.aQ)(),[N,w]=(0,a.useState)(null),[C,k]=(0,a.useState)(null),[R,A]=(0,a.useState)(null),{formData:M,handleChange:O,handleSubmit:S,clearForm:E}=(0,l.A)({},(async s=>{const{recipientName:a,recipientEmail:n,recipientPhone:r,message:i}=s,l=[];if(C||N||l.push("Please select an amount"),R||l.push("Please select a gift card template"),l.length>0)return void l.forEach((e=>t.error(e)));const o={value:N||C,Recipient_Information:{name:a,email:n,phoneNumber:r},templateId:R._id,message:i};j.mutate(o,{onSuccess:async()=>{await f(),t.success("Gift card created successfully"),e("/account/gift-card"),E()},onError:e=>{var s,a;console.error(e),t.error(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)}})}));return(0,x.jsx)(u.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,x.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,x.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Create Gift Card"}),(0,x.jsxs)("section",{className:"flex justify-center flex-wrap gap-8",children:[(0,x.jsxs)("div",{className:"LEFT space-y-4",children:[(0,x.jsx)("div",{className:"w-80 h-48 bg-lightGray rounded-md flex justify-center items-center overflow-hidden",children:R?(0,x.jsx)("img",{src:R.template,alt:R.title,className:"size-full"}):(0,x.jsx)("p",{className:"text-primary",children:"No template selected"})}),(0,x.jsxs)("div",{className:"w-80 bg-white rounded-md border border-secondary p-4 text-sm space-y-2 overflow-x-hidden",children:[(0,x.jsxs)("p",{children:["From: ",s.fullName]}),(0,x.jsxs)("p",{children:["To: ",M.recipientName]}),(0,x.jsxs)("p",{children:["Expires: ",(new Date).toLocaleDateString()]}),(0,x.jsx)("p",{children:M.message||"Enjoy this gift card on Finafid.com!"})]})]}),(0,x.jsxs)("div",{className:"RIGHT flex-grow space-y-4",children:[(0,x.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Choose a design"}),(0,x.jsx)("div",{className:"GIFT-CARDS-CONTAINER w-full min-h-20 max-h-52 overflow-y-scroll",children:(0,x.jsx)("ul",{className:"flex gap-4 flex-wrap p-1",children:y?(0,x.jsx)("div",{className:"w-full flex justify-center",children:(0,x.jsx)(p.A,{})}):v?(0,x.jsx)("p",{className:"w-full text-center text-primary",children:"templatesError.message"}):0===g.length?(0,x.jsx)("p",{className:"w-full text-center text-primary",children:"No Templates available."}):g.map(((e,t)=>(0,x.jsx)("li",{onClick:()=>A(e),className:`w-20 h-14 flex-shrink-0 ${R&&R._id===e._id&&"outline outline-primeRed"}`,children:(0,x.jsx)("img",{src:e.template,alt:e.title,className:"size-full"})},t)))})}),(0,x.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Choose an amount"}),(0,x.jsxs)("div",{className:"flex gap-4 flex-wrap items-center",children:[Array.from([1e3,2e3,3e3,4e3]).map(((e,t)=>(0,x.jsx)(b,{isActive:e===N,amount:e,onClick:()=>(e=>{k(null),w(e)})(e)},t))),(0,x.jsxs)("div",{className:"CUSTOM-AMOUNT",children:[(0,x.jsx)("p",{className:"text-[9px]",children:"Custom amount:"}),(0,x.jsxs)("div",{className:"w-20 h-7 flex border border-primeRed rounded-md bg-white overflow-hidden",children:[(0,x.jsx)("span",{className:"w-max h-full flex items-center justify-center text-sm text-primeRed px-2 border-r border-primeRed",children:"\u20b9"}),(0,x.jsx)("input",{type:"number",name:"customAmount",value:C||"",onChange:e=>{return t=e.target.value,k(t),void w(null);var t},className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none w-full px-2 text-sm font-secondary font-medium text-primeRed"})]}),(0,x.jsx)("p",{className:"text-[9px]",children:"(Maximum \u20b9 10,000)"})]})]}),(0,x.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Recipient Details"}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsx)("p",{className:"font-medium text-xs",children:"Enter the details"}),(0,x.jsxs)("form",{className:"space-y-3",onSubmit:S,children:[(0,x.jsx)(r.A,{type:"tel",name:"recipientPhone",value:M.recipientPhone,onChange:O,placeholder:"recipient mobile number",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"}),(0,x.jsx)(r.A,{type:"email",name:"recipientEmail",value:M.recipientEmail,onChange:O,placeholder:"recipient email",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"}),(0,x.jsx)(r.A,{type:"text",name:"recipientName",value:M.recipientName,onChange:O,placeholder:"recipient name",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"})]})]}),(0,x.jsx)("p",{className:"font-secondary font-medium",children:"Add an optional message"}),(0,x.jsx)("div",{children:(0,x.jsxs)("form",{onSubmit:S,children:[(0,x.jsx)(i.A,{name:"message",value:M.message,onChange:O,maxLength:150,placeholder:"Enter optional message",className:"resize-none h-36 text-sm placeholder:text-secondary border-b-2 border-dark"}),(0,x.jsx)(n.A,{disabled:j.isPending,className:"ml-auto mt-8 px-4 py-2 rounded-md font-secondary text-sm",children:"create"})]})})]})]})]})})}},2614:(e,t,s)=>{s.d(t,{aQ:()=>u,Fx:()=>m,Px:()=>d});var a=s(3747),n=s(3248),r=s(7097),i=s(5026);const l=async()=>(await i.A.get("/getGiftCardByUser")).data,o=async e=>(await i.A.post("/createGiftCard",e)).data,c=async()=>{var e;return null===(e=(await i.A.get("/getAllTemplates")).data)||void 0===e?void 0:e.allTemplates},d=()=>(0,a.I)({queryKey:["giftCards"],queryFn:l,staleTime:3e5}),u=()=>{const e=(0,n.jE)();return(0,r.n)({mutationFn:o,onSuccess:()=>{e.invalidateQueries(["giftCards"])}})},m=()=>(0,a.I)({queryKey:["giftCard-templates"],queryFn:c,staleTime:3e5})},7097:(e,t,s)=>{s.d(t,{n:()=>u});var a=s(5043),n=s(5239),r=s(1454),i=s(329),l=s(9723),o=class extends i.Q{#e;#t=void 0;#s;#a;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():"pending"===this.#s?.state.status&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#n(),this.#r()}mutate(e,t){return this.#a=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#n(){const e=this.#s?.state??(0,n.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#r(e){r.j.batch((()=>{if(this.#a&&this.hasListeners()){const t=this.#t.variables,s=this.#t.context;"success"===e?.type?(this.#a.onSuccess?.(e.data,t,s),this.#a.onSettled?.(e.data,null,t,s)):"error"===e?.type&&(this.#a.onError?.(e.error,t,s),this.#a.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach((e=>{e(this.#t)}))}))}},c=s(3248),d=s(3247);function u(e,t){const s=(0,c.jE)(t),[n]=a.useState((()=>new o(s,e)));a.useEffect((()=>{n.setOptions(e)}),[n,e]);const i=a.useSyncExternalStore(a.useCallback((e=>n.subscribe(r.j.batchCalls(e))),[n]),(()=>n.getCurrentResult()),(()=>n.getCurrentResult())),l=a.useCallback(((e,t)=>{n.mutate(e,t).catch(d.l)}),[n]);if(i.error&&(0,d.G)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:l,mutateAsync:i.mutate}}}}]);
//# sourceMappingURL=9300.0963921e.chunk.js.map