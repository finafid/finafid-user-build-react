"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[822],{9966:(e,s,t)=>{t.d(s,{It:()=>o,Kv:()=>i,N4:()=>c,Vd:()=>r,dz:()=>d,fS:()=>n,p:()=>l});var a=t(5026);const r=async()=>(await a.A.get("/getOrderDetails")).data,l=async e=>(await a.A.get(`/getOrderById/${e}`)).data,n=(e,s,t,r)=>a.A.post("/placeOrder",{orderItem:e,address:s,...t,payment_method:r},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),i=(e,s)=>a.A.post(`/updateStatus/${e}`,{status:s},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),d=async e=>{var s,t;return null===(s=(await a.A.get(`/orderStatusDetails/${e}`)).data)||void 0===s||null===(t=s.statusDetails)||void 0===t?void 0:t.orderStatusDetails},c=async e=>(await a.A.get(`/cancelDelivery/${e}`)).data,o=async e=>(await a.A.get(`/downloadInvoice/${e}`)).data},5609:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(5200),r=t(5043);const l="...",n=(e,s)=>{let t=s-e+1;return Array.from({length:t},((s,t)=>t+e))};var i=t(579);const d=e=>{let{onPageChange:s,totalCount:t,siblingCount:d=1,currentPage:c,pageSize:o}=e;const x=(e=>{let{totalCount:s,limit:t,siblingCount:a=1,currentPage:i}=e;return(0,r.useMemo)((()=>{const e=Math.ceil(s/t);if(a+5>=e)return n(1,e);const r=Math.max(i-a,1),d=Math.min(i+a,e),c=r>2,o=d<e-2,x=e;if(!c&&o)return[...n(1,3+2*a),l,e];if(c&&!o){let s=n(e-(3+2*a)+1,e);return[1,l,...s]}if(c&&o){let e=n(r,d);return[1,l,...e,l,x]}}),[s,t,a,i])})({currentPage:c,totalCount:t,siblingCount:d,limit:o}),u=x[x.length-1];if(0===c||x.length<2)return null;return(0,i.jsx)("div",{className:"my-8",children:(0,i.jsxs)("ul",{className:"relative flex gap-4 max-md:gap-3 w-max mx-auto",children:[x.map(((e,t)=>(0,i.jsxs)(r.Fragment,{children:[e===l&&(0,i.jsx)("li",{className:"relative h-max top-1",children:l}),e!==l&&(0,i.jsx)("li",{className:`size-10 max-lg:size-8 max-md:size-6 border border-black max-lg:text-sm max-md:text-xs flex justify-center items-center cursor-pointer transition-colors duration-200 ease-in-out ${e===c?"bg-primeRed text-white":"bg-white"} ${e!==c&&"hover:bg-mainGray"}`,onClick:()=>s(e),children:e})]},t))),(0,i.jsx)("button",{className:`absolute -left-10 top-1/2 -translate-y-1/2 ${c<=1&&"text-primary"}`,onClick:()=>{c<=1||s(c-1)},children:(0,i.jsx)(a.irw,{size:28})}),(0,i.jsx)("button",{className:`absolute -right-10 top-1/2 -translate-y-1/2 ${c>=u&&"text-primary"}`,onClick:()=>{c>=u||s(c+1)},children:(0,i.jsx)(a.fOo,{size:28})})]})})}},3661:(e,s,t)=>{t.d(s,{D:()=>l});var a=t(5475),r=t(5043);function l(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[l,n]=(0,a.ok)(),i=(0,r.useRef)(!1);(0,r.useEffect)((()=>{if(!i.current){if(!l.has(e)&&void 0!==s){const t=new URLSearchParams(l);t.set(e,s),n(t,{replace:!0})}i.current=!0}}),[l,e,s,n]);const d=l.get(e);return[null!==d&&void 0!==d?d:s,s=>{const a=new URLSearchParams(l);null!==s&&void 0!==s?a.set(e,s):a.delete(e);l.toString()!==a.toString()&&n(a,{replace:t})}]}},9822:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(6040),r=t(8361),l=t(5043),n=t(672),i=t(3907),d=t(3216),c=t(5475),o=t(1291),x=t(2925),u=t(3163),m=t(1462),h=t(579);const p=e=>{let{onClick:s}=e;const{closeModal:t}=(0,u.h)();return(0,h.jsxs)("div",{className:"sm:w-100 bg-white rounded-xl p-12 space-y-12",children:[(0,h.jsxs)("div",{className:"HEAD space-y-2",children:[(0,h.jsx)("span",{className:"block absolute right-1/2 translate-x-1/2 top-0 -translate-y-1/2 w-max bg-primeRed p-4 rounded-full text-white",children:(0,h.jsx)(m.ozG,{size:32})}),(0,h.jsx)("p",{className:"font-medium text-center",children:"Cancel Order"}),(0,h.jsx)("p",{className:"text-sm font-medium text-primary text-center",children:"Do you want to cancel this order?"})]}),(0,h.jsxs)("div",{className:"BTN-SECTION flex justify-center",children:[(0,h.jsx)(i.A,{onClick:s,className:"px-6 py-3 rounded-tl-md rounded-bl-md",children:"Yes, cancel order"}),(0,h.jsx)(i.A,{reverse:!0,onClick:()=>t(),className:"px-6 py-3 rounded-tr-md rounded-br-md",children:"close"})]})]})},f=e=>{let{order:s}=e;const t=(0,x.d)(),{openModal:a,closeModal:l}=(0,u.h)(),m=(0,d.Zp)(),f=(0,r.s8)(s._id),g=(0,r.JJ)(),v=()=>{f.mutate(s._id,{onSuccess:()=>{t.success("Order cancelled successfully!"),l()},onError:e=>{console.error(e.message),t.error("Unable to cancel order")}})};return(0,h.jsx)("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full border",children:(0,h.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,h.jsxs)("div",{className:"CARD-HEAD w-max flex items-center justify-between gap-2",children:[(0,h.jsx)("span",{className:`text-xxs text-white px-2 py-1 leading-none rounded-full ${(0,n.xn)(s.status)}`,children:s.status}),(0,h.jsx)("span",{className:"text-gray-600 text-sm",children:(0,o.Yq)(new Date(s.updatedAt))})]}),(0,h.jsxs)("div",{className:"CARD-BODY flex max-lg:flex-col justify-between gap-4",children:[(0,h.jsxs)("div",{className:"ORDER-ITEMS w-full flex max-lg:flex-col gap-4",children:[null===s||void 0===s?void 0:s.orderItem.slice(0,1).map(((e,t)=>{var a,r,l,n,i,d;return(0,h.jsxs)("div",{className:"PRODUCT-MAIN flex gap-2 flex-grow",children:[(0,h.jsxs)(c.N_,{to:`/order/${s._id}`,className:"flex-shrink-0",children:[e.productId?(0,h.jsx)("img",{src:null===(a=e.productId)||void 0===a?void 0:a.images[0],alt:null===(r=e.productId)||void 0===r||null===(l=r.productGroup)||void 0===l?void 0:l.name,loading:"lazy",className:"size-16 rounded"}):(0,h.jsx)("div",{className:"size-16 bg-lightGray flex items-center justify-center text-primary rounded text-xs text-center",children:"Invalid Product"}),(null===s||void 0===s?void 0:s.orderItem.length)>1&&(0,h.jsxs)("p",{className:"text-xs text-center font-medium",children:["+",s.orderItem.length-1," more"]})]}),(0,h.jsxs)("div",{className:"text-sm",children:[(0,h.jsx)("h3",{className:"font-medium",children:null===(n=e.productId)||void 0===n?void 0:n.name}),(null===e||void 0===e||null===(i=e.productId)||void 0===i?void 0:i.attributes)&&Object.keys(null===e||void 0===e||null===(d=e.productId)||void 0===d?void 0:d.attributes).slice(0,3).map((s=>{var t;return(0,h.jsxs)("p",{index:s,className:"capitalize",children:[s,": ",null===e||void 0===e||null===(t=e.productId)||void 0===t?void 0:t.attributes[s]]})}))]})]},t)})),(0,h.jsxs)("div",{className:"text-sm font-medium 2xl:w-80 xl:w-60 lg:w-40 flex-shrink-0",children:[(0,h.jsx)("h2",{children:"Expected delivery on Monday, 12th March"}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("p",{children:"Order date :"}),(0,h.jsx)("p",{children:(0,o.Yq)(new Date(s.createdAt))})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("p",{children:"Total :"}),(0,h.jsxs)("p",{children:["\u20b9 ",s.totalPrice]})]})]})]}),(0,h.jsxs)("div",{className:"BUTTONS-SECTION flex flex-col gap-y-2 flex-shrink-0",children:[(0,h.jsx)(i.A,{children:"Track order"}),(0,h.jsx)(i.A,{reverse:!0,onClick:()=>m(`/order/${s._id}`),children:"View order details"}),(0,h.jsxs)("div",{className:"flex lg:flex-col justify-around items-center",children:[(0,h.jsx)("button",{onClick:()=>{g.mutate(s._id,{onSuccess:e=>{const s=e.invoicePath;window.open(s,"_blank")},onError:e=>{console.error(e.message),t.error("This order is not shipped yet.")}})},className:"text-blue-500 text-sm px-4 py-2",children:"Get Invoice"}),(0,h.jsx)("button",{onClick:()=>a((0,h.jsx)(p,{onClick:v})),className:"text-blue-500 text-sm px-4 py-2",children:"Cancel Order"})]})]})]})]})})};var g=t(3661);const v=()=>{const e=(0,d.Zp)();return(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsx)("h4",{className:"text-lg font-secondary font-medium text-center",children:"No order placed"}),(0,h.jsx)("ul",{className:"flex justify-center gap-4",children:Array.from({length:3}).map(((e,s)=>(0,h.jsx)("li",{className:"size-40 max-lg:size-30 max-sm:size-20 bg-mainGray"},s)))}),(0,h.jsx)(i.A,{onClick:()=>e("/wishlist"),className:"px-6 py-3 rounded-full text-lg mx-auto",children:"GO TO WISHLIST"})]})};var j=t(5609);const y=()=>{const{data:e=[],isLoading:s,error:t}=(0,r.h)(),[n,i]=(0,g.D)("page",1),d=(0,l.useMemo)((()=>{const s=5*(n-1),t=s+5;return e.slice(s,t)}),[n,e]);return s?(0,h.jsx)("div",{className:"w-full",children:(0,h.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:"Loading..."})}):t?(0,h.jsx)("div",{className:"w-full",children:(0,h.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:t.message})}):(0,h.jsx)(a.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,h.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,h.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"My Orders"}),0===e.length?(0,h.jsx)(v,{}):(0,h.jsxs)("div",{className:"space-y-4",children:[d.map((e=>(0,h.jsx)(f,{order:e},e._id))),(0,h.jsx)(j.A,{currentPage:parseInt(n,10),totalCount:e.length,pageSize:5,onPageChange:e=>i(e.toString())})]})]})})}},8361:(e,s,t)=>{t.d(s,{JJ:()=>x,Yq:()=>c,h:()=>i,s8:()=>o,sJ:()=>d});var a=t(3747),r=t(3248),l=t(7097),n=t(9966);const i=()=>(0,a.I)({queryKey:["orders"],queryFn:n.Vd,staleTime:3e5}),d=e=>(0,a.I)({queryKey:["order",e],queryFn:()=>(0,n.p)(e),staleTime:3e5,enabled:!!e}),c=e=>(0,a.I)({queryKey:["orderStatus",e],queryFn:()=>(0,n.dz)(e),staleTime:3e5,enabled:!!e}),o=e=>{const s=(0,r.jE)();return(0,l.n)({mutationFn:n.N4,onSuccess:()=>{s.invalidateQueries(["orders"]),s.invalidateQueries(["order",e]),s.invalidateQueries(["orderStatus",e])}})},x=e=>{const s=(0,r.jE)();return(0,l.n)({mutationFn:n.It,onSuccess:()=>{s.invalidateQueries(["order",e])}})}}}]);
//# sourceMappingURL=822.4c99cf77.chunk.js.map