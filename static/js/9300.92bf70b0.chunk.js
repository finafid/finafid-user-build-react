"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[9300],{3907:(e,a,t)=>{t.d(a,{A:()=>l});var s=t(579);const l=e=>{let{children:a,type:t="submit",className:l="px-4 py-2 rounded-md",onClick:n,disabled:r=!1,reverse:i=!1}=e;return i?(0,s.jsx)("button",{type:t,onClick:n,disabled:r,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${l}`,children:a}):(0,s.jsx)("button",{type:t,onClick:n,disabled:r,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${l}`,children:a})}},1940:(e,a,t)=>{t.d(a,{A:()=>i});var s=t(5043),l=t(5200),n=t(9804),r=t(579);const i=e=>{let{value:a="",onChange:t,name:i,label:o,type:c,placeholder:d,align:m=!1,disabled:u=!1,readOnly:p=!1,min:x=0,max:h=1/0,autoComplete:f,autoCorrect:b,order:g,required:y=!1,className:N="w-full px-4 py-2 rounded-md text-xs border border-secondary bg-offWhite",labelClassName:j="capitalize text-sm font-medium",containerClassName:v="flex-col gap-2",validation:C}=e;const w=null===o||void 0===o?void 0:o.replace(" ","-").toLowerCase(),[k,S]=(0,s.useState)(!1),[A,R]=(0,s.useState)(null);return(0,r.jsxs)("div",{className:`relative flex ${v}`,children:[o&&(0,r.jsx)("label",{htmlFor:w,className:`${j}`,style:m?{textAlign:"center"}:{},children:o}),"file"!==c&&(0,r.jsx)("input",{id:w,type:k?"text":c,name:i,value:a,placeholder:d||o,onChange:t,onBlur:()=>{C&&(C(a).success?C(a).success&&R(null):R(C(a).message))},onWheel:e=>e.target.blur(),required:y,disabled:u,readOnly:p,min:"number"===c?x:void 0,max:"number"===c?h:void 0,className:`outline-none placeholder:capitalize read-only:bg-white read-only:cursor-default ${"number"===c&&"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"} ${u&&"opacity-50"} ${N}`}),A&&(0,r.jsxs)("div",{className:"absolute top-full w-full p-1 flex items-start gap-1 text-error z-[1] bg-white rounded",children:[(0,r.jsx)(n.U0v,{size:12}),(0,r.jsx)("p",{className:"text-xxs leading-tight",children:A})]}),"password"===c&&(0,r.jsx)("button",{type:"button",onClick:()=>{S(!k)},className:"absolute right-4 bottom-3 text-secondary text-sm",children:k?(0,r.jsx)(l.Vap,{}):(0,r.jsx)(l._NO,{})})]})}},8514:(e,a,t)=>{t.d(a,{A:()=>n});var s=t(5043),l=t(579);const n=e=>{let{value:a="",onChange:t,name:n,label:r,align:i=!1,autoComplete:o,autoCorrect:c,order:d,maxLength:m,placeholder:u,required:p=!1,rows:x=5,className:h="w-full px-4 py-2 rounded-md text-xs resize-none border border-secondary bg-offWhite",labelClassName:f="capitalize text-sm font-medium",containerClassName:b="gap-2"}=e;const g=null===r||void 0===r?void 0:r.replace(" ","-").toLowerCase(),[y,N]=(0,s.useState)(0);return(0,l.jsxs)("div",{className:"relative flex flex-col"+" ".concat(b),children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[r&&(0,l.jsx)("label",{htmlFor:g,className:`${f}`,style:i?{textAlign:"center"}:{},children:r}),m&&(0,l.jsxs)("p",{className:"font-medium font-secondary text-sm",children:[y,"/",m]})]}),(0,l.jsx)("textarea",{id:g,name:n,value:a,placeholder:u||r,onChange:e=>{const{value:a}=e.target;N(a.length),t(e)},required:p,maxLength:m,rows:x,className:" outline-none placeholder:capitalize"+" ".concat(h.toString())})]})}},5962:(e,a,t)=>{t.d(a,{A:()=>l});var s=t(5043);function l(e,a){const[t,l]=(0,s.useState)(e);return{formData:t,setFormData:l,handleChange:e=>{const{name:a,value:s,type:n,files:r,checked:i}=e.target;l("file"===n?{...t,[a]:r}:"checkbox"===n?{...t,[a]:i}:{...t,[a]:s})},handleSubmit:e=>{e.preventDefault(),a(t)},clearForm:()=>l(e)}}},8331:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(5043),l=t(5178),n=t(5026);const r=e=>{const[a,t]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)(null),u=(0,s.useCallback)((async()=>{c(!0),m(null);try{const e="giftCards",a=sessionStorage.getItem(e);if(a)t(JSON.parse(a));else{const a=await(()=>{const e=(0,l.Ri)("accessToken");return n.A.get("/getGiftCardByUser",{headers:{authorization:`Bearer ${e}`}})})();null!==a&&void 0!==a&&a.status&&(console.log(a.data),sessionStorage.setItem(e,JSON.stringify(a.data)),i(a.data))}}catch(d){console.error(d),m(d.message)}finally{c(!1)}}),[]),p=(0,s.useCallback)((async()=>{if(!e){c(!0),m(null);try{const e="giftCardTemplates",a=sessionStorage.getItem(e);if(a)i(JSON.parse(a));else{const a=await n.A.get("/getAllTemplates");null!==a&&void 0!==a&&a.status&&(console.log(a.data),sessionStorage.setItem(e,JSON.stringify(a.data.allTemplates)),i(a.data.allTemplates))}}catch(d){console.error(d),m(d.message)}finally{c(!1)}}}),[e]),x=(0,s.useCallback)((async e=>{c(!0),m(null);try{const a=await(e=>{const a=(0,l.Ri)("accessToken");return n.A.post("/createGiftCard",e,{headers:{authorization:`Bearer ${a}`}})})(e);null!==a&&void 0!==a&&a.status&&console.log(a.data)}catch(d){console.error(d),m(d.message)}finally{c(!1)}}),[]);return(0,s.useEffect)((()=>{u()}),[u]),(0,s.useEffect)((()=>{p()}),[p]),{giftCards:a,templates:r,addGiftCard:x,loading:o,error:d,refresh:u}}},9300:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var s=t(5043),l=t(3907),n=t(1940),r=t(8514),i=t(5962),o=t(9659),c=t(9060),d=t(8331),m=t(6040),u=t(3216),p=t(2925),x=t(579);const h=e=>{let{amount:a,isActive:t=!1,onClick:s}=e;return(0,x.jsxs)("button",{type:"button",onClick:s,className:"w-16 h-7 border border-primeRed rounded-md flex items-center justify-center gap-1 p-1 text-sm font-secondary font-medium text-primeRed "+(t?"bg-lightGray":"bg-white"),children:[(0,x.jsx)("span",{children:"\u20b9"}),(0,x.jsx)("p",{children:a})]})},f=()=>{const e=(0,u.Zp)(),a=(0,p.d)(),{user:t}=(0,o.J)(),{getBalance:f}=(0,c.v)(),{templates:b,addGiftCard:g}=(0,d.A)(),[y,N]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),[C,w]=(0,s.useState)(null),{formData:k,handleChange:S,handleSubmit:A,clearForm:R}=(0,i.A)({},(async t=>{const{recipientName:s,recipientEmail:l,recipientPhone:n,message:r}=t,i=[];if(j||y||i.push("Please select an amount"),C||i.push("Please select a gift card template"),i.length>0)return void i.forEach((e=>a.error(e)));const o={value:y||j,Recipient_Information:{name:s,email:l,phoneNumber:n},templateId:C._id,message:r};g(o).then((async()=>{await f(),R(),e("/account/gift-card")}))}));return(0,x.jsx)(m.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,x.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,x.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Create Gift Card"}),(0,x.jsxs)("section",{className:"flex justify-center flex-wrap gap-8",children:[(0,x.jsxs)("div",{className:"LEFT space-y-4",children:[(0,x.jsx)("div",{className:"w-80 h-48 bg-lightGray rounded-md flex justify-center items-center overflow-hidden",children:C?(0,x.jsx)("img",{src:C.template,alt:C.title,className:"size-full"}):(0,x.jsx)("p",{className:"text-primary",children:"No template selected"})}),(0,x.jsxs)("div",{className:"w-80 bg-white rounded-md border border-secondary p-4 text-sm space-y-2 overflow-x-hidden",children:[(0,x.jsxs)("p",{children:["From: ",t.fullName]}),(0,x.jsxs)("p",{children:["To: ",k.recipientName]}),(0,x.jsxs)("p",{children:["Expires: ",(new Date).toLocaleDateString()]}),(0,x.jsx)("p",{children:k.message||"Enjoy this gift card on Finafid.com!"})]})]}),(0,x.jsxs)("div",{className:"RIGHT flex-grow space-y-4",children:[(0,x.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Choose a design"}),(0,x.jsx)("div",{className:"GIFT-CARDS-CONTAINER w-full min-h-20 max-h-52 overflow-y-scroll",children:(0,x.jsx)("ul",{className:"flex gap-4 flex-wrap p-1",children:0===b.length?(0,x.jsx)("p",{className:"w-full text-center text-primary",children:"No Templates available."}):b.map(((e,a)=>(0,x.jsx)("li",{onClick:()=>w(e),className:`w-20 h-14 flex-shrink-0 ${C&&C._id===e._id&&"outline outline-primeRed"}`,children:(0,x.jsx)("img",{src:e.template,alt:e.title,className:"size-full"})},a)))})}),(0,x.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Choose an amount"}),(0,x.jsxs)("div",{className:"flex gap-4 flex-wrap items-center",children:[Array.from([1e3,2e3,3e3,4e3]).map(((e,a)=>(0,x.jsx)(h,{isActive:e===y,amount:e,onClick:()=>(e=>{v(null),N(e)})(e)},a))),(0,x.jsxs)("div",{className:"CUSTOM-AMOUNT",children:[(0,x.jsx)("p",{className:"text-[9px]",children:"Custom amount:"}),(0,x.jsxs)("div",{className:"w-20 h-7 flex border border-primeRed rounded-md bg-white overflow-hidden",children:[(0,x.jsx)("span",{className:"w-max h-full flex items-center justify-center text-sm text-primeRed px-2 border-r border-primeRed",children:"\u20b9"}),(0,x.jsx)("input",{type:"number",name:"customAmount",value:j||"",onChange:e=>{return a=e.target.value,v(a),void N(null);var a},className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none w-full px-2 text-sm font-secondary font-medium text-primeRed"})]}),(0,x.jsx)("p",{className:"text-[9px]",children:"(Maximum \u20b9 10,000)"})]})]}),(0,x.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Recipient Details"}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsx)("p",{className:"font-medium text-xs",children:"Enter the details"}),(0,x.jsxs)("form",{className:"space-y-3",onSubmit:A,children:[(0,x.jsx)(n.A,{type:"tel",name:"recipientPhone",value:k.recipientPhone,onChange:S,placeholder:"recipient mobile number",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"}),(0,x.jsx)(n.A,{type:"email",name:"recipientEmail",value:k.recipientEmail,onChange:S,placeholder:"recipient email",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"}),(0,x.jsx)(n.A,{type:"text",name:"recipientName",value:k.recipientName,onChange:S,placeholder:"recipient name",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"})]})]}),(0,x.jsx)("p",{className:"font-secondary font-medium",children:"Add an optional message"}),(0,x.jsx)("div",{children:(0,x.jsxs)("form",{onSubmit:A,children:[(0,x.jsx)(r.A,{name:"message",value:k.message,onChange:S,maxLength:150,placeholder:"Enter optional message",className:"resize-none h-36 text-sm placeholder:text-secondary border-b-2 border-dark"}),(0,x.jsx)(l.A,{className:"ml-auto mt-8 px-4 py-2 rounded-md font-secondary text-sm",children:"create"})]})})]})]})]})})}}}]);
//# sourceMappingURL=9300.92bf70b0.chunk.js.map