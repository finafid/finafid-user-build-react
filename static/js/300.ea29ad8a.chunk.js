"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[300],{2614:(e,a,s)=>{s.d(a,{aQ:()=>p,Fx:()=>x,Px:()=>m,gD:()=>u});var t=s(2532),n=s(3248),r=s(7097),i=s(5026);const l=async()=>(await i.A.get("/getGiftCardByUser")).data,c=async e=>(await i.A.post("/createGiftCard",e)).data,d=async e=>(await i.A.post("/redeemGiftCard",{code:e})).data,o=async()=>{var e;return null===(e=(await i.A.get("/getAllTemplates")).data)||void 0===e?void 0:e.allTemplates},m=()=>(0,t.I)({queryKey:["giftCards"],queryFn:l,staleTime:3e5}),p=()=>{const e=(0,n.jE)();return(0,r.n)({mutationFn:c,onSuccess:()=>{e.invalidateQueries(["giftCards"])}})},u=()=>{const e=(0,n.jE)();return(0,r.n)({mutationFn:d,onSuccess:()=>{e.invalidateQueries(["giftCards"])}})},x=()=>(0,t.I)({queryKey:["giftCard-templates"],queryFn:o,staleTime:3e5})},9300:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var t=s(5043),n=s(3907),r=s(1940),i=s(8514),l=s(5962),c=s(9659),d=s(9060),o=s(2614),m=s(94),p=s(3216),u=s(2925),x=s(4412),h=s(579);const f=e=>{let{amount:a,isActive:s=!1,onClick:t}=e;return(0,h.jsxs)("button",{type:"button",onClick:t,className:"w-16 h-7 border border-primeRed rounded-md flex items-center justify-center gap-1 p-1 text-sm font-secondary font-medium text-primeRed ".concat(s?"bg-lightGray":"bg-white"),children:[(0,h.jsx)("span",{children:"\u20b9"}),(0,h.jsx)("p",{children:a})]})},g=()=>{const e=(0,p.Zp)(),a=(0,u.d)(),{user:s}=(0,c.J)(),{getBalance:g}=(0,d.v)(),{data:j=[],isLoading:y,error:N}=(0,o.Fx)(),b=(0,o.aQ)(),[v,w]=(0,t.useState)(null),[C,A]=(0,t.useState)(null),[k,E]=(0,t.useState)(null),{formData:R,handleChange:S,handleSubmit:T,clearForm:F}=(0,l.A)({},(async s=>{const{recipientName:t,recipientEmail:n,recipientPhone:r,message:i}=s,l=[];if(C||v||l.push("Please select an amount"),k||l.push("Please select a gift card template"),l.length>0)return void l.forEach((e=>a.error(e)));const c={value:v||C,Recipient_Information:{name:t,email:n,phoneNumber:r},templateId:k._id,message:i};b.mutate(c,{onSuccess:async()=>{await g(),a.success("Gift card created successfully"),e("/account/gift-card"),F()},onError:e=>{var s,t;console.error(e),a.error(null===e||void 0===e||null===(s=e.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)}})}));return(0,h.jsx)(m.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,h.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,h.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Create Gift Card"}),(0,h.jsxs)("section",{className:"flex justify-center flex-wrap gap-8",children:[(0,h.jsxs)("div",{className:"LEFT space-y-4",children:[(0,h.jsx)("div",{className:"w-80 h-48 bg-lightGray rounded-md flex justify-center items-center overflow-hidden",children:k?(0,h.jsx)("img",{src:k.template,alt:k.title,className:"size-full"}):(0,h.jsx)("p",{className:"text-primary",children:"No template selected"})}),(0,h.jsxs)("div",{className:"w-80 bg-white rounded-md border border-secondary p-4 text-sm space-y-2 overflow-x-hidden",children:[(0,h.jsxs)("p",{children:["From: ",s.fullName]}),(0,h.jsxs)("p",{children:["To: ",R.recipientName]}),(0,h.jsxs)("p",{children:["Expires: ",(new Date).toLocaleDateString()]}),(0,h.jsx)("p",{children:R.message||"Enjoy this gift card on Finafid.com!"})]})]}),(0,h.jsxs)("div",{className:"RIGHT flex-grow space-y-4",children:[(0,h.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Choose a design"}),(0,h.jsx)("div",{className:"GIFT-CARDS-CONTAINER w-full min-h-20 max-h-52 overflow-y-scroll",children:(0,h.jsx)("ul",{className:"flex gap-4 flex-wrap p-1",children:y?(0,h.jsx)("div",{className:"w-full flex justify-center",children:(0,h.jsx)(x.A,{})}):N?(0,h.jsx)("p",{className:"w-full text-center text-primary",children:"templatesError.message"}):0===j.length?(0,h.jsx)("p",{className:"w-full text-center text-primary",children:"No Templates available."}):j.map(((e,a)=>(0,h.jsx)("li",{onClick:()=>E(e),className:"w-20 h-14 flex-shrink-0 ".concat(k&&k._id===e._id&&"outline outline-primeRed"),children:(0,h.jsx)("img",{src:e.template,alt:e.title,className:"size-full"})},a)))})}),(0,h.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Choose an amount"}),(0,h.jsxs)("div",{className:"flex gap-4 flex-wrap items-center",children:[Array.from([1e3,2e3,3e3,4e3]).map(((e,a)=>(0,h.jsx)(f,{isActive:e===v,amount:e,onClick:()=>(e=>{A(null),w(e)})(e)},a))),(0,h.jsxs)("div",{className:"CUSTOM-AMOUNT",children:[(0,h.jsx)("p",{className:"text-[9px]",children:"Custom amount:"}),(0,h.jsxs)("div",{className:"w-20 h-7 flex border border-primeRed rounded-md bg-white overflow-hidden",children:[(0,h.jsx)("span",{className:"w-max h-full flex items-center justify-center text-sm text-primeRed px-2 border-r border-primeRed",children:"\u20b9"}),(0,h.jsx)("input",{type:"number",name:"customAmount",value:C||"",onChange:e=>{return a=e.target.value,A(a),void w(null);var a},className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none outline-none w-full px-2 text-sm font-secondary font-medium text-primeRed"})]}),(0,h.jsx)("p",{className:"text-[9px]",children:"(Maximum \u20b9 10,000)"})]})]}),(0,h.jsx)("p",{className:"font-secondary font-medium leading-none",children:"Recipient Details"}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("p",{className:"font-medium text-xs",children:"Enter the details"}),(0,h.jsxs)("form",{className:"space-y-3",onSubmit:T,children:[(0,h.jsx)(r.A,{type:"tel",name:"recipientPhone",value:R.recipientPhone,onChange:S,placeholder:"recipient mobile number",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"}),(0,h.jsx)(r.A,{type:"email",name:"recipientEmail",value:R.recipientEmail,onChange:S,placeholder:"recipient email",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"}),(0,h.jsx)(r.A,{type:"text",name:"recipientName",value:R.recipientName,onChange:S,placeholder:"recipient name",className:"border-b-2 border-dark py-1 text-sm placeholder:text-secondary"})]})]}),(0,h.jsx)("p",{className:"font-secondary font-medium",children:"Add an optional message"}),(0,h.jsx)("div",{children:(0,h.jsxs)("form",{onSubmit:T,children:[(0,h.jsx)(i.A,{name:"message",value:R.message,onChange:S,maxLength:150,placeholder:"Enter optional message",className:"resize-none h-36 text-sm placeholder:text-secondary border-b-2 border-dark"}),(0,h.jsx)(n.A,{disabled:b.isPending,className:"ml-auto mt-8 px-4 py-2 rounded-md font-secondary text-sm",children:"create"})]})})]})]})]})})}}}]);
//# sourceMappingURL=300.ea29ad8a.chunk.js.map