"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[326],{9966:(e,s,t)=>{t.d(s,{Kv:()=>d,Vd:()=>r,dz:()=>o,fS:()=>i,p:()=>n});var a=t(5178),l=t(5026);const r=()=>{const e=(0,a.Ri)("accessToken");return l.A.get("/getOrderDetails",{headers:{authorization:`Bearer ${e}`}})},n=e=>{const s=(0,a.Ri)("accessToken");return l.A.get(`/getOrderById/${e}`,{headers:{authorization:`Bearer ${s}`}})},i=(e,s,t,r)=>{const n=(0,a.Ri)("accessToken");return l.A.post("/placeOrder",{orderItem:e,address:s,...t,payment_method:r},{headers:{authorization:`Bearer ${n}`,"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}})},d=(e,s)=>{const t=(0,a.Ri)("accessToken");return l.A.post(`/updateStatus/${e}`,{status:s},{headers:{authorization:`Bearer ${t}`,"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}})},o=e=>l.A.get(`/orderStatusDetails/${e}`)},3637:(e,s,t)=>{t.d(s,{A:()=>y});var a=t(3907),l=t(1940),r=t(2808),n=t(8514),i=t(3163),d=t(5962),o=t(2925),c=t(7058),m=t(9335),x=t(5043),p=t(7154);var u=t(6720),h=t(3649),g=t(579);const y=e=>{let{initialAddress:s={},edit:t=!1}=e;const y=(0,o.d)(),{closeModal:f}=(0,i.h)(),{addAddress:b,updateAddress:j,loading:v}=(0,c.U)(),[N,C]=(0,x.useState)(!1),{formData:A,setFormData:w,handleChange:I,handleSubmit:k,clearForm:R}=(0,d.A)(s,(async e=>{const{_id:s,addressType:a,receiverName:l,receiverPhone:r,pinCode:n,locality:i,city:d,state:o}=e;a?(0,m.wJ)(l).success?(0,m.ri)(r).success?(0,m.XP)(n).success?i?d?o?t?(j(s,e),v||(R(),f())):(b(e),v||(R(),f())):y.error("Please enter state"):y.error("Please enter city"):y.error("Please enter locality"):y.error((0,m.XP)(n).message):y.error((0,m.ri)(r).message):y.error((0,m.wJ)(l).message):y.error("Please select type of address")}));return(0,g.jsxs)("div",{className:"relative overflow-hidden w-110 max-sm:w-svw max-sm:h-svh max-sm:overflow-y-auto bg-white sm:rounded-xl p-4 space-y-4",children:[(0,g.jsx)("h2",{className:"capitalize text-xl font-bold text-center",children:t?"edit address":"add address"}),(0,g.jsxs)("form",{onSubmit:k,className:"space-y-2",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsxs)("div",{className:"RADIO-INPUTS flex justify-center items-center gap-6",children:[(0,g.jsx)(r.A,{label:"home",name:"addressType",value:"home",checked:"home"===A.addressType,onChange:I,containerClassName:"gap-1"}),(0,g.jsx)(r.A,{label:"office",name:"addressType",value:"office",checked:"office"===A.addressType,onChange:I,containerClassName:"gap-1"}),(0,g.jsx)(r.A,{label:"others",name:"addressType",value:"others",checked:"others"===A.addressType,onChange:I,containerClassName:"gap-1"})]}),(0,g.jsx)("button",{type:"button",onClick:async()=>{try{C(!0);const{latitude:e,longitude:s}=await new Promise(((e,s)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((s=>{const{latitude:t,longitude:a}=s.coords;e({latitude:t,longitude:a})}),(e=>{s(e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):s(new Error("Geolocation is not supported by this browser."))})),t=await(async(e,s)=>{try{const t=await p.A.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e},${s}&key=AIzaSyBNgkSu_U1Kbnl7ND_xx8PX_vMR4-B8SeE`),a=await t.data;if(a.results&&a.results.length>0)return a.results[0].address_components;throw new Error("No address found for the given coordinates.")}catch(t){throw console.log(t),new Error("Failed to convert coordinates to address. Please try again later.")}})(e,s);console.log(t);const a=e=>{var s;return(null===(s=t.find((s=>s.types.includes(e))))||void 0===s?void 0:s.long_name)||""};w({...A,houseNumber:a("street_number"),street:a("route"),locality:a("sublocality")||a("locality"),city:a("locality")||a("administrative_area_level_2"),state:a("administrative_area_level_1"),pinCode:a("postal_code"),landmark:a("point_of_interest")})}catch(e){y.error("Failed to fetch address. Please try again.")}finally{C(!1)}},className:"border-2 border-secondary rounded-md p-1 bg-white hover:bg-lightGray transition-colors duration-150 ease-in-out",children:(0,g.jsx)(u.Htn,{className:"text-primeRed text-lg"})})]}),(0,g.jsxs)("div",{className:"grid sm:grid-cols-2 gap-2",children:[(0,g.jsx)(l.A,{label:"enter name",type:"text",name:"receiverName",value:A.receiverName,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"mobile no",type:"tel",name:"receiverPhone",value:A.receiverPhone,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"pin code",type:"text",name:"pinCode",value:A.pinCode,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"house no",type:"text",name:"houseNumber",value:A.houseNumber,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"})]}),(0,g.jsx)(n.A,{label:"street",type:"text",name:"street",value:A.street,onChange:I,rows:3,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(n.A,{label:"locality",type:"text",name:"locality",value:A.locality,onChange:I,rows:3,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsxs)("div",{className:"grid sm:grid-cols-2 gap-2",children:[(0,g.jsx)(l.A,{label:"city",type:"text",name:"city",value:A.city,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"state",type:"text",name:"state",value:A.state,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"landmark",type:"text",name:"landmark",value:A.landmark,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"}),(0,g.jsx)(l.A,{label:"alternate number",type:"tel",placeholder:"alternate mobile (optional)",name:"alternatePhone",value:A.alternatePhone,onChange:I,containerClassName:"gap-1 flex-col",labelClassName:"capitalize font-medium text-xs"})]}),(0,g.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-2",children:[(0,g.jsx)(a.A,{type:"button",reverse:!0,onClick:f,className:"h-8 px-4 rounded-md",children:"cancel"}),(0,g.jsx)(a.A,{className:"h-8 px-4 rounded-md",children:"save"})]})]}),N&&(0,g.jsx)(h.A,{})]})}},3907:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(579);const l=e=>{let{children:s,type:t="submit",className:l="px-4 py-2 rounded-md",onClick:r,disabled:n=!1,reverse:i=!1}=e;return i?(0,a.jsx)("button",{type:t,onClick:r,disabled:n,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${l}`,children:s}):(0,a.jsx)("button",{type:t,onClick:r,disabled:n,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${l}`,children:s})}},2896:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(579);const l=e=>{let{onChange:s,name:t,label:l,value:r="",checked:n=!1,disabled:i=!1,align:d="right",required:o=!1,className:c,labelClassName:m="capitalize text-sm font-medium",containerClassName:x}=e;const p="string"===typeof l?l.replace(" ","-").toLowerCase():"";return(0,a.jsxs)("div",{className:"relative flex gap-2 items-start",children:[l&&"left"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:l}),(0,a.jsxs)("div",{className:"grid place-items-center mt-[2px]",children:[(0,a.jsx)("input",{id:p,type:"checkbox",name:t,value:r,checked:n,disabled:i,onChange:s,required:o,className:"peer col-start-1 row-start-1 appearance-none shrink-0 size-4 border border-black  disabled:border-primary hover:cursor-pointer"}),(0,a.jsx)("span",{className:"pointer-events-none col-start-1 row-start-1 size-2 peer-checked:bg-primeRed peer-checked:peer-disabled:bg-mainGray"})]}),l&&"right"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:l})]})}},1940:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(5043),l=t(5200),r=t(9804),n=t(579);const i=e=>{let{value:s="",onChange:t,name:i,label:d,type:o,placeholder:c,align:m=!1,disabled:x=!1,readOnly:p=!1,min:u=0,max:h=1/0,autoComplete:g,autoCorrect:y,order:f,required:b=!1,className:j="w-full px-4 py-2 rounded-md text-xs border border-secondary bg-offWhite",labelClassName:v="capitalize text-sm font-medium",containerClassName:N="flex-col gap-2",validation:C}=e;const A=null===d||void 0===d?void 0:d.replace(" ","-").toLowerCase(),[w,I]=(0,a.useState)(!1),[k,R]=(0,a.useState)(null);return(0,n.jsxs)("div",{className:`relative flex ${N}`,children:[d&&(0,n.jsx)("label",{htmlFor:A,className:`${v}`,style:m?{textAlign:"center"}:{},children:d}),"file"!==o&&(0,n.jsx)("input",{id:A,type:w?"text":o,name:i,value:s,placeholder:c||d,onChange:t,onBlur:()=>{C&&(C(s).success?C(s).success&&R(null):R(C(s).message))},onWheel:e=>e.target.blur(),required:b,disabled:x,readOnly:p,min:"number"===o?u:void 0,max:"number"===o?h:void 0,className:`outline-none placeholder:capitalize read-only:bg-white read-only:cursor-default ${"number"===o&&"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"} ${x&&"opacity-50"} ${j}`}),k&&(0,n.jsxs)("div",{className:"absolute top-full w-full p-1 flex items-start gap-1 text-error z-[1] bg-white rounded",children:[(0,n.jsx)(r.U0v,{size:12}),(0,n.jsx)("p",{className:"text-xxs leading-tight",children:k})]}),"password"===o&&(0,n.jsx)("button",{type:"button",onClick:()=>{I(!w)},className:"absolute right-4 bottom-3 text-secondary text-sm",children:w?(0,n.jsx)(l.Vap,{}):(0,n.jsx)(l._NO,{})})]})}},3649:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(6040),l=t(579);const r=()=>{const e=Array.from({length:12});return(0,l.jsx)("div",{className:"relative size-20 flex-shrink-0",children:e.map(((e,s)=>{const t=-.1*s,r=30*s*(Math.PI/180),n=28*Math.cos(r),i=28*Math.sin(r);return(0,l.jsx)(a.P.div,{className:"absolute size-1.5 bg-primeRed rounded-full",style:{top:"50%",left:"50%",translateX:"-50%",translateY:"-50%",x:n,y:i},initial:{scale:1},animate:{scale:[1,1.5,1]},transition:{duration:1.2,repeat:1/0,ease:"linear",delay:t}},s)}))})},n=()=>(0,l.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-50 flex items-center justify-center",children:(0,l.jsx)(r,{})})},7870:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(579);const l=e=>{let{color:s="#c1272d"}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"4 56 136 28",xmlSpace:"preserve",clipRule:"evenodd",fillRule:"evenodd",fill:s,children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"m58.18 61.35-3.78-.01v.16zm-47.78.43c-1.22.48-2.01 1.06-2.73 2.05-1.06 1.44-1.06 1.51-1.06 10.59v8.22h4.02v-9.75h14.32l.05-1.96.05-1.93H10.63v-1.17c0-1.28.37-2.05 1.17-2.43.32-.16 2.45-.21 8.84-.21h8.41v-3.8H12.44c-.69-.01-1.39.13-2.04.39m78.92 0c-1.22.48-2.01 1.06-2.73 2.05-1.06 1.44-1.06 1.51-1.06 10.59v8.22h4.02v-9.75h14.32l.05-1.95.05-1.93H89.55v-1.17c0-1.28.37-2.05 1.17-2.43.32-.16 2.45-.21 8.84-.21h8.41v-3.8H91.36c-.69-.02-1.39.12-2.04.38M30.64 72.01v10.62h4.65V61.38h-4.65zm78.53 0v10.62h4.65V61.38h-4.65z"}),(0,a.jsx)("path",{d:"M54.4 61.38 54.38 68c0 3.63-.03 6.62-.06 6.66-.03.03-3.08-2.35-6.78-5.29-9.68-7.72-9.8-7.81-9.93-7.81-.06 0-.11 4.74-.11 10.54v10.54h3.68v-6.66c0-3.66.03-6.66.08-6.66.03 0 2.33 1.81 5.09 4.01 8.67 6.91 11.69 9.3 11.77 9.3.05 0 .08-4.75.05-10.59v-10.7M82.14 82.6l-2.57.03-1.26-2.22c-.73-1.17-2.45-4.04-3.85-6.39l-2.56-4.23-3.59 5.98c-2 3.3-3.7 6.19-3.83 6.42l-.21.44h-5.22l2.75-4.57c1.51-2.51 3.38-5.63 4.19-6.93.8-1.32 2.43-4.04 3.63-6.07 1.21-2.01 2.22-3.68 2.26-3.68.07 0 3.23 5.23 8.78 14.51 1.94 3.22 3.58 5.89 3.78 6.19l.31.56h-5.18m36.46-10.63v10.63h6.01c6.8 0 7.41-.08 9.62-1.22 1.72-.89 3.67-2.89 4.55-4.65 3.02-6.15-.3-13.39-6.91-15.07-1.11-.29-1.78-.32-7.25-.32h-6.01v10.63zm11.93-6.66c1.29.24 2.5.9 3.53 1.92 3.37 3.36 2.32 8.9-2.07 10.98-.71.33-1.49.51-2.27.52l-3.05.03-4.26.05V65.19h3.64c1.99 0 4.02.08 4.48.16"}),(0,a.jsx)("circle",{cx:137.09,cy:59.14,r:1.75,style:{fill:"none",stroke:"#c1272d",strokeWidth:.35,strokeMiterlimit:10}}),(0,a.jsx)("text",{transform:"translate(136.194 60.145)",style:{fontSize:3,fontWeight:600,fill:"#c1272d"},children:"R"})]})})}},674:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(5043),l=t(5200),r=t(579);const n=e=>{let{value:s=1,min:t=1,max:n=1/0,onIncrease:i=(()=>{}),onDecrease:d=(()=>{}),readOnly:o=!1,btnClass:c="w-6",containerClassName:m="h-5 rounded"}=e;const[x,p]=(0,a.useState)(s);(0,a.useEffect)((()=>{p(s)}),[s]);return(0,r.jsxs)("div",{className:`w-max flex items-center border overflow-hidden ${m}`,children:[(0,r.jsx)("button",{type:"button",onClick:()=>{if(x>t){const e=x-1;p(e),d(e)}},className:`bg-offWhite hover:bg-mainGray border-r h-full flex items-center justify-center ${c}`,disabled:x<=t,children:(0,r.jsx)(l.QLg,{size:14,className:x<=t?"text-primary":"text-dark"})}),(0,r.jsx)("input",{type:"number",value:x,min:t,readOnly:o,onChange:e=>p(e.target.value),className:"text-dark bg-offWhite outline-none w-8 h-full text-center text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none read-only:cursor-default"}),(0,r.jsx)("button",{type:"button",onClick:()=>{if(x<n){const e=x+1;p(e),i(e)}},className:`bg-offWhite hover:bg-mainGray border-l h-full flex items-center justify-center ${c}`,disabled:x>=n,children:(0,r.jsx)(l.GGD,{size:14,className:x>=n?"text-primary":"text-dark"})})]})}},2808:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(579);const l=e=>{let{value:s="",onChange:t,name:l,label:r,checked:n=!1,disabled:i=!1,align:d="right",required:o=!1,className:c,labelClassName:m="capitalize text-sm font-medium",containerClassName:x}=e;const p=null===r||void 0===r?void 0:r.replace(" ","-").toLowerCase();return(0,a.jsxs)("div",{className:`relative flex gap-2 items-start ${x}`,children:[r&&"left"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:r}),(0,a.jsxs)("div",{className:`grid place-items-center mt-[2px] ${c}`,children:[(0,a.jsx)("input",{id:p,type:"radio",name:l,value:s,checked:n,disabled:i,onChange:t,required:o,className:"peer col-start-1 row-start-1 appearance-none shrink-0 size-4 border border-black rounded-full disabled:border-primary disabled:cursor-not-allowed hover:cursor-pointer"}),(0,a.jsx)("span",{className:"pointer-events-none col-start-1 row-start-1 size-2 rounded-full peer-checked:bg-primeRed peer-checked:peer-disabled:bg-mainGray"})]}),r&&"right"===d&&(0,a.jsx)("label",{htmlFor:p,className:m,children:r})]})}},8514:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(5043),l=t(579);const r=e=>{let{value:s="",onChange:t,name:r,label:n,align:i=!1,autoComplete:d,autoCorrect:o,order:c,maxLength:m,placeholder:x,required:p=!1,rows:u=5,className:h="w-full px-4 py-2 rounded-md text-xs resize-none border border-secondary bg-offWhite",labelClassName:g="capitalize text-sm font-medium",containerClassName:y="gap-2"}=e;const f=null===n||void 0===n?void 0:n.replace(" ","-").toLowerCase(),[b,j]=(0,a.useState)(0);return(0,l.jsxs)("div",{className:"relative flex flex-col"+" ".concat(y),children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[n&&(0,l.jsx)("label",{htmlFor:f,className:`${g}`,style:i?{textAlign:"center"}:{},children:n}),m&&(0,l.jsxs)("p",{className:"font-medium font-secondary text-sm",children:[b,"/",m]})]}),(0,l.jsx)("textarea",{id:f,name:r,value:s,placeholder:x||n,onChange:e=>{const{value:s}=e.target;j(s.length),t(e)},required:p,maxLength:m,rows:u,className:" outline-none placeholder:capitalize"+" ".concat(h.toString())})]})}},5962:(e,s,t)=>{t.d(s,{A:()=>l});var a=t(5043);function l(e,s){const[t,l]=(0,a.useState)(e);return{formData:t,setFormData:l,handleChange:e=>{const{name:s,value:a,type:r,files:n,checked:i}=e.target;l("file"===r?{...t,[s]:n}:"checkbox"===r?{...t,[s]:i}:{...t,[s]:a})},handleSubmit:e=>{e.preventDefault(),s(t)},clearForm:()=>l(e)}}},1701:(e,s,t)=>{t.d(s,{A:()=>d});var a=t(5043),l=t(5178),r=t(5026);var n=t(2925),i=t(9659);const d=()=>{const[e,s]=(0,a.useState)(null),[t,d]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),{user:m}=(0,i.J)(),x=(0,n.d)(),p=async(e,t)=>{var a,n,i,o,c,p;var u;if(!await(u="https://checkout.razorpay.com/v1/checkout.js",new Promise((e=>{const s=document.createElement("script");s.src=u,s.onload=()=>{e(!0)},s.onerror=()=>{e(!1)},document.body.appendChild(s)}))))return void x.error("Razorpay SDK failed to load. Are you online?");const h=await((e,s,t)=>{const a=(0,l.Ri)("accessToken");return r.A.post("/create-order",{amount:e,currency:s,orderId:t},{headers:{authorization:`Bearer ${a}`}})})(e.amount,e.currency,e.orderId);if(!h)return void x.error("Server error. Are you online?");var g;null!==h&&void 0!==h&&h.status&&(console.log(h.data),s(null===(g=h.data)||void 0===g?void 0:g.order));const y={key:"rzp_live_6mfC4TdXB3IsQS",amount:null===(a=h.data)||void 0===a||null===(n=a.order)||void 0===n?void 0:n.amount.toString(),currency:null===(i=h.data)||void 0===i||null===(o=i.order)||void 0===o?void 0:o.currency,name:"Finafid Technologies Pvt.Ltd",description:"Test Transaction",order_id:null===(c=h.data)||void 0===c||null===(p=c.order)||void 0===p?void 0:p.id,image:"data:image/png;base64,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",handler:async e=>{const s=await(e=>{const s=(0,l.Ri)("accessToken");return r.A.post("/verify-payment",e,{headers:{authorization:`Bearer ${s}`}})})(e);null!==s&&void 0!==s&&s.status&&(console.log(s.data),d("success"),t(s.data))},prefill:{name:m.fullName,email:m.email,contact:m.phone},notes:{address:e.billingAddress},theme:{color:"#c1272d"}};new window.Razorpay(y).open()},u=async e=>{const s=await(t=e.amount.toFixed(2),a=e.orderId,r.A.post("paymentDetail",{amount:t,orderId:a}));var t,a;if(!s||!s.data.paymentData.hash)return void x.error("Failed to initiate PayU payment. Please try again.");const l={key:s.data.paymentData.key,txnid:e.orderId.toString(),amount:e.amount.toFixed(2),firstname:s.data.paymentData.firstname,email:s.data.paymentData.email,phone:s.data.paymentData.phone,productinfo:s.data.paymentData.productinfo,surl:s.data.paymentData.surl,furl:s.data.paymentData.furl,hash:s.data.paymentData.hash,service_provider:s.data.paymentData.service_provider},n=document.createElement("form");n.method="POST",n.action=s.data.actionURL,Object.keys(l).forEach((e=>{const s=document.createElement("input");s.type="hidden",s.name=e,s.value=l[e],n.appendChild(s)})),document.body.appendChild(n),n.submit()};return{payment:e,processPayment:async(e,s)=>{c(!0),d(null);try{switch(e.paymentMethod){case"Razorpay":await p(e,s);break;case"PayU":await u(e,s);break;case"Wallet":case"COD":d("success"),s();break;default:throw new Error("Unsupported payment method")}}catch(t){console.error("Error during payment processing:",t),d("failed")}finally{c(!1)}},paymentStatus:t,paymentLoading:o}}},326:(e,s,t)=>{t.r(s),t.d(s,{default:()=>K});var a=t(7870),l=t(5043),r=t(184),n=t(579);const i=e=>{let{steps:s,currentStep:t,onClick:a}=e;return(0,n.jsx)("div",{className:"w-full flex justify-around items-center gap-8 max-lg:gap-4 max-sm:gap-1",children:null===s||void 0===s?void 0:s.map(((e,i)=>(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)("div",{className:"STEP-ITEM max-md:w-16 flex max-md:flex-col items-center gap-4 max-lg:gap-3 max-md:gap-0 flex-shrink-0",children:[(0,n.jsx)("button",{type:"button",onClick:()=>a(i+1),className:"STEP-ICON size-8 max-lg:size-7 max-md:size-5 text-lg max-lg:text-base max-md:text-xs flex justify-center items-center rounded-full text-white transition-colors ease-out "+(t>=i+1?"bg-primeRed delay-500":"bg-darkGray"),children:t<=i+1?e.icon:(0,n.jsx)(r.CMH,{})}),(0,n.jsx)("p",{className:"STEP-TEXT capitalize transition-colors ease-out max-md:text-xs "+(t>=i+1?"text-black delay-500":"text-secondary"),children:e.name})]}),i!==s.length-1&&(0,n.jsx)("div",{className:"relative h-[3px] w-full min-w-10 bg-darkGray overflow-hidden rounded-full",children:(0,n.jsx)("span",{className:"absolute h-[3px] w-full bg-primeRed transition-transform duration-500 ease-out origin-left "+(t<i+2?"scale-x-0":"scale-x-100")})})]},i)))})};var d=t(1970);const o=e=>{let{steps:s}=e;const{state:t,toStep:l}=(0,d.Q)();return(0,n.jsx)("header",{children:(0,n.jsxs)("nav",{className:"container max-w-full px-32 py-4 max-md:py-2 max-2xl:px-16 max-xl:px-8 max-sm:px-2 h-max flex max-md:flex-col justify-between items-center gap-16 max-md:gap-4 border-b border-primary",children:[(0,n.jsx)("a",{href:"/",className:"LOGO-SECTION h-12 max-xl:h-10 max-lg:h-8 max-md:h-6 max-sm:h-4 flex-shrink-0",children:(0,n.jsx)(a.A,{})}),(0,n.jsx)(i,{steps:s,currentStep:t.step,onClick:l})]})})};var c=t(674);const m=e=>{let{product:s,quantity:t}=e;const{state:a,setBillingItems:l}=(0,d.Q)();return(0,n.jsxs)("div",{className:"p-3 flex gap-3",children:[(0,n.jsxs)("div",{className:"LEFT-SECTION space-y-2",children:[(0,n.jsx)("div",{className:"PRODUCT-IMAGE bg-white size-20 rounded flex-shrink-0",children:(0,n.jsx)("img",{src:null===s||void 0===s?void 0:s.images[0],alt:null===s||void 0===s?void 0:s.name,loading:"lazy",className:"size-full object-contain object-center rounded"})}),(0,n.jsx)(c.A,{value:t,readOnly:!0,onIncrease:()=>(e=>{const s=a.billingItems.map((s=>s.productId._id===e?{...s,itemQuantity:s.itemQuantity+1}:s));l(s)})(s._id),onDecrease:()=>(e=>{const s=a.billingItems.map((s=>s.productId._id===e?{...s,itemQuantity:s.itemQuantity-1}:s)).filter((e=>e.itemQuantity>0));l(s)})(s._id)})]}),(0,n.jsxs)("div",{className:"RIGHT-SECTION",children:[(0,n.jsx)("h3",{className:"text-sm font-medium leading-none line-clamp-2",children:null===s||void 0===s?void 0:s.name}),(0,n.jsx)("ul",{className:"ATTRIBUTES py-1",children:Object.keys(s.attributes).map((e=>(0,n.jsx)("li",{className:"text-sm max-lg:text-xs text-secondary capitalize",children:`${e} : ${s.attributes[e]}`},e)))}),(0,n.jsxs)("div",{className:"PRICING flex items-center gap-2",children:[(0,n.jsxs)("p",{className:"text-sm max-md:text-xs text-center font-medium text-primary line-through leading-none",children:["\u20b9 ",Math.round(null===s||void 0===s?void 0:s.unitPrice)*t]}),(0,n.jsxs)("p",{className:"font-bold text-lg md:text-center leading-none",children:["\u20b9 ",Math.round(null===s||void 0===s?void 0:s.sellingPrice)*t]}),(0,n.jsx)("span",{className:"max-md:text-sm font-medium text-green-500 leading-none",children:"percent"===(null===s||void 0===s?void 0:s.discountType)?`${s.discount}%`:`\u20b9${s.discount} OFF`})]}),(0,n.jsxs)("div",{className:"UTSAV-PRICING flex items-center lg:gap-2 gap-1 whitespace-nowrap text-success",children:[(0,n.jsx)("p",{className:"font-medium max-lg:text-sm",children:"Utsav Price"}),(0,n.jsxs)("p",{className:"text-md font-bold leading-none",children:["\u20b9 ",Math.round(s.utsavPrice)*t]})]})]})]})},x=()=>{const{state:e}=(0,d.Q)();return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center border-b-2 border-primary uppercase pb-2",children:[(0,n.jsx)("p",{className:"font-semibold font-secondary text-lg max-sm:text-base",children:"Shopping Bag"}),(0,n.jsxs)("span",{className:"text-dark text-sm font-medium",children:["(",e.billingItems.length," Items)"]})]}),(0,n.jsx)("ul",{className:"divide-y divide-secondary",children:e.billingItems.map((e=>e.productId?(0,n.jsx)(m,{product:e.productId,quantity:e.itemQuantity},e.productId._id):(0,n.jsx)("div",{className:"text-error text-center text-sm p-1",children:"Product not found"},e._id)))})]})};var p=t(3637),u=t(3907),h=t(3163),g=t(3156),y=t(6720),f=t(5200),b=t(7058);const j=e=>{let{address:s}=e;const{openModal:t}=(0,h.h)(),{setDefault:a,removeAddress:l}=(0,b.U)(),{state:{billingAddress:r},setBillingAddress:i}=(0,d.Q)();return(0,n.jsx)("div",{className:"w-64 h-44 border border-dashed border-darkGray rounded-md flex flex-shrink-0 justify-center items-center cursor-pointer bg-white overflow-hidden",children:s?(0,n.jsxs)("div",{onClick:()=>i(s),className:"HAVE-ADDRESS relative size-full p-4 pt-6 flex flex-col items-start",children:[(null===s||void 0===s?void 0:s.isDefault)&&(0,n.jsx)("span",{className:"absolute top-[10px] right-10 text-[8px] text-white font-medium font-secondary px-1 rounded-sm pt-[1px] bg-success",children:"DEFAULT"}),(0,n.jsx)("span",{className:"absolute top-2 right-2 size-4 rounded-full border border-black flex justify-center items-center",children:(0,n.jsx)("span",{className:`size-2 rounded-full ${r._id===s._id&&"bg-primeRed"}`})}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 font-medium leading-tight",children:[(0,n.jsx)("h3",{children:null===s||void 0===s?void 0:s.receiverName}),(0,n.jsxs)("p",{className:"uppercase text-xxs pt-[2px]",children:["(",null===s||void 0===s?void 0:s.addressType,")"]})]}),(0,n.jsxs)("div",{className:"flex justify-start items-center text-xs text-secondary",children:[(0,n.jsx)(y.qPF,{size:14,className:"mr-2"}),(0,n.jsx)("p",{children:(null===s||void 0===s?void 0:s.receiverPhone)||"N/A"}),(null===s||void 0===s?void 0:s.alternatePhone)&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"mx-1",children:"/"}),s.alternatePhone]})]}),(0,n.jsxs)("div",{className:"uppercase text-xs font-medium text-secondary flex flex-wrap gap-x-1 mt-2",children:[(null===s||void 0===s?void 0:s.houseNumber)&&(0,n.jsxs)("p",{children:[s.houseNumber,","]}),(null===s||void 0===s?void 0:s.street)&&(0,n.jsxs)("p",{children:[s.street,","]}),(null===s||void 0===s?void 0:s.locality)&&(0,n.jsxs)("p",{children:[s.locality,","]}),(null===s||void 0===s?void 0:s.landmark)&&(0,n.jsxs)("p",{children:[s.landmark,","]}),(null===s||void 0===s?void 0:s.city)&&(0,n.jsxs)("p",{children:[s.city,","]}),(null===s||void 0===s?void 0:s.state)&&(0,n.jsxs)("p",{children:[s.state,","]}),(null===s||void 0===s?void 0:s.pinCode)&&(0,n.jsx)("p",{children:s.pinCode})]}),(0,n.jsxs)("div",{className:"BTN-SECTION w-full flex justify-between items-center gap-2 mt-auto",children:[(0,n.jsx)(u.A,{reverse:!0,onClick:e=>{e.stopPropagation(),t((0,n.jsx)(p.A,{initialAddress:s,edit:!0}))},className:"px-3 py-1 text-xs rounded-md font-secondary font-medium",children:"Edit"}),!(null!==s&&void 0!==s&&s.isDefault)&&(0,n.jsx)(u.A,{onClick:e=>{e.stopPropagation(),a(s._id)},className:"text-xs px-6 py-1 rounded-md font-secondary",children:"set as default"}),(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),l(s._id)},children:(0,n.jsx)(f.IXo,{size:18,className:"text-primeRed"})})]})]}):(0,n.jsxs)("div",{onClick:()=>t((0,n.jsx)(p.A,{})),className:"NO-ADDRESS size-full text-primeRed flex flex-col justify-center items-center gap-2 hover:bg-offWhite",children:[(0,n.jsx)(g.ApK,{size:24}),(0,n.jsx)("p",{className:"capitalize text-lg font-secondary font-medium",children:"add new address"})]})})};var v=t(1562),N=t(3512);const C=e=>{let{address:s,preview:t=!1}=e;const{openModal:a}=(0,h.h)(),{setDefault:l,removeAddress:r}=(0,b.U)(),{state:{billingAddress:i},setBillingAddress:o}=(0,d.Q)();return(0,n.jsx)("div",{className:"w-full p-3",children:s?(0,n.jsxs)("div",{onClick:()=>o(s),className:"HAVE-ADDRESS w-full relative flex flex-col items-start",children:[(0,n.jsxs)("div",{className:"absolute top-0 right-0 flex items-center gap-2",children:[(null===s||void 0===s?void 0:s.isDefault)&&(0,n.jsx)("span",{className:"text-[8px] text-white font-medium font-secondary px-1 rounded-sm pt-[1px] bg-success",children:"DEFAULT"}),!t&&(0,n.jsx)("span",{className:"size-4 rounded-full border border-black flex justify-center items-center",children:(0,n.jsx)("span",{className:`size-2 rounded-full ${i._id===s._id&&"bg-primeRed"}`})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2 font-medium leading-none pr-12",children:[(0,n.jsx)("h3",{children:null===s||void 0===s?void 0:s.receiverName}),(0,n.jsx)("p",{className:"uppercase text-[8px] px-1 py-[3px] bg-mainGray rounded leading-none",children:null===s||void 0===s?void 0:s.addressType})]}),(0,n.jsxs)("div",{className:"flex justify-start items-center text-xs text-secondary",children:[(0,n.jsx)(y.qPF,{className:"mr-2"}),(0,n.jsx)("p",{children:(null===s||void 0===s?void 0:s.receiverPhone)||"N/A"}),(null===s||void 0===s?void 0:s.alternatePhone)&&(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"mx-1",children:"/"}),s.alternatePhone]})]}),(0,n.jsxs)("div",{className:"text-sm font-medium text-secondary flex flex-wrap gap-x-1 mt-2",children:[(null===s||void 0===s?void 0:s.houseNumber)&&(0,n.jsxs)("p",{children:[s.houseNumber,","]}),(null===s||void 0===s?void 0:s.street)&&(0,n.jsxs)("p",{children:[s.street,","]}),(null===s||void 0===s?void 0:s.locality)&&(0,n.jsxs)("p",{children:[s.locality,","]}),(null===s||void 0===s?void 0:s.landmark)&&(0,n.jsxs)("p",{children:[s.landmark,","]}),(null===s||void 0===s?void 0:s.city)&&(0,n.jsxs)("p",{children:[s.city,","]}),(null===s||void 0===s?void 0:s.state)&&(0,n.jsxs)("p",{children:[s.state,","]}),(null===s||void 0===s?void 0:s.pinCode)&&(0,n.jsx)("p",{children:s.pinCode})]}),!t&&(0,n.jsxs)("div",{className:"BTN-SECTION w-full flex items-center justify-between gap-2 mt-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.A,{reverse:!0,onClick:e=>{e.stopPropagation(),a((0,n.jsx)(p.A,{initialAddress:s,edit:!0}))},className:"px-3 py-1 text-xs rounded-md font-secondary font-medium",children:"Edit"}),!(null!==s&&void 0!==s&&s.isDefault)&&(0,n.jsx)(u.A,{onClick:e=>{e.stopPropagation(),l(s._id)},className:"text-xs px-6 py-1 rounded-md font-secondary",children:"set as default"})]}),(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),r(s._id)},children:(0,n.jsx)(f.IXo,{size:18,className:"text-primeRed"})})]})]}):(0,n.jsxs)("div",{onClick:()=>a((0,n.jsx)(p.A,{})),className:"NO-ADDRESS w-full py-4 flex items-center justify-center gap-2 shadow-md text-primeRed",children:[(0,n.jsx)(g.OiG,{}),(0,n.jsx)("p",{className:"capitalize font-medium",children:"add new address"})]})})},A=()=>{const{closeSidebar:e}=(0,v.c)(),{addresses:s}=(0,b.U)(),{state:{billingAddress:t}}=(0,d.Q)();return(0,n.jsxs)("div",{className:"bg-white h-svh relative",children:[(0,n.jsxs)("div",{className:"HEADING px-4 py-2 border-b border-primary flex items-center gap-2",children:[(0,n.jsx)(g._Jj,{onClick:e}),(0,n.jsx)("p",{className:"font-medium",children:"Select Address"})]}),(0,n.jsxs)("ul",{className:"divide-y divide-secondary",children:[(0,n.jsx)(C,{}),t&&s.map(((e,s)=>(0,n.jsx)(C,{address:e},s)))]})]})},w=()=>{const e=(0,N.A)("(min-width: 1024px)"),s=(0,N.A)("(min-width: 768px)"),{openSidebar:t}=(0,v.c)(),{state:{billingAddress:a},setBillingAddress:r}=(0,d.Q)(),{addresses:i,defaultAddress:o}=(0,b.U)();return(0,l.useEffect)((()=>{r(o)}),[i]),(0,n.jsxs)("div",{className:"space-y-4 max-md:space-y-0",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center border-b-2 border-primary uppercase pb-2",children:[(0,n.jsx)("p",{className:"font-semibold font-secondary text-lg max-sm:text-base",children:"Delivery To"}),!e&&(0,n.jsx)(u.A,{reverse:!0,onClick:()=>t((0,n.jsx)(A,{})),className:"px-2 py-1 rounded-md text-xs",children:"change"})]}),s?(0,n.jsxs)("ul",{className:"flex justify-start gap-6 flex-wrap",children:[(0,n.jsx)(j,{}),a&&i.map(((e,s)=>(0,n.jsx)(j,{address:e},s)))]}):(0,n.jsx)(C,{address:a,preview:!0})]})},I=e=>{let{label:s,method:t,icon:a,onClick:l}=e;const{state:r}=(0,d.Q)();return(0,n.jsxs)("button",{onClick:l,className:"relative bg-white hover:bg-success hover:bg-opacity-30 border-2 border-secondary p-4 w-full max-md:w-full flex justify-between items-center gap-4 rounded-lg transition-colors duration-300 ease-in-out",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("span",{className:"size-4 top-2 right-2 rounded-full bg-white border border-black flex justify-center items-center",children:(0,n.jsx)("span",{className:`size-2 rounded-full ${r.paymentMethod===t&&"bg-primeRed"}`})}),(0,n.jsx)("p",{className:"font-secondary font-medium",children:s})]}),(0,n.jsx)("i",{className:"text-2xl",children:a})]})};var k=t(9888);const R=()=>{const{setPaymentMethod:e}=(0,d.Q)();return(0,n.jsxs)("div",{className:"space-y-4 max-md:px-1",children:[(0,n.jsx)("div",{className:"flex justify-between items-center border-b-2 border-primary uppercase pb-2",children:(0,n.jsx)("p",{className:"font-semibold font-secondary text-lg max-sm:text-base",children:"Select Payment Method"})}),(0,n.jsx)("div",{className:"flex flex-wrap justify-start gap-x-16 gap-y-4",children:k.zJ.map((s=>(0,n.jsx)(I,{label:s.label,method:s.method,icon:s.icon,onClick:()=>e(s.method)},s.label)))})]})};var S=t(1701),E=t(9966);const z=()=>{const{state:e,dispatch:s,toStep:t}=(0,d.Q)(),{billingItems:a,billingAddress:l,paymentMethod:r,subtotal:n,discount:i,tax:o,shippingCost:c,total:m,walletBalance:x,couponDiscount:p}=e,{processPayment:u,paymentStatus:h,paymentLoading:g}=(0,S.A)();return{placeOrderAndPay:async()=>{try{s({type:"SET_ORDER_STATUS",payload:"processing"});const h=await(0,E.fS)(a,l,{tax:o,total:m,subtotal:n,discount:i,shippingCost:c,walletBalanceUsed:x,couponDiscount:p},r);if(null===h||void 0===h||!h.status)throw new Error("Error placing order");{var e,d;const a=null===(e=h.data)||void 0===e||null===(d=e.newOrder)||void 0===d?void 0:d._id;s({type:"SET_ORDER_ID",payload:a});const n=async()=>{try{console.log(h.data),await(0,E.Kv)(a,"Confirmed"),s({type:"SET_ORDER_STATUS",payload:"success"}),t(4)}catch(e){console.error("Error during Order confirmation:",e),t(4)}};await u({amount:m,currency:"INR",orderId:a,paymentMethod:r,billingAddress:l},n)}}catch(h){console.error("Error during order processing:",h),s({type:"SET_ORDER_STATUS",payload:"error"}),t(4)}},paymentStatus:h,paymentLoading:g}};var D=t(2925);const P=()=>{var e,s;const t=(0,N.A)("(min-width: 768px)"),a=(0,D.d)(),{placeOrderAndPay:r,paymentLoading:i}=z(),{state:o,nextStep:c,toStep:m,setPaymentMethod:x}=(0,d.Q)();(0,l.useEffect)((()=>{o.total<=0?x("Wallet"):x(null)}),[o.total]);const p=async()=>{o.paymentMethod?await r():a.warning(" select a payment method to proceed.")};return(0,n.jsxs)("div",{className:"ORDER-SUMMARY w-full md:border md:border-primary md:rounded-md p-4 max-md:p-1",children:[(0,n.jsx)("h3",{className:"font-semibold font-secondary text-lg border-b-2 border-primary uppercase pb-2",children:"Order Details"}),(0,n.jsxs)("div",{className:"flex items-center justify-between py-4 border-b border-primary",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{children:(0,n.jsx)(y.Og4,{})}),(0,n.jsxs)("span",{className:"text-sm font-medium",children:[null===(e=o.billingItems)||void 0===e?void 0:e.length," Item(s) in Cart"]})]}),(0,n.jsx)("button",{type:"button",onClick:()=>m(1),className:"text-sm text-blue-500",children:"Details"})]}),(0,n.jsx)("div",{className:"PRICING-DETAILS border-b border-primary py-4",children:(0,n.jsx)("table",{className:"w-full font-secondary",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{className:"text-sm text-secondary",children:["Subtotal (",null===(s=o.billingItems)||void 0===s?void 0:s.length,")"]}),(0,n.jsxs)("td",{className:"text-right",children:["\u20b9 ",o.subtotal]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-sm text-secondary",children:"Discount"}),(0,n.jsxs)("td",{className:"text-right text-success",children:["\u20b9 -",o.discount]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-sm text-secondary",children:"GST (incl)"}),(0,n.jsxs)("td",{className:"text-right text-primary",children:["\u20b9 ",o.tax.toFixed(2)]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-sm text-secondary",children:"Shipping"}),(0,n.jsx)("td",{className:"text-right",children:o.shippingCost>0?`\u20b9 +${o.shippingCost}`:(0,n.jsx)("p",{className:"text-xs font-medium text-green-500",children:"Free Delivery"})})]}),o.walletBalance>0&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-sm text-secondary",children:"Wallet Balance"}),(0,n.jsxs)("td",{className:"text-right text-success",children:["- \u20b9 ",o.walletBalance]})]}),o.couponDiscount>0&&(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"text-sm text-secondary",children:"Coupon Discount"}),(0,n.jsxs)("td",{className:"text-right text-success",children:["- \u20b9 ",o.couponDiscount]})]}),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"font-semibold",children:"Total"}),(0,n.jsxs)("td",{className:"text-right text-lg font-medium",children:["\u20b9 ",o.total]})]})]})})}),(0,n.jsxs)("div",{className:`${!t&&"bg-white fixed bottom-0 left-0 right-0 p-6 pt-0 shadow-upper"}`,children:[(0,n.jsx)("div",{className:"py-4 max-md:py-2",children:(0,n.jsxs)("div",{className:"flex md:justify-center justify-between items-center",children:[!t&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm font-semibold font-secondary",children:"Total:"}),(0,n.jsxs)("span",{className:"text-success font-medium",children:["\u20b9 ",o.total]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm font-semibold font-secondary",children:"Total Savings:"}),(0,n.jsxs)("span",{className:"text-success font-medium",children:["\u20b9 ",o.subtotal-o.total]})]})]})}),o.step<3&&(0,n.jsx)(u.A,{type:"button",onClick:()=>{0===o.total&&2===o.step?p():c()},className:"w-full py-2 font-secondary font-medium",children:2===o.step?"place order":"continue"}),3===o.step&&(0,n.jsx)(u.A,{type:"button",onClick:p,className:"w-full py-2 font-secondary font-medium",disabled:i,children:"COD"===o.paymentMethod?"Confirm":`Pay \u20b9${o.total}`})]})]})};var T=t(1462),Q=t(5860),G=t(3216);const L=()=>{const{state:e,dispatch:s}=(0,d.Q)(),{removeSelectedItemsFromCart:t}=(0,Q._)(),[a,r]=(0,l.useState)(3),i=(0,G.Zp)();return(0,l.useEffect)((()=>{let a;"success"!==e.orderStatus&&"processing"!==e.orderStatus&&"error"!==e.orderStatus||(a=setInterval((()=>{r((e=>e-1))}),1e3));const l=setTimeout((()=>{"success"===e.orderStatus||"processing"===e.orderStatus?(i(`/order/${e.orderId}`,{replace:!0}),t(e.billingItems),s({type:"RESET_ORDER"})):"error"===e.orderStatus&&(i("/",{replace:!0}),s({type:"RESET_ORDER"}))}),3e3);return()=>{clearTimeout(l),clearInterval(a)}}),[e.orderStatus,e.orderId]),(0,n.jsxs)("div",{className:"w-[500px] min-h-[400px] p-16 max-md:p-8 space-y-8 rounded-lg shadow-drop bg-lightGray",children:["success"===e.orderStatus?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:(0,n.jsx)(T.v7R,{size:64,className:"mx-auto text-success"})}),(0,n.jsx)("h3",{className:"font-secondary font-semibold text-xl text-center",children:"Your Order is Confirmed - Thank You!"}),(0,n.jsx)("p",{className:"text-sm text-secondary font-secondary text-center",children:"Your order has been placed successfully, and we're thrilled to get your items on their way to you. We've sent a separate confirmation email with your order details (#[Order Number])."})]}):"processing"===e.orderStatus?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:(0,n.jsx)(T.xsL,{size:64,className:"mx-auto text-warning"})}),(0,n.jsx)("h3",{className:"font-secondary font-semibold text-xl text-center",children:"Your Order is Being Processed!"}),(0,n.jsx)("p",{className:"text-sm text-secondary font-secondary text-center",children:"Thank you for your order (#[Order Number])! We've received it and are currently processing it to get it ready for shipment."})]}):"error"===e.orderStatus&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:(0,n.jsx)(T.Fac,{size:64,className:"mx-auto text-error"})}),(0,n.jsx)("h3",{className:"font-secondary font-semibold text-xl text-center",children:"Failed to place Order!"}),(0,n.jsx)("p",{className:"text-sm text-secondary font-secondary text-center",children:"Thank you for your recent attempt to order from (#[Order Number]). We appreciate your interest in our products. Unfortunately, we were unable to process your order due to a payment issue."})]}),(0,n.jsxs)("p",{className:"text-xs text-primary text-center",children:["Redirecting in ",a,"..."]})]})};var O=t(2896),U=t(9060),B=t(5962);const F=()=>{const{balance:e}=(0,U.v)(),{state:{walletBalance:s,total:t},applyWalletBalance:a}=(0,d.Q)(),{formData:l,handleChange:r}=(0,B.A)({walletUsed:s>0});return(0,n.jsxs)("div",{className:"md:border max-md:border-y border-primary p-3 md:rounded-md flex gap-x-4",children:[(0,n.jsx)(O.A,{name:"walletUsed",checked:l.walletUsed,onChange:s=>{const t=s.target.checked;a(t?e:0),r(s)}}),(0,n.jsxs)("div",{className:"leading-none space-y-1",children:[(0,n.jsx)("p",{className:"text-primeRed font-medium",children:"Pay using wallet"}),(0,n.jsxs)("p",{className:"text-sm text-primary",children:["Balance: ",e-s," / Total: ",t]})]})]})};var M=t(1940),Z=t(5394),Y=t(9011),J=t(6460);var X=t(6040);const H=e=>{let{coupon:s}=e;const{state:t,applyCoupon:a,removeCoupon:l}=(0,d.Q)(),r=t.coupon===s.code;return(0,n.jsxs)(X.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white border border-secondary rounded-md flex overflow-hidden",children:[(0,n.jsx)("div",{className:"OFFER-LABEL w-10 py-4 flex-shrink-0 bg-blue-500 text-center flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-sm text-white font-semibold -rotate-90 whitespace-nowrap",children:"Percent"===s.Discount_Type?`${s.Discount_Value}% OFF`:`\u20b9 ${s.Discount_Value} OFF`})}),(0,n.jsxs)("div",{className:"CARD-BODY w-full p-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("div",{className:"text-lg font-semibold",children:s.code}),r?(0,n.jsx)("button",{onClick:l,className:"text-red-500 font-semibold text-sm focus:outline-none",children:"REMOVE"}):(0,n.jsx)("button",{onClick:()=>a(s.code),className:"text-blue-500 font-semibold text-sm focus:outline-none",children:"APPLY"})]}),(0,n.jsxs)("p",{className:"text-sm text-secondary mt-1 leading-none",children:["Shop minimum of \u20b9 ",s.Minimum_Purchase," to avail this offer"]}),(0,n.jsx)("hr",{className:"my-2 border-primary"}),(0,n.jsx)("p",{className:"text-sm text-secondary",children:s.title})]})]})},W=()=>{const{closeSidebar:e}=(0,v.c)(),{data:s,isLoading:t,isFetching:a,error:l}=(0,Y.I)({queryKey:["coupons"],queryFn:J.DB,staleTime:3e5,placeholderData:[]});return(0,n.jsxs)("div",{className:"bg-white h-svh relative",children:[(0,n.jsxs)("div",{className:"HEADING px-4 py-2 border-b border-primary flex items-center gap-2",children:[(0,n.jsx)(r._Jj,{onClick:e}),(0,n.jsx)("p",{className:"font-medium",children:"All Coupons"})]}),t||a?(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)("h2",{className:"text-center font-secondary font-medium mt-8",children:"Loading..."})}):l?(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)("h2",{className:"text-center font-secondary font-medium mt-8",children:l.message})}):(0,n.jsx)("ul",{className:"divide-y divide-secondary space-y-4 p-3",children:s.map((e=>(0,n.jsx)(H,{coupon:e},e._id)))})]})},V=()=>{const{openSidebar:e}=(0,v.c)(),{state:s,applyCoupon:t,removeCoupon:a}=(0,d.Q)(),l=(0,D.d)(),{formData:i,handleChange:o,handleSubmit:c}=(0,B.A)({},(e=>{const{couponCode:s}=e;s?t(s):l.error("Please enter a coupon code")}));return(0,n.jsxs)("div",{className:"p-3 md:border md:border-primary rounded-md divide-y-2 divide-secondary space-y-4",children:[(0,n.jsxs)("form",{onSubmit:c,className:"h-8 flex gap-4",children:[(0,n.jsx)(M.A,{placeholder:"ENTER COUPON CODE",name:"couponCode",value:i.couponCode,onChange:o,className:"bg-white border border-primary rounded-md h-full w-full px-4 text-sm font-medium"}),(0,n.jsx)("button",{className:"bg-warning text-sm font-semibold px-4 rounded-md",children:"APPLY"})]}),s.coupon?(0,n.jsxs)("div",{className:"flex items-center gap-4 p-3 w-full",children:[(0,n.jsx)(g.eFy,{size:24,className:"text-success"}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-medium text-sm",children:[s.coupon," Applied"]}),(0,n.jsxs)("p",{className:"text-success text-xs",children:["\u20b9 ",s.couponDiscount," OFF"]})]}),(0,n.jsx)("button",{onClick:a,className:"ml-auto text-primeRed text-sm font-medium",children:"Remove"})]}):(0,n.jsxs)("button",{onClick:()=>e((0,n.jsx)(W,{})),className:"flex items-center gap-4 p-3 w-full h-10",children:[(0,n.jsx)(r.BuZ,{size:18,className:"text-success"}),(0,n.jsx)("p",{className:"text-success font-medium",children:"View all coupons"}),(0,n.jsx)(Z.ZK4,{size:18,className:"text-success ml-auto"})]})]})},K=()=>{const{state:e,dispatch:s}=(0,d.Q)(),t=(0,G.Zp)();return(0,l.useEffect)((()=>{0===e.billingItems.length&&(s({type:"SET_ORDER_STATUS",payload:"idle"}),t(-1,{replace:!0}))}),[e.billingItems,s,t]),(0,n.jsxs)("main",{children:[(0,n.jsx)(o,{steps:k.O0}),e.step<3?(0,n.jsxs)("section",{className:"container max-w-full min-h-screen px-32 max-2xl:px-16 max-xl:px-8 max-sm:px-2 py-8 max-md:py-2 flex max-md:flex-col justify-center items-start gap-28 max-xl:gap-20 max-lg:gap-10",children:[(0,n.jsx)("section",{className:"w-full space-y-10",children:(()=>{switch(e.step){case 1:default:return(0,n.jsx)(x,{});case 2:return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{}),(0,n.jsx)(x,{})]})}})()}),(0,n.jsxs)("section",{className:"w-80 max-md:w-full space-y-8 max-md:space-y-0 max-md:mb-28 flex-shrink-0",children:[(0,n.jsx)(F,{}),(0,n.jsx)(V,{}),(0,n.jsx)(P,{})]})]}):3===e.step?(0,n.jsxs)("section",{className:"container max-w-[400px] py-8 max-md:p-2 flex flex-col justify-center items-center gap-8",children:[(0,n.jsx)(R,{}),(0,n.jsx)(P,{})]}):4===e.step&&(0,n.jsx)("section",{className:"container max-w-full min-h-[80vh] py-8 max-md:p-2 flex justify-center items-center",children:(0,n.jsx)(L,{})})]})}}}]);
//# sourceMappingURL=326.af8e60fb.chunk.js.map