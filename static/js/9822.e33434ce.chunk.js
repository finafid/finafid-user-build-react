"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[9822],{9966:(e,t,s)=>{s.d(t,{It:()=>c,Kv:()=>l,N4:()=>d,Vd:()=>i,dz:()=>o,fS:()=>a,p:()=>n});var r=s(5026);const i=async()=>(await r.A.get("/getOrderDetails")).data,n=async e=>(await r.A.get(`/getOrderById/${e}`)).data,a=(e,t,s,i)=>r.A.post("/placeOrder",{orderItem:e,address:t,...s,payment_method:i},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),l=(e,t)=>r.A.post(`/updateStatus/${e}`,{status:t},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),o=async e=>{var t,s;return null===(t=(await r.A.get(`/orderStatusDetails/${e}`)).data)||void 0===t||null===(s=t.statusDetails)||void 0===s?void 0:s.orderStatusDetails},d=async e=>(await r.A.get(`/cancelDelivery/${e}`)).data,c=async e=>(await r.A.get(`/downloadInvoice/${e}`)).data},3907:(e,t,s)=>{s.d(t,{A:()=>i});var r=s(579);const i=e=>{let{children:t,type:s="submit",className:i="px-4 py-2 rounded-md",onClick:n,disabled:a=!1,reverse:l=!1}=e;return l?(0,r.jsx)("button",{type:s,onClick:n,disabled:a,className:`block capitalize bg-white text-primeRed text-sm hover:bg-lightGray border border-primeRed transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${i}`,children:t}):(0,r.jsx)("button",{type:s,onClick:n,disabled:a,className:`block capitalize bg-primeRed text-white text-sm hover:bg-hotPink transition-colors duration-200 ease-in-out disabled:bg-mainGray disabled:cursor-not-allowed ${i}`,children:t})}},5609:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(5200),i=s(5043);const n="...",a=(e,t)=>{let s=t-e+1;return Array.from({length:s},((t,s)=>s+e))};var l=s(579);const o=e=>{let{onPageChange:t,totalCount:s,siblingCount:o=1,currentPage:d,pageSize:c}=e;const u=(e=>{let{totalCount:t,limit:s,siblingCount:r=1,currentPage:l}=e;return(0,i.useMemo)((()=>{const e=Math.ceil(t/s);if(r+5>=e)return a(1,e);const i=Math.max(l-r,1),o=Math.min(l+r,e),d=i>2,c=o<e-2,u=e;if(!d&&c)return[...a(1,3+2*r),n,e];if(d&&!c){let t=a(e-(3+2*r)+1,e);return[1,n,...t]}if(d&&c){let e=a(i,o);return[1,n,...e,n,u]}}),[t,s,r,l])})({currentPage:d,totalCount:s,siblingCount:o,limit:c}),h=u[u.length-1];if(0===d||u.length<2)return null;return(0,l.jsx)("div",{className:"my-8",children:(0,l.jsxs)("ul",{className:"relative flex gap-4 max-md:gap-3 w-max mx-auto",children:[u.map(((e,s)=>(0,l.jsxs)(i.Fragment,{children:[e===n&&(0,l.jsx)("li",{className:"relative h-max top-1",children:n}),e!==n&&(0,l.jsx)("li",{className:`size-10 max-lg:size-8 max-md:size-6 border border-black max-lg:text-sm max-md:text-xs flex justify-center items-center cursor-pointer transition-colors duration-200 ease-in-out ${e===d?"bg-primeRed text-white":"bg-white"} ${e!==d&&"hover:bg-mainGray"}`,onClick:()=>t(e),children:e})]},s))),(0,l.jsx)("button",{className:`absolute -left-10 top-1/2 -translate-y-1/2 ${d<=1&&"text-primary"}`,onClick:()=>{d<=1||t(d-1)},children:(0,l.jsx)(r.irw,{size:28})}),(0,l.jsx)("button",{className:`absolute -right-10 top-1/2 -translate-y-1/2 ${d>=h&&"text-primary"}`,onClick:()=>{d>=h||t(d+1)},children:(0,l.jsx)(r.fOo,{size:28})})]})})}},3661:(e,t,s)=>{s.d(t,{D:()=>n});var r=s(5475),i=s(5043);function n(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[n,a]=(0,r.ok)(),l=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!l.current){if(!n.has(e)&&void 0!==t){const s=new URLSearchParams(n);s.set(e,t),a(s,{replace:!0})}l.current=!0}}),[n,e,t,a]);const o=n.get(e);return[null!==o&&void 0!==o?o:t,t=>{const r=new URLSearchParams(n);null!==t&&void 0!==t?r.set(e,t):r.delete(e);n.toString()!==r.toString()&&a(r,{replace:s})}]}},9822:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var r=s(6040),i=s(8361),n=s(5043),a=s(9888),l=s(3907),o=s(3216),d=s(5475),c=s(1291),u=s(2925),h=s(3163),m=s(1462),x=s(579);const p=e=>{let{onClick:t}=e;const{closeModal:s}=(0,h.h)();return(0,x.jsxs)("div",{className:"sm:w-100 bg-white rounded-xl p-12 space-y-12",children:[(0,x.jsxs)("div",{className:"HEAD space-y-2",children:[(0,x.jsx)("span",{className:"block absolute right-1/2 translate-x-1/2 top-0 -translate-y-1/2 w-max bg-primeRed p-4 rounded-full text-white",children:(0,x.jsx)(m.ozG,{size:32})}),(0,x.jsx)("p",{className:"font-medium text-center",children:"Cancel Order"}),(0,x.jsx)("p",{className:"text-sm font-medium text-primary text-center",children:"Do you want to cancel this order?"})]}),(0,x.jsxs)("div",{className:"BTN-SECTION flex justify-center",children:[(0,x.jsx)(l.A,{onClick:t,className:"px-6 py-3 rounded-tl-md rounded-bl-md",children:"Yes, cancel order"}),(0,x.jsx)(l.A,{reverse:!0,onClick:()=>s(),className:"px-6 py-3 rounded-tr-md rounded-br-md",children:"close"})]})]})},f=e=>{let{order:t}=e;const s=(0,u.d)(),{openModal:r,closeModal:n}=(0,h.h)(),m=(0,o.Zp)(),f=(0,i.s8)(t._id),g=(0,i.JJ)(),v=()=>{f.mutate(t._id,{onSuccess:()=>{s.success("Order cancelled successfully!"),n()},onError:e=>{console.error(e.message),s.error("Unable to cancel order")}})};return(0,x.jsx)("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full border",children:(0,x.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,x.jsxs)("div",{className:"CARD-HEAD w-max flex items-center justify-between gap-2",children:[(0,x.jsx)("span",{className:`text-xxs text-white px-2 py-1 leading-none rounded-full ${(0,a.xn)(t.status)}`,children:t.status}),(0,x.jsx)("span",{className:"text-gray-600 text-sm",children:(0,c.Y)(new Date(t.updatedAt))})]}),(0,x.jsxs)("div",{className:"CARD-BODY flex max-lg:flex-col justify-between gap-4",children:[(0,x.jsxs)("div",{className:"ORDER-ITEMS w-full flex max-lg:flex-col gap-4",children:[null===t||void 0===t?void 0:t.orderItem.slice(0,1).map(((e,s)=>{var r,i,n,a,l,o;return(0,x.jsxs)("div",{className:"PRODUCT-MAIN flex gap-2 flex-grow",children:[(0,x.jsxs)(d.N_,{to:`/order/${t._id}`,className:"flex-shrink-0",children:[e.productId?(0,x.jsx)("img",{src:null===(r=e.productId)||void 0===r?void 0:r.images[0],alt:null===(i=e.productId)||void 0===i||null===(n=i.productGroup)||void 0===n?void 0:n.name,loading:"lazy",className:"size-16 rounded"}):(0,x.jsx)("div",{className:"size-16 bg-lightGray flex items-center justify-center text-primary rounded text-xs text-center",children:"Invalid Product"}),(null===t||void 0===t?void 0:t.orderItem.length)>1&&(0,x.jsxs)("p",{className:"text-xs text-center font-medium",children:["+",t.orderItem.length-1," more"]})]}),(0,x.jsxs)("div",{className:"text-sm",children:[(0,x.jsx)("h3",{className:"font-medium",children:null===(a=e.productId)||void 0===a?void 0:a.name}),(null===e||void 0===e||null===(l=e.productId)||void 0===l?void 0:l.attributes)&&Object.keys(null===e||void 0===e||null===(o=e.productId)||void 0===o?void 0:o.attributes).slice(0,3).map((t=>{var s;return(0,x.jsxs)("p",{index:t,className:"capitalize",children:[t,": ",null===e||void 0===e||null===(s=e.productId)||void 0===s?void 0:s.attributes[t]]})}))]})]},s)})),(0,x.jsxs)("div",{className:"text-sm font-medium 2xl:w-80 xl:w-60 lg:w-40 flex-shrink-0",children:[(0,x.jsx)("h2",{children:"Expected delivery on Monday, 12th March"}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)("p",{children:"Order date :"}),(0,x.jsx)("p",{children:(0,c.Y)(new Date(t.createdAt))})]}),(0,x.jsxs)("div",{className:"flex gap-2",children:[(0,x.jsx)("p",{children:"Total :"}),(0,x.jsxs)("p",{children:["\u20b9 ",t.totalPrice]})]})]})]}),(0,x.jsxs)("div",{className:"BUTTONS-SECTION flex flex-col gap-y-2 flex-shrink-0",children:[(0,x.jsx)(l.A,{children:"Track order"}),(0,x.jsx)(l.A,{reverse:!0,onClick:()=>m(`/order/${t._id}`),children:"View order details"}),(0,x.jsxs)("div",{className:"flex lg:flex-col justify-around items-center",children:[(0,x.jsx)("button",{onClick:()=>{g.mutate(t._id,{onSuccess:e=>{const t=e.invoicePath;window.open(t,"_blank")},onError:e=>{console.error(e.message),s.error("This order is not shipped yet.")}})},className:"text-blue-500 text-sm px-4 py-2",children:"Get Invoice"}),(0,x.jsx)("button",{onClick:()=>r((0,x.jsx)(p,{onClick:v})),className:"text-blue-500 text-sm px-4 py-2",children:"Cancel Order"})]})]})]})]})})};var g=s(3661);const v=()=>{const e=(0,o.Zp)();return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsx)("h4",{className:"text-lg font-secondary font-medium text-center",children:"No order placed"}),(0,x.jsx)("ul",{className:"flex justify-center gap-4",children:Array.from({length:3}).map(((e,t)=>(0,x.jsx)("li",{className:"size-40 max-lg:size-30 max-sm:size-20 bg-mainGray"},t)))}),(0,x.jsx)(l.A,{onClick:()=>e("/wishlist"),className:"px-6 py-3 rounded-full text-lg mx-auto",children:"GO TO WISHLIST"})]})};var b=s(5609);const y=()=>{const{data:e=[],isLoading:t,error:s}=(0,i.h)(),[a,l]=(0,g.D)("page",1),o=(0,n.useMemo)((()=>{const t=5*(a-1),s=t+5;return e.slice(t,s)}),[a,e]);return t?(0,x.jsx)("div",{className:"w-full",children:(0,x.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:"Loading..."})}):s?(0,x.jsx)("div",{className:"w-full",children:(0,x.jsx)("h2",{className:"text-center font-secondary font-medium text-xl mt-8",children:s.message})}):(0,x.jsx)(r.P.main,{className:"flex-1",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,x.jsxs)("div",{className:"bg-white p-6 rounded-md lg:shadow-md",children:[(0,x.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"My Orders"}),0===e.length?(0,x.jsx)(v,{}):(0,x.jsxs)("div",{className:"space-y-4",children:[o.map((e=>(0,x.jsx)(f,{order:e},e._id))),(0,x.jsx)(b.A,{currentPage:parseInt(a,10),totalCount:e.length,pageSize:5,onPageChange:e=>l(e.toString())})]})]})})}},8361:(e,t,s)=>{s.d(t,{JJ:()=>u,Yq:()=>d,h:()=>l,s8:()=>c,sJ:()=>o});var r=s(3747),i=s(3248),n=s(7097),a=s(9966);const l=()=>(0,r.I)({queryKey:["orders"],queryFn:a.Vd,staleTime:3e5}),o=e=>(0,r.I)({queryKey:["order",e],queryFn:()=>(0,a.p)(e),staleTime:3e5,enabled:!!e}),d=e=>(0,r.I)({queryKey:["orderStatus",e],queryFn:()=>(0,a.dz)(e),staleTime:3e5,enabled:!!e}),c=e=>{const t=(0,i.jE)();return(0,n.n)({mutationFn:a.N4,onSuccess:()=>{t.invalidateQueries(["orders"]),t.invalidateQueries(["order",e]),t.invalidateQueries(["orderStatus",e])}})},u=e=>{const t=(0,i.jE)();return(0,n.n)({mutationFn:a.It,onSuccess:()=>{t.invalidateQueries(["order",e])}})}},1291:(e,t,s)=>{s.d(t,{Y:()=>r,f:()=>i});const r=e=>{const t=e.getDate(),s=e.toLocaleString("default",{month:"long"}),r=e.getFullYear();return`${t}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(t)} ${s}, ${r}`},i=e=>e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},7097:(e,t,s)=>{s.d(t,{n:()=>u});var r=s(5043),i=s(5239),n=s(1454),a=s(329),l=s(9723),o=class extends a.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():"pending"===this.#s?.state.status&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#n(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#n()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){const e=this.#s?.state??(0,i.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#n(e){n.j.batch((()=>{if(this.#r&&this.hasListeners()){const t=this.#t.variables,s=this.#t.context;"success"===e?.type?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):"error"===e?.type&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach((e=>{e(this.#t)}))}))}},d=s(3248),c=s(3247);function u(e,t){const s=(0,d.jE)(t),[i]=r.useState((()=>new o(s,e)));r.useEffect((()=>{i.setOptions(e)}),[i,e]);const a=r.useSyncExternalStore(r.useCallback((e=>i.subscribe(n.j.batchCalls(e))),[i]),(()=>i.getCurrentResult()),(()=>i.getCurrentResult())),l=r.useCallback(((e,t)=>{i.mutate(e,t).catch(c.l)}),[i]);if(a.error&&(0,c.G)(i.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}}}]);
//# sourceMappingURL=9822.e33434ce.chunk.js.map