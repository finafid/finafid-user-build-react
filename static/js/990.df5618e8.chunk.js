"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[990],{9966:(e,s,t)=>{t.d(s,{It:()=>o,Kv:()=>n,N4:()=>i,Vd:()=>r,dz:()=>c,fS:()=>l,p:()=>d});var a=t(5026);const r=async()=>(await a.A.get("/getOrderDetails")).data,d=async e=>(await a.A.get(`/getOrderById/${e}`)).data,l=(e,s,t,r)=>a.A.post("/placeOrder",{orderItem:e,address:s,...t,payment_method:r},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),n=(e,s)=>a.A.post(`/updateStatus/${e}`,{status:s},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),c=async e=>{var s,t;return null===(s=(await a.A.get(`/orderStatusDetails/${e}`)).data)||void 0===s||null===(t=s.statusDetails)||void 0===t?void 0:t.orderStatusDetails},i=async e=>(await a.A.get(`/cancelDelivery/${e}`)).data,o=async e=>(await a.A.get(`/downloadInvoice/${e}`)).data},990:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(5200),r=t(5475),d=t(579);const l=e=>{let{order:s}=e;return(0,d.jsxs)("div",{className:"DETAILS ",children:[(0,d.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Item Ordered :"}),(0,d.jsxs)("div",{className:"w-full border border-black rounded-lg overflow-x-auto",children:[(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-lightGray font-secondary",children:[(0,d.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"SL."}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"Product"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"SKU"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"QTY"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Price"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Discount"}),(0,d.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Total"})]})}),(0,d.jsx)("tbody",{children:s.orderItem.map(((e,s)=>{var t,a,l,n,c,i,o,x,m,u;return(0,d.jsxs)("tr",{className:"border-b-2 border-primary",children:[(0,d.jsx)("td",{className:"px-6",children:s+1}),(0,d.jsx)("td",{className:"px-4 py-3",children:e.productId?(0,d.jsxs)(r.N_,{to:`/product/${null===(t=e.productId)||void 0===t?void 0:t._id}`,className:"PRODUCT-MAIN flex gap-4",children:[(0,d.jsx)("div",{className:"size-16",children:(0,d.jsx)("img",{src:null===e||void 0===e||null===(a=e.productId)||void 0===a?void 0:a.images[0],alt:null===e||void 0===e||null===(l=e.productId)||void 0===l||null===(n=l.productGroup)||void 0===n?void 0:n.name,className:"size-full object-cover object-center"})}),(0,d.jsxs)("div",{className:"text-xs",children:[(0,d.jsx)("h3",{className:"font-medium",children:null===(c=e.productId)||void 0===c?void 0:c.name}),(0,d.jsx)("p",{children:"Size: XS"}),(0,d.jsx)("p",{children:"Color: White"})]})]}):(0,d.jsx)("div",{className:"size-16 bg-lightGray flex items-center justify-center text-primary rounded text-xs text-center",children:"Invalid Product"})}),(0,d.jsx)("td",{className:"px-4 py-3 text-center",children:(0,d.jsx)("p",{className:"text-sm",children:null===(i=e.productId)||void 0===i?void 0:i.sku})}),(0,d.jsx)("td",{className:"px-4 py-3 text-center",children:(0,d.jsx)("p",{className:"text-sm",children:e.itemQuantity})}),(0,d.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,d.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(o=e.productId)||void 0===o?void 0:o.unitPrice)*e.itemQuantity]})}),(0,d.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,d.jsxs)("p",{className:"text-sm",children:["\u20b9"," ",((null===(x=e.productId)||void 0===x?void 0:x.unitPrice)-(null===(m=e.productId)||void 0===m?void 0:m.sellingPrice))*e.itemQuantity]})}),(0,d.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,d.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(u=e.productId)||void 0===u?void 0:u.sellingPrice)*e.itemQuantity]})})]},s)}))})]}),(0,d.jsxs)("ul",{className:"TABLE-FOOTER space-y-1 ml-auto w-80 px-12 py-2 text-sm",children:[(0,d.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,d.jsx)("p",{className:"text-secondary",children:"Subtotal"}),(0,d.jsxs)("p",{children:["\u20b9 ",s.subtotal]})]}),(0,d.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,d.jsx)("p",{className:"text-secondary",children:"Discount"}),(0,d.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.discount]})]}),(0,d.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,d.jsx)("p",{className:"text-secondary",children:"Utsav Discount"}),(0,d.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.utsavDiscount]})]}),(0,d.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,d.jsx)("p",{className:"text-secondary",children:"Coupon Discount"}),(0,d.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.couponDiscount]})]}),(0,d.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,d.jsx)("p",{className:"text-secondary",children:"Wallet Balance Used"}),(0,d.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.walletBalanceUsed]})]}),(0,d.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,d.jsx)("p",{className:"text-secondary",children:"GST (incl)"}),(0,d.jsxs)("p",{className:"text-primary",children:["\u20b9 ",s.tax.toFixed(2)]})]}),(0,d.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,d.jsx)("p",{className:"text-secondary",children:"Shipping"}),(0,d.jsx)("p",{children:s.shippingCost>0?`\u20b9 ${s.shippingCost}`:(0,d.jsx)("span",{className:"text-xs text-green-500",children:"Free delivery"})})]}),(0,d.jsxs)("li",{className:"flex justify-between gap-6 text-base font-medium",children:[(0,d.jsx)("p",{children:"Total"}),(0,d.jsxs)("p",{children:["\u20b9 ",s.totalPrice]})]})]})]})]})};var n=t(5043),c=t(672),i=t(1291),o=t(3512);const x=["Confirmed","Shipping","Out For delivery","Delivered"],m=e=>{let{currentStatus:s,statusHistory:t}=e;const a=(0,o.A)("(min-width: 768px)"),r="Completed"===s?[...x,"Completed"]:"Canceled"===s?[...x,"Canceled"]:x,l=t.sort(((e,s)=>c.A7.indexOf(e.status)-c.A7.indexOf(s.status))),m=r.map((e=>l.find((s=>s.status===e))||{status:e,date:null,_id:`placeholder-${e}`})),u=m.findIndex((e=>e.status===s));return(0,d.jsxs)("div",{className:"relative border border-black rounded-lg",children:[(0,d.jsx)("div",{className:"PROGRESS-BAR px-16 pt-8 pb-16 max-md:p-8 flex max-md:flex-col justify-between md:items-center border-b border-black",children:m.map(((e,t)=>(0,d.jsxs)(n.Fragment,{children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("span",{className:"size-6 border-3 rounded-full flex justify-center items-center "+(t<=u&&e.date?"border-primeRed":"border-darkGray"),children:t<=u&&e.date&&(0,d.jsx)("span",{className:"block size-4 bg-primeRed rounded-full"})}),(0,d.jsxs)("div",{className:"absolute md:mt-1 md:left-1/2 md:-translate-x-1/2 max-md:top-1/2 max-md:left-10 max-md:-translate-y-1/2 w-max text-sm md:text-center font-medium",children:[(0,d.jsx)("p",{className:"first-letter:uppercase "+(t<=u&&e.date?"text-primeRed":"text-primary"),children:e.status}),(0,d.jsx)("p",{children:e.date?(0,i.Y)(new Date(e.date)):""})]}),e.status===s&&a?(0,d.jsx)("span",{className:"absolute size-5 left-1/2 -translate-x-1/2 top-[78px] rotate-45 bg-white border-t border-l border-black"}):null]}),t!==m.length-1&&(0,d.jsx)("div",{className:"relative md:h-[3px] md:w-full max-md:w-[3px] max-md:h-24 max-md:left-[10px] bg-darkGray overflow-hidden",children:t<u&&e.date&&(0,d.jsx)("span",{className:"absolute md:h-[3px] md:w-full max-md:w-[3px] max-md:h-full bg-primeRed transition-transform duration-500 ease-out origin-left"})})]},e._id)))}),-1!==u&&(0,d.jsxs)("div",{className:"PROGRESS-DETAILS px-12 max-md:px-8 py-3 max-md:py-2 flex items-center gap-12",children:[(0,d.jsxs)("div",{className:"font-semibold font-secondary text-center",children:[(0,d.jsx)("p",{className:"text-3xl",children:new Date(m[u].date).getDate()}),(0,d.jsx)("p",{children:new Date(m[u].date).toLocaleString("default",{month:"short"}).toUpperCase()})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium",children:`Order is ${s.toLowerCase()}`}),(0,d.jsx)("p",{className:"text-sm text-primary",children:(0,i.f)(new Date(m[u].date))})]})]})]})},u=e=>{let{statusHistory:s,currentStatus:t}=e;return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Tracking Order :"}),(0,d.jsx)(m,{currentStatus:t,statusHistory:s})]})})};var p=t(3216),h=t(8361),j=t(3907),f=t(2925);const y=()=>{const{orderId:e}=(0,p.g)(),{data:s,isLoading:t,error:r}=(0,h.sJ)(e),{data:n,isLoading:o,error:x}=(0,h.Yq)(e),m=(0,h.JJ)(),y=(0,f.d)();return t?(0,d.jsx)("div",{className:"w-full",children:(0,d.jsx)("h2",{className:"text-center font-medium text-xl mt-8",children:"Loading..."})}):r?(0,d.jsx)("div",{className:"w-full",children:(0,d.jsx)("h2",{className:"text-center font-medium text-xl mt-8",children:r.message})}):s&&(0,d.jsxs)("main",{className:"container max-w-full py-8 px-32 max-xl:px-16 max-lg:px-8 max-md:px-4 space-y-4",children:[(0,d.jsxs)("section",{className:"TOP-HEAD",children:[(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("h2",{className:"font-secondary font-semibold text-3xl",children:"Order Details"}),(0,d.jsx)("span",{className:`px-3 py-1 rounded-full ${(0,c.xn)(s.status)}`,children:(0,d.jsx)("p",{className:"text-xs text-white font-medium",children:s.status.toUpperCase()})})]}),(0,d.jsxs)("p",{className:"font-medium text-secondary font-secondary",children:["Order placed on ",(0,i.Y)(new Date(s.createdAt))]}),(0,d.jsxs)("p",{className:"font-medium text-secondary font-secondary",children:["Arriving on ",(0,i.Y)(new Date(s.expectedDeliveryDate))]})]}),(0,d.jsx)(j.A,{type:"button",reverse:!0,onClick:()=>{m.mutate(e,{onSuccess:e=>{const s=e.invoicePath;window.open(s,"_blank")},onError:e=>{console.error(e.message),y.error("This order is not shipped yet.")}})},className:"px-4 py-2 rounded-full ml-auto",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(a.a4x,{size:18}),(0,d.jsx)("p",{className:"font-medium",children:"INVOICE"})]})}),(0,d.jsx)(l,{order:s}),o||x?null:(0,d.jsx)(u,{statusHistory:n,currentStatus:s.status})]})}},8361:(e,s,t)=>{t.d(s,{JJ:()=>x,Yq:()=>i,h:()=>n,s8:()=>o,sJ:()=>c});var a=t(3747),r=t(3248),d=t(7097),l=t(9966);const n=()=>(0,a.I)({queryKey:["orders"],queryFn:l.Vd,staleTime:3e5}),c=e=>(0,a.I)({queryKey:["order",e],queryFn:()=>(0,l.p)(e),staleTime:3e5,enabled:!!e}),i=e=>(0,a.I)({queryKey:["orderStatus",e],queryFn:()=>(0,l.dz)(e),staleTime:3e5,enabled:!!e}),o=e=>{const s=(0,r.jE)();return(0,d.n)({mutationFn:l.N4,onSuccess:()=>{s.invalidateQueries(["orders"]),s.invalidateQueries(["order",e]),s.invalidateQueries(["orderStatus",e])}})},x=e=>{const s=(0,r.jE)();return(0,d.n)({mutationFn:l.It,onSuccess:()=>{s.invalidateQueries(["order",e])}})}},1291:(e,s,t)=>{t.d(s,{Y:()=>a,f:()=>r});const a=e=>{const s=e.getDate(),t=e.toLocaleString("default",{month:"long"}),a=e.getFullYear();return`${s}${(e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}})(s)} ${t}, ${a}`},r=e=>e.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}}]);
//# sourceMappingURL=990.df5618e8.chunk.js.map