"use strict";(self.webpackChunkfinafid_frontend=self.webpackChunkfinafid_frontend||[]).push([[990],{9966:(e,s,t)=>{t.d(s,{It:()=>o,Kv:()=>c,N4:()=>i,Vd:()=>d,dz:()=>n,fS:()=>r,p:()=>l});var a=t(5026);const d=async()=>(await a.A.get("/getOrderDetails")).data,l=async e=>(await a.A.get(`/getOrderById/${e}`)).data,r=(e,s,t,d)=>a.A.post("/placeOrder",{orderItem:e,address:s,...t,payment_method:d},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),c=(e,s)=>a.A.post(`/updateStatus/${e}`,{status:s},{headers:{"x-api-key":"5bf354ec4f476169e2690e6a0f875772fd82987882bc7db7fadf71291f6c5ecc"}}),n=async e=>{var s,t;return null===(s=(await a.A.get(`/orderStatusDetails/${e}`)).data)||void 0===s||null===(t=s.statusDetails)||void 0===t?void 0:t.orderStatusDetails},i=async e=>(await a.A.get(`/cancelDelivery/${e}`)).data,o=async e=>(await a.A.get(`/downloadInvoice/${e}`)).data},990:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(5200),d=t(5475),l=t(579);const r=e=>{let{order:s}=e;return(0,l.jsxs)("div",{className:"DETAILS ",children:[(0,l.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Item Ordered :"}),(0,l.jsxs)("div",{className:"w-full border border-black rounded-lg overflow-x-auto",children:[(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-lightGray font-secondary",children:[(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"SL."}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 text-left font-medium",children:"Product"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"SKU"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"QTY"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Price"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Discount"}),(0,l.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium",children:"Total"})]})}),(0,l.jsx)("tbody",{children:s.orderItem.map(((e,s)=>{var t,a,r,c,n,i,o,x,m,p;return(0,l.jsxs)("tr",{className:"border-b-2 border-primary",children:[(0,l.jsx)("td",{className:"px-6",children:s+1}),(0,l.jsx)("td",{className:"px-4 py-3",children:e.productId?(0,l.jsxs)(d.N_,{to:`/product/${null===(t=e.productId)||void 0===t?void 0:t._id}`,className:"PRODUCT-MAIN flex gap-4",children:[(0,l.jsx)("div",{className:"size-16",children:(0,l.jsx)("img",{src:null===e||void 0===e||null===(a=e.productId)||void 0===a?void 0:a.images[0],alt:null===e||void 0===e||null===(r=e.productId)||void 0===r||null===(c=r.productGroup)||void 0===c?void 0:c.name,className:"size-full object-cover object-center"})}),(0,l.jsxs)("div",{className:"text-xs",children:[(0,l.jsx)("h3",{className:"font-medium",children:null===(n=e.productId)||void 0===n?void 0:n.name}),(0,l.jsx)("p",{children:"Size: XS"}),(0,l.jsx)("p",{children:"Color: White"})]})]}):(0,l.jsx)("div",{className:"size-16 bg-lightGray flex items-center justify-center text-primary rounded text-xs text-center",children:"Invalid Product"})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:(0,l.jsx)("p",{className:"text-sm",children:null===(i=e.productId)||void 0===i?void 0:i.sku})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:(0,l.jsx)("p",{className:"text-sm",children:e.itemQuantity})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,l.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(o=e.productId)||void 0===o?void 0:o.unitPrice)*e.itemQuantity]})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,l.jsxs)("p",{className:"text-sm",children:["\u20b9"," ",((null===(x=e.productId)||void 0===x?void 0:x.unitPrice)-(null===(m=e.productId)||void 0===m?void 0:m.sellingPrice))*e.itemQuantity]})}),(0,l.jsx)("td",{className:"px-4 py-3 text-center",children:e.productId&&(0,l.jsxs)("p",{className:"text-sm",children:["\u20b9 ",(null===(p=e.productId)||void 0===p?void 0:p.sellingPrice)*e.itemQuantity]})})]},s)}))})]}),(0,l.jsxs)("ul",{className:"TABLE-FOOTER space-y-1 ml-auto w-80 px-12 py-2 text-sm",children:[(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Subtotal"}),(0,l.jsxs)("p",{children:["\u20b9 ",s.subtotal]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Discount"}),(0,l.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.discount]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Utsav Discount"}),(0,l.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.utsavDiscount]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Coupon Discount"}),(0,l.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.couponDiscount]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Wallet Balance Used"}),(0,l.jsxs)("p",{className:"text-success",children:["- \u20b9 ",s.walletBalanceUsed]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"GST (incl)"}),(0,l.jsxs)("p",{className:"text-primary",children:["\u20b9 ",s.tax.toFixed(2)]})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-12",children:[(0,l.jsx)("p",{className:"text-secondary",children:"Shipping"}),(0,l.jsx)("p",{children:s.shippingCost>0?`\u20b9 ${s.shippingCost}`:(0,l.jsx)("span",{className:"text-xs text-green-500",children:"Free delivery"})})]}),(0,l.jsxs)("li",{className:"flex justify-between gap-6 text-base font-medium",children:[(0,l.jsx)("p",{children:"Total"}),(0,l.jsxs)("p",{children:["\u20b9 ",s.totalPrice]})]})]})]})]})};var c=t(5043),n=t(672),i=t(1291),o=t(3512);const x=["Confirmed","Shipping","Out For delivery","Delivered"],m=e=>{let{currentStatus:s,statusHistory:t}=e;const a=(0,o.A)("(min-width: 768px)"),d="Completed"===s?[...x,"Completed"]:"Canceled"===s?[...x,"Canceled"]:"Pickup Completed"===s?[...x,"Pickup Completed"]:"Refund Completed"===s?[...x,"Refund Completed"]:x,r=t.sort(((e,s)=>n.A7.indexOf(e.status)-n.A7.indexOf(s.status))),m=d.map((e=>r.find((s=>s.status===e))||{status:e,date:null,_id:`placeholder-${e}`})),p=m.findIndex((e=>e.status===s));return(0,l.jsxs)("div",{className:"relative border border-black rounded-lg",children:[(0,l.jsx)("div",{className:"PROGRESS-BAR px-16 pt-8 pb-16 max-md:p-8 flex max-md:flex-col justify-between md:items-center border-b border-black",children:m.map(((e,t)=>(0,l.jsxs)(c.Fragment,{children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"size-6 border-3 rounded-full flex justify-center items-center "+(t<=p&&e.date?"border-primeRed":"border-darkGray"),children:t<=p&&e.date&&(0,l.jsx)("span",{className:"block size-4 bg-primeRed rounded-full"})}),(0,l.jsxs)("div",{className:"absolute md:mt-1 md:left-1/2 md:-translate-x-1/2 max-md:top-1/2 max-md:left-10 max-md:-translate-y-1/2 w-max text-sm md:text-center font-medium",children:[(0,l.jsx)("p",{className:"first-letter:uppercase "+(t<=p&&e.date?"text-primeRed":"text-primary"),children:e.status}),(0,l.jsx)("p",{children:e.date?(0,i.Yq)(new Date(e.date)):""})]}),e.status===s&&a?(0,l.jsx)("span",{className:"absolute size-5 left-1/2 -translate-x-1/2 top-[78px] rotate-45 bg-white border-t border-l border-black"}):null]}),t!==m.length-1&&(0,l.jsx)("div",{className:"relative md:h-[3px] md:w-full max-md:w-[3px] max-md:h-24 max-md:left-[10px] bg-darkGray overflow-hidden",children:t<p&&e.date&&(0,l.jsx)("span",{className:"absolute md:h-[3px] md:w-full max-md:w-[3px] max-md:h-full bg-primeRed transition-transform duration-500 ease-out origin-left"})})]},e._id)))}),-1!==p&&(0,l.jsxs)("div",{className:"PROGRESS-DETAILS px-12 max-md:px-8 py-3 max-md:py-2 flex items-center gap-12",children:[(0,l.jsxs)("div",{className:"font-semibold font-secondary text-center",children:[(0,l.jsx)("p",{className:"text-3xl",children:new Date(m[p].date).getDate()}),(0,l.jsx)("p",{children:new Date(m[p].date).toLocaleString("default",{month:"short"}).toUpperCase()})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:`Order is ${s.toLowerCase()}`}),(0,l.jsx)("p",{className:"text-sm text-primary",children:(0,i.fU)(new Date(m[p].date))})]})]})]})},p=e=>{let{statusHistory:s,currentStatus:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium font-secondary text-lg my-2",children:"Tracking Order :"}),(0,l.jsx)(m,{currentStatus:t,statusHistory:s})]})})};var u=t(3216),h=t(8361),j=t(3907),f=t(2925);const y=()=>{const{orderId:e}=(0,u.g)(),{data:s,isLoading:t,error:d}=(0,h.sJ)(e),{data:c,isLoading:o,error:x}=(0,h.Yq)(e),m=(0,h.JJ)(),y=(0,f.d)();return t?(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("h2",{className:"text-center font-medium text-xl mt-8",children:"Loading..."})}):d?(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("h2",{className:"text-center font-medium text-xl mt-8",children:d.message})}):s&&(0,l.jsxs)("main",{className:"container max-w-full py-8 px-32 max-xl:px-16 max-lg:px-8 max-md:px-4 space-y-4",children:[(0,l.jsxs)("section",{className:"TOP-HEAD",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("h2",{className:"font-secondary font-semibold text-3xl",children:"Order Details"}),(0,l.jsx)("span",{className:`px-3 py-1 rounded-full ${(0,n.xn)(s.status)}`,children:(0,l.jsx)("p",{className:"text-xs text-white font-medium",children:s.status.toUpperCase()})})]}),(0,l.jsxs)("p",{className:"font-medium text-secondary font-secondary",children:["Order placed on ",(0,i.Yq)(new Date(s.createdAt))]}),(0,l.jsxs)("p",{className:"font-medium text-secondary font-secondary",children:["Arriving on ",(0,i.Yq)(new Date(s.expectedDeliveryDate))]})]}),(0,l.jsx)(j.A,{type:"button",reverse:!0,onClick:()=>{m.mutate(e,{onSuccess:e=>{const s=e.invoicePath;window.open(s,"_blank")},onError:e=>{console.error(e.message),y.error("This order is not shipped yet.")}})},className:"px-4 py-2 rounded-full ml-auto",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(a.a4x,{size:18}),(0,l.jsx)("p",{className:"font-medium",children:"INVOICE"})]})}),(0,l.jsx)(r,{order:s}),o||x?null:(0,l.jsx)(p,{statusHistory:c,currentStatus:s.status})]})}},8361:(e,s,t)=>{t.d(s,{JJ:()=>x,Yq:()=>i,h:()=>c,s8:()=>o,sJ:()=>n});var a=t(3747),d=t(3248),l=t(7097),r=t(9966);const c=()=>(0,a.I)({queryKey:["orders"],queryFn:r.Vd,staleTime:3e5}),n=e=>(0,a.I)({queryKey:["order",e],queryFn:()=>(0,r.p)(e),staleTime:3e5,enabled:!!e}),i=e=>(0,a.I)({queryKey:["orderStatus",e],queryFn:()=>(0,r.dz)(e),staleTime:3e5,enabled:!!e}),o=e=>{const s=(0,d.jE)();return(0,l.n)({mutationFn:r.N4,onSuccess:()=>{s.invalidateQueries(["orders"]),s.invalidateQueries(["order",e]),s.invalidateQueries(["orderStatus",e])}})},x=e=>{const s=(0,d.jE)();return(0,l.n)({mutationFn:r.It,onSuccess:()=>{s.invalidateQueries(["order",e])}})}}}]);
//# sourceMappingURL=990.4ba5a4ea.chunk.js.map